!function(){function t(e,n,r){function i(s,a){if(!n[s]){if(!e[s]){var u="function"==typeof require&&require;if(!a&&u)return u(s,!0);if(o)return o(s,!0);var h=new Error("Cannot find module '"+s+"'");throw h.code="MODULE_NOT_FOUND",h}var l=n[s]={exports:{}};e[s][0].call(l.exports,function(t){var n=e[s][1][t];return i(n||t)},l,l.exports,t,e,n,r)}return n[s].exports}for(var o="function"==typeof require&&require,s=0;s<r.length;s++)i(r[s]);return i}return t}()({1:[function(t,e,n){const r=t("imjs"),i=new r.Service({root:"www.flymine.org/query",token:"d1r6FbSbocR743CfT2Ob"}),o={from:"Gene",select:["exons.symbol","chromosome.primaryIdentifier","exons.chromosomeLocation.start","exons.chromosomeLocation.end"],where:{symbol:"eve",organism:{lookup:"D. melanogaster"}}},s=new r.Query(o,i);s.save().then(console.log)["catch"](console.log)},{imjs:19}],2:[function(t,e,n){!function(){function t(){return{keys:Object.keys||function(t){if("object"!=typeof t&&"function"!=typeof t||null===t)throw new TypeError("keys() called on a non-object");var e,n=[];for(e in t)t.hasOwnProperty(e)&&(n[n.length]=e);return n},uniqueId:function(t){var e=++u+"";return t?t+e:e},has:function(t,e){return s.call(t,e)},each:function(t,e,n){if(null!=t)if(o&&t.forEach===o)t.forEach(e,n);else if(t.length===+t.length)for(var r=0,i=t.length;r<i;r++)e.call(n,t[r],r,t);else for(var s in t)this.has(t,s)&&e.call(n,t[s],s,t)},once:function(t){var e,n=!1;return function(){return n?e:(n=!0,e=t.apply(this,arguments),t=null,e)}}}}var r,i=this,o=Array.prototype.forEach,s=Object.prototype.hasOwnProperty,a=Array.prototype.slice,u=0,h=t();r={on:function(t,e,n){if(!c(this,"on",t,[e,n])||!e)return this;this._events||(this._events={});var r=this._events[t]||(this._events[t]=[]);return r.push({callback:e,context:n,ctx:n||this}),this},once:function(t,e,n){if(!c(this,"once",t,[e,n])||!e)return this;var r=this,i=h.once(function(){r.off(t,i),e.apply(this,arguments)});return i._callback=e,this.on(t,i,n)},off:function(t,e,n){var r,i,o,s,a,u,l,f;if(!this._events||!c(this,"off",t,[e,n]))return this;if(!t&&!e&&!n)return this._events={},this;for(s=t?[t]:h.keys(this._events),a=0,u=s.length;a<u;a++)if(t=s[a],o=this._events[t]){if(this._events[t]=r=[],e||n)for(l=0,f=o.length;l<f;l++)i=o[l],(e&&e!==i.callback&&e!==i.callback._callback||n&&n!==i.context)&&r.push(i);r.length||delete this._events[t]}return this},trigger:function(t){if(!this._events)return this;var e=a.call(arguments,1);if(!c(this,"trigger",t,e))return this;var n=this._events[t],r=this._events.all;return n&&f(n,e),r&&f(r,arguments),this},stopListening:function(t,e,n){var r=this._listeners;if(!r)return this;var i=!e&&!n;"object"==typeof e&&(n=this),t&&((r={})[t._listenerId]=t);for(var o in r)r[o].off(e,n,this),i&&delete this._listeners[o];return this}};var l=/\s+/,c=function(t,e,n,r){if(!n)return!0;if("object"==typeof n){for(var i in n)t[e].apply(t,[i,n[i]].concat(r));return!1}if(l.test(n)){for(var o=n.split(l),s=0,a=o.length;s<a;s++)t[e].apply(t,[o[s]].concat(r));return!1}return!0},f=function(t,e){var n,r=-1,i=t.length,o=e[0],s=e[1],a=e[2];switch(e.length){case 0:for(;++r<i;)(n=t[r]).callback.call(n.ctx);return;case 1:for(;++r<i;)(n=t[r]).callback.call(n.ctx,o);return;case 2:for(;++r<i;)(n=t[r]).callback.call(n.ctx,o,s);return;case 3:for(;++r<i;)(n=t[r]).callback.call(n.ctx,o,s,a);return;default:for(;++r<i;)(n=t[r]).callback.apply(n.ctx,e)}},p={listenTo:"on",listenToOnce:"once"};h.each(p,function(t,e){r[e]=function(e,n,r){var i=this._listeners||(this._listeners={}),o=e._listenerId||(e._listenerId=h.uniqueId("l"));return i[o]=e,"object"==typeof n&&(r=this),e[t](n,r,this),this}}),r.bind=r.on,r.unbind=r.off,r.mixin=function(t){var e=["on","once","off","trigger","stopListening","listenTo","listenToOnce","bind","unbind"];return h.each(e,function(e){t[e]=this[e]},this),t},"undefined"!=typeof n?("undefined"!=typeof e&&e.exports&&(n=e.exports=r),n.BackboneEvents=r):"function"==typeof define&&"object"==typeof define.amd?define(function(){return r}):i.BackboneEvents=r}(this)},{}],3:[function(t,e,n){e.exports=t("./backbone-events-standalone")},{"./backbone-events-standalone":2}],4:[function(t,e,n){"use strict";function r(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=t.indexOf("=");n===-1&&(n=e);var r=n===e?0:4-n%4;return[n,r]}function i(t){var e=r(t),n=e[0],i=e[1];return 3*(n+i)/4-i}function o(t,e,n){return 3*(e+n)/4-n}function s(t){for(var e,n=r(t),i=n[0],s=n[1],a=new f(o(t,i,s)),u=0,h=s>0?i-4:i,l=0;l<h;l+=4)e=c[t.charCodeAt(l)]<<18|c[t.charCodeAt(l+1)]<<12|c[t.charCodeAt(l+2)]<<6|c[t.charCodeAt(l+3)],a[u++]=e>>16&255,a[u++]=e>>8&255,a[u++]=255&e;return 2===s&&(e=c[t.charCodeAt(l)]<<2|c[t.charCodeAt(l+1)]>>4,a[u++]=255&e),1===s&&(e=c[t.charCodeAt(l)]<<10|c[t.charCodeAt(l+1)]<<4|c[t.charCodeAt(l+2)]>>2,a[u++]=e>>8&255,a[u++]=255&e),a}function a(t){return l[t>>18&63]+l[t>>12&63]+l[t>>6&63]+l[63&t]}function u(t,e,n){for(var r,i=[],o=e;o<n;o+=3)r=(t[o]<<16&16711680)+(t[o+1]<<8&65280)+(255&t[o+2]),i.push(a(r));return i.join("")}function h(t){for(var e,n=t.length,r=n%3,i=[],o=16383,s=0,a=n-r;s<a;s+=o)i.push(u(t,s,s+o>a?a:s+o));return 1===r?(e=t[n-1],i.push(l[e>>2]+l[e<<4&63]+"==")):2===r&&(e=(t[n-2]<<8)+t[n-1],i.push(l[e>>10]+l[e>>4&63]+l[e<<2&63]+"=")),i.join("")}n.byteLength=i,n.toByteArray=s,n.fromByteArray=h;for(var l=[],c=[],f="undefined"!=typeof Uint8Array?Uint8Array:Array,p="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",d=0,y=p.length;d<y;++d)l[d]=p[d],c[p.charCodeAt(d)]=d;c["-".charCodeAt(0)]=62,c["_".charCodeAt(0)]=63},{}],5:[function(t,e,n){},{}],6:[function(t,e,n){"use strict";function r(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()}catch(e){return!1}}function i(t){if(t>Y)throw new RangeError('The value "'+t+'" is invalid for option "size"');var e=new Uint8Array(t);return e.__proto__=o.prototype,e}function o(t,e,n){if("number"==typeof t){if("string"==typeof e)throw new TypeError('The "string" argument must be of type string. Received type number');return h(t)}return s(t,e,n)}function s(t,e,n){if("string"==typeof t)return l(t,e);if(ArrayBuffer.isView(t))return c(t);if(null==t)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);if(G(t,ArrayBuffer)||t&&G(t.buffer,ArrayBuffer))return f(t,e,n);if("number"==typeof t)throw new TypeError('The "value" argument must not be of type number. Received type number');var r=t.valueOf&&t.valueOf();if(null!=r&&r!==t)return o.from(r,e,n);var i=p(t);if(i)return i;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof t[Symbol.toPrimitive])return o.from(t[Symbol.toPrimitive]("string"),e,n);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t)}function a(t){if("number"!=typeof t)throw new TypeError('"size" argument must be of type number');if(t<0)throw new RangeError('The value "'+t+'" is invalid for option "size"')}function u(t,e,n){return a(t),t<=0?i(t):void 0!==e?"string"==typeof n?i(t).fill(e,n):i(t).fill(e):i(t)}function h(t){return a(t),i(t<0?0:0|d(t))}function l(t,e){if("string"==typeof e&&""!==e||(e="utf8"),!o.isEncoding(e))throw new TypeError("Unknown encoding: "+e);var n=0|g(t,e),r=i(n),s=r.write(t,e);return s!==n&&(r=r.slice(0,s)),r}function c(t){for(var e=t.length<0?0:0|d(t.length),n=i(e),r=0;r<e;r+=1)n[r]=255&t[r];return n}function f(t,e,n){if(e<0||t.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(t.byteLength<e+(n||0))throw new RangeError('"length" is outside of buffer bounds');var r;return r=void 0===e&&void 0===n?new Uint8Array(t):void 0===n?new Uint8Array(t,e):new Uint8Array(t,e,n),r.__proto__=o.prototype,r}function p(t){if(o.isBuffer(t)){var e=0|d(t.length),n=i(e);return 0===n.length?n:(t.copy(n,0,0,e),n)}return void 0!==t.length?"number"!=typeof t.length||J(t.length)?i(0):c(t):"Buffer"===t.type&&Array.isArray(t.data)?c(t.data):void 0}function d(t){if(t>=Y)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+Y.toString(16)+" bytes");return 0|t}function y(t){return+t!=t&&(t=0),o.alloc(+t)}function g(t,e){if(o.isBuffer(t))return t.length;if(ArrayBuffer.isView(t)||G(t,ArrayBuffer))return t.byteLength;if("string"!=typeof t)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof t);var n=t.length,r=arguments.length>2&&arguments[2]===!0;if(!r&&0===n)return 0;for(var i=!1;;)switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return F(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return W(t).length;default:if(i)return r?-1:F(t).length;e=(""+e).toLowerCase(),i=!0}}function v(t,e,n){var r=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if(n>>>=0,e>>>=0,n<=e)return"";for(t||(t="utf8");;)switch(t){case"hex":return j(this,e,n);case"utf8":case"utf-8":return k(this,e,n);case"ascii":return C(this,e,n);case"latin1":case"binary":return A(this,e,n);case"base64":return R(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return I(this,e,n);default:if(r)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),r=!0}}function m(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function b(t,e,n,r,i){if(0===t.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,J(n)&&(n=i?0:t.length-1),n<0&&(n=t.length+n),n>=t.length){if(i)return-1;n=t.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof e&&(e=o.from(e,r)),o.isBuffer(e))return 0===e.length?-1:w(t,e,n,r,i);if("number"==typeof e)return e=255&e,"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,e,n):Uint8Array.prototype.lastIndexOf.call(t,e,n):w(t,[e],n,r,i);throw new TypeError("val must be string, number or Buffer")}function w(t,e,n,r,i){function o(t,e){return 1===s?t[e]:t.readUInt16BE(e*s)}var s=1,a=t.length,u=e.length;if(void 0!==r&&(r=String(r).toLowerCase(),"ucs2"===r||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(t.length<2||e.length<2)return-1;s=2,a/=2,u/=2,n/=2}var h;if(i){var l=-1;for(h=n;h<a;h++)if(o(t,h)===o(e,l===-1?0:h-l)){if(l===-1&&(l=h),h-l+1===u)return l*s}else l!==-1&&(h-=h-l),l=-1}else for(n+u>a&&(n=a-u),h=n;h>=0;h--){for(var c=!0,f=0;f<u;f++)if(o(t,h+f)!==o(e,f)){c=!1;break}if(c)return h}return-1}function _(t,e,n,r){n=Number(n)||0;var i=t.length-n;r?(r=Number(r),r>i&&(r=i)):r=i;var o=e.length;r>o/2&&(r=o/2);for(var s=0;s<r;++s){var a=parseInt(e.substr(2*s,2),16);if(J(a))return s;t[n+s]=a}return s}function E(t,e,n,r){return X(F(e,t.length-n),t,n,r)}function S(t,e,n,r){return X(V(e),t,n,r)}function T(t,e,n,r){return S(t,e,n,r)}function O(t,e,n,r){return X(W(e),t,n,r)}function x(t,e,n,r){return X(H(e,t.length-n),t,n,r)}function R(t,e,n){return 0===e&&n===t.length?z.fromByteArray(t):z.fromByteArray(t.slice(e,n))}function k(t,e,n){n=Math.min(t.length,n);for(var r=[],i=e;i<n;){var o=t[i],s=null,a=o>239?4:o>223?3:o>191?2:1;if(i+a<=n){var u,h,l,c;switch(a){case 1:o<128&&(s=o);break;case 2:u=t[i+1],128===(192&u)&&(c=(31&o)<<6|63&u,c>127&&(s=c));break;case 3:u=t[i+1],h=t[i+2],128===(192&u)&&128===(192&h)&&(c=(15&o)<<12|(63&u)<<6|63&h,c>2047&&(c<55296||c>57343)&&(s=c));break;case 4:u=t[i+1],h=t[i+2],l=t[i+3],128===(192&u)&&128===(192&h)&&128===(192&l)&&(c=(15&o)<<18|(63&u)<<12|(63&h)<<6|63&l,c>65535&&c<1114112&&(s=c))}}null===s?(s=65533,a=1):s>65535&&(s-=65536,r.push(s>>>10&1023|55296),s=56320|1023&s),r.push(s),i+=a}return L(r)}function L(t){var e=t.length;if(e<=Q)return String.fromCharCode.apply(String,t);for(var n="",r=0;r<e;)n+=String.fromCharCode.apply(String,t.slice(r,r+=Q));return n}function C(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(127&t[i]);return r}function A(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(t[i]);return r}function j(t,e,n){var r=t.length;(!e||e<0)&&(e=0),(!n||n<0||n>r)&&(n=r);for(var i="",o=e;o<n;++o)i+=D(t[o]);return i}function I(t,e,n){for(var r=t.slice(e,n),i="",o=0;o<r.length;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function N(t,e,n){if(t%1!==0||t<0)throw new RangeError("offset is not uint");if(t+e>n)throw new RangeError("Trying to access beyond buffer length")}function M(t,e,n,r,i,s){if(!o.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<s)throw new RangeError('"value" argument is out of bounds');if(n+r>t.length)throw new RangeError("Index out of range")}function q(t,e,n,r,i,o){if(n+r>t.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function P(t,e,n,r,i){return e=+e,n>>>=0,i||q(t,e,n,4,3.4028234663852886e38,-3.4028234663852886e38),K.write(t,e,n,r,23,4),n+4}function U(t,e,n,r,i){return e=+e,n>>>=0,i||q(t,e,n,8,1.7976931348623157e308,-1.7976931348623157e308),K.write(t,e,n,r,52,8),n+8}function B(t){if(t=t.split("=")[0],t=t.trim().replace($,""),t.length<2)return"";for(;t.length%4!==0;)t+="=";return t}function D(t){return t<16?"0"+t.toString(16):t.toString(16)}function F(t,e){e=e||1/0;for(var n,r=t.length,i=null,o=[],s=0;s<r;++s){if(n=t.charCodeAt(s),n>55295&&n<57344){if(!i){if(n>56319){(e-=3)>-1&&o.push(239,191,189);continue}if(s+1===r){(e-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(n<56320){(e-=3)>-1&&o.push(239,191,189),i=n;continue}n=(i-55296<<10|n-56320)+65536}else i&&(e-=3)>-1&&o.push(239,191,189);if(i=null,n<128){if((e-=1)<0)break;o.push(n)}else if(n<2048){if((e-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function V(t){for(var e=[],n=0;n<t.length;++n)e.push(255&t.charCodeAt(n));return e}function H(t,e){for(var n,r,i,o=[],s=0;s<t.length&&!((e-=2)<0);++s)n=t.charCodeAt(s),r=n>>8,i=n%256,o.push(i),o.push(r);return o}function W(t){return z.toByteArray(B(t))}function X(t,e,n,r){for(var i=0;i<r&&!(i+n>=e.length||i>=t.length);++i)e[i+n]=t[i];return i}function G(t,e){return t instanceof e||null!=t&&null!=t.constructor&&null!=t.constructor.name&&t.constructor.name===e.name}function J(t){return t!==t}var z=t("base64-js"),K=t("ieee754");n.Buffer=o,n.SlowBuffer=y,n.INSPECT_MAX_BYTES=50;var Y=2147483647;n.kMaxLength=Y,o.TYPED_ARRAY_SUPPORT=r(),o.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(o.prototype,"parent",{enumerable:!0,get:function(){if(o.isBuffer(this))return this.buffer}}),Object.defineProperty(o.prototype,"offset",{enumerable:!0,get:function(){if(o.isBuffer(this))return this.byteOffset}}),"undefined"!=typeof Symbol&&null!=Symbol.species&&o[Symbol.species]===o&&Object.defineProperty(o,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),o.poolSize=8192,o.from=function(t,e,n){return s(t,e,n)},o.prototype.__proto__=Uint8Array.prototype,o.__proto__=Uint8Array,o.alloc=function(t,e,n){return u(t,e,n)},o.allocUnsafe=function(t){return h(t)},o.allocUnsafeSlow=function(t){return h(t)},o.isBuffer=function(t){return null!=t&&t._isBuffer===!0&&t!==o.prototype},o.compare=function(t,e){if(G(t,Uint8Array)&&(t=o.from(t,t.offset,t.byteLength)),G(e,Uint8Array)&&(e=o.from(e,e.offset,e.byteLength)),!o.isBuffer(t)||!o.isBuffer(e))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(t===e)return 0;for(var n=t.length,r=e.length,i=0,s=Math.min(n,r);i<s;++i)if(t[i]!==e[i]){n=t[i],r=e[i];break}return n<r?-1:r<n?1:0},o.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},o.concat=function(t,e){if(!Array.isArray(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return o.alloc(0);var n;if(void 0===e)for(e=0,n=0;n<t.length;++n)e+=t[n].length;var r=o.allocUnsafe(e),i=0;for(n=0;n<t.length;++n){var s=t[n];if(G(s,Uint8Array)&&(s=o.from(s)),!o.isBuffer(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(r,i),i+=s.length}return r},o.byteLength=g,o.prototype._isBuffer=!0,o.prototype.swap16=function(){var t=this.length;if(t%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)m(this,e,e+1);return this},o.prototype.swap32=function(){var t=this.length;if(t%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)m(this,e,e+3),m(this,e+1,e+2);return this},o.prototype.swap64=function(){var t=this.length;if(t%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)m(this,e,e+7),m(this,e+1,e+6),m(this,e+2,e+5),m(this,e+3,e+4);return this},o.prototype.toString=function(){var t=this.length;return 0===t?"":0===arguments.length?k(this,0,t):v.apply(this,arguments)},o.prototype.toLocaleString=o.prototype.toString,o.prototype.equals=function(t){if(!o.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===o.compare(this,t)},o.prototype.inspect=function(){var t="",e=n.INSPECT_MAX_BYTES;return t=this.toString("hex",0,e).replace(/(.{2})/g,"$1 ").trim(),this.length>e&&(t+=" ... "),"<Buffer "+t+">"},o.prototype.compare=function(t,e,n,r,i){if(G(t,Uint8Array)&&(t=o.from(t,t.offset,t.byteLength)),!o.isBuffer(t))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof t);if(void 0===e&&(e=0),void 0===n&&(n=t?t.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),e<0||n>t.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&e>=n)return 0;if(r>=i)return-1;if(e>=n)return 1;if(e>>>=0,n>>>=0,r>>>=0,i>>>=0,this===t)return 0;for(var s=i-r,a=n-e,u=Math.min(s,a),h=this.slice(r,i),l=t.slice(e,n),c=0;c<u;++c)if(h[c]!==l[c]){s=h[c],a=l[c];break}return s<a?-1:a<s?1:0},o.prototype.includes=function(t,e,n){return this.indexOf(t,e,n)!==-1},o.prototype.indexOf=function(t,e,n){return b(this,t,e,n,!0)},o.prototype.lastIndexOf=function(t,e,n){return b(this,t,e,n,!1)},o.prototype.write=function(t,e,n,r){if(void 0===e)r="utf8",n=this.length,e=0;else if(void 0===n&&"string"==typeof e)r=e,n=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e>>>=0,isFinite(n)?(n>>>=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-e;if((void 0===n||n>i)&&(n=i),t.length>0&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var o=!1;;)switch(r){case"hex":return _(this,t,e,n);case"utf8":case"utf-8":return E(this,t,e,n);case"ascii":return S(this,t,e,n);case"latin1":case"binary":return T(this,t,e,n);case"base64":return O(this,t,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return x(this,t,e,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},o.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var Q=4096;o.prototype.slice=function(t,e){var n=this.length;t=~~t,e=void 0===e?n:~~e,t<0?(t+=n,t<0&&(t=0)):t>n&&(t=n),e<0?(e+=n,e<0&&(e=0)):e>n&&(e=n),e<t&&(e=t);var r=this.subarray(t,e);return r.__proto__=o.prototype,r},o.prototype.readUIntLE=function(t,e,n){t>>>=0,e>>>=0,n||N(t,e,this.length);for(var r=this[t],i=1,o=0;++o<e&&(i*=256);)r+=this[t+o]*i;return r},o.prototype.readUIntBE=function(t,e,n){t>>>=0,e>>>=0,n||N(t,e,this.length);for(var r=this[t+--e],i=1;e>0&&(i*=256);)r+=this[t+--e]*i;return r},o.prototype.readUInt8=function(t,e){return t>>>=0,e||N(t,1,this.length),this[t]},o.prototype.readUInt16LE=function(t,e){return t>>>=0,e||N(t,2,this.length),this[t]|this[t+1]<<8},o.prototype.readUInt16BE=function(t,e){return t>>>=0,e||N(t,2,this.length),this[t]<<8|this[t+1]},o.prototype.readUInt32LE=function(t,e){return t>>>=0,e||N(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},o.prototype.readUInt32BE=function(t,e){return t>>>=0,e||N(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},o.prototype.readIntLE=function(t,e,n){t>>>=0,e>>>=0,n||N(t,e,this.length);for(var r=this[t],i=1,o=0;++o<e&&(i*=256);)r+=this[t+o]*i;return i*=128,r>=i&&(r-=Math.pow(2,8*e)),r},o.prototype.readIntBE=function(t,e,n){t>>>=0,e>>>=0,n||N(t,e,this.length);for(var r=e,i=1,o=this[t+--r];r>0&&(i*=256);)o+=this[t+--r]*i;return i*=128,o>=i&&(o-=Math.pow(2,8*e)),o},o.prototype.readInt8=function(t,e){return t>>>=0,e||N(t,1,this.length),128&this[t]?(255-this[t]+1)*-1:this[t]},o.prototype.readInt16LE=function(t,e){t>>>=0,e||N(t,2,this.length);var n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},o.prototype.readInt16BE=function(t,e){t>>>=0,e||N(t,2,this.length);var n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},o.prototype.readInt32LE=function(t,e){return t>>>=0,e||N(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},o.prototype.readInt32BE=function(t,e){return t>>>=0,e||N(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},o.prototype.readFloatLE=function(t,e){return t>>>=0,e||N(t,4,this.length),K.read(this,t,!0,23,4)},o.prototype.readFloatBE=function(t,e){return t>>>=0,e||N(t,4,this.length),K.read(this,t,!1,23,4)},o.prototype.readDoubleLE=function(t,e){return t>>>=0,e||N(t,8,this.length),K.read(this,t,!0,52,8)},o.prototype.readDoubleBE=function(t,e){return t>>>=0,e||N(t,8,this.length),K.read(this,t,!1,52,8)},o.prototype.writeUIntLE=function(t,e,n,r){if(t=+t,e>>>=0,n>>>=0,!r){var i=Math.pow(2,8*n)-1;M(this,t,e,n,i,0)}var o=1,s=0;for(this[e]=255&t;++s<n&&(o*=256);)this[e+s]=t/o&255;return e+n},o.prototype.writeUIntBE=function(t,e,n,r){if(t=+t,e>>>=0,n>>>=0,!r){var i=Math.pow(2,8*n)-1;M(this,t,e,n,i,0)}var o=n-1,s=1;for(this[e+o]=255&t;--o>=0&&(s*=256);)this[e+o]=t/s&255;return e+n},o.prototype.writeUInt8=function(t,e,n){return t=+t,e>>>=0,n||M(this,t,e,1,255,0),this[e]=255&t,e+1},o.prototype.writeUInt16LE=function(t,e,n){return t=+t,e>>>=0,n||M(this,t,e,2,65535,0),this[e]=255&t,this[e+1]=t>>>8,e+2},o.prototype.writeUInt16BE=function(t,e,n){return t=+t,e>>>=0,n||M(this,t,e,2,65535,0),this[e]=t>>>8,this[e+1]=255&t,e+2},o.prototype.writeUInt32LE=function(t,e,n){return t=+t,e>>>=0,n||M(this,t,e,4,4294967295,0),this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t,e+4},o.prototype.writeUInt32BE=function(t,e,n){return t=+t,e>>>=0,n||M(this,t,e,4,4294967295,0),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},o.prototype.writeIntLE=function(t,e,n,r){if(t=+t,e>>>=0,!r){var i=Math.pow(2,8*n-1);M(this,t,e,n,i-1,-i)}var o=0,s=1,a=0;for(this[e]=255&t;++o<n&&(s*=256);)t<0&&0===a&&0!==this[e+o-1]&&(a=1),this[e+o]=(t/s>>0)-a&255;return e+n},o.prototype.writeIntBE=function(t,e,n,r){if(t=+t,e>>>=0,!r){var i=Math.pow(2,8*n-1);M(this,t,e,n,i-1,-i)}var o=n-1,s=1,a=0;for(this[e+o]=255&t;--o>=0&&(s*=256);)t<0&&0===a&&0!==this[e+o+1]&&(a=1),this[e+o]=(t/s>>0)-a&255;return e+n},o.prototype.writeInt8=function(t,e,n){return t=+t,e>>>=0,n||M(this,t,e,1,127,-128),t<0&&(t=255+t+1),this[e]=255&t,e+1},o.prototype.writeInt16LE=function(t,e,n){return t=+t,e>>>=0,n||M(this,t,e,2,32767,-32768),this[e]=255&t,this[e+1]=t>>>8,e+2},o.prototype.writeInt16BE=function(t,e,n){return t=+t,e>>>=0,n||M(this,t,e,2,32767,-32768),this[e]=t>>>8,this[e+1]=255&t,e+2},o.prototype.writeInt32LE=function(t,e,n){return t=+t,e>>>=0,n||M(this,t,e,4,2147483647,-2147483648),this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24,e+4},o.prototype.writeInt32BE=function(t,e,n){return t=+t,e>>>=0,n||M(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},o.prototype.writeFloatLE=function(t,e,n){return P(this,t,e,!0,n)},o.prototype.writeFloatBE=function(t,e,n){return P(this,t,e,!1,n)},o.prototype.writeDoubleLE=function(t,e,n){return U(this,t,e,!0,n)},o.prototype.writeDoubleBE=function(t,e,n){return U(this,t,e,!1,n)},o.prototype.copy=function(t,e,n,r){if(!o.isBuffer(t))throw new TypeError("argument should be a Buffer");if(n||(n=0),r||0===r||(r=this.length),e>=t.length&&(e=t.length),e||(e=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),t.length-e<r-n&&(r=t.length-e+n);var i=r-n;if(this===t&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(e,n,r);else if(this===t&&n<e&&e<r)for(var s=i-1;s>=0;--s)t[s+e]=this[s+n];else Uint8Array.prototype.set.call(t,this.subarray(n,r),e);return i},o.prototype.fill=function(t,e,n,r){if("string"==typeof t){if("string"==typeof e?(r=e,e=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!o.isEncoding(r))throw new TypeError("Unknown encoding: "+r);if(1===t.length){var i=t.charCodeAt(0);("utf8"===r&&i<128||"latin1"===r)&&(t=i)}}else"number"==typeof t&&(t=255&t);if(e<0||this.length<e||this.length<n)throw new RangeError("Out of range index");if(n<=e)return this;e>>>=0,n=void 0===n?this.length:n>>>0,t||(t=0);var s;if("number"==typeof t)for(s=e;s<n;++s)this[s]=t;else{var a=o.isBuffer(t)?t:o.from(t,r),u=a.length;if(0===u)throw new TypeError('The value "'+t+'" is invalid for argument "value"');for(s=0;s<n-e;++s)this[s+e]=a[s%u]}return this};var $=/[^+\/0-9A-Za-z-_]/g},{"base64-js":4,ieee754:10}],7:[function(t,e,n){e.exports={100:"Continue",101:"Switching Protocols",102:"Processing",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",207:"Multi-Status",208:"Already Reported",226:"IM Used",300:"Multiple Choices",301:"Moved Permanently",302:"Found",303:"See Other",304:"Not Modified",305:"Use Proxy",307:"Temporary Redirect",308:"Permanent Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Timeout",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Payload Too Large",414:"URI Too Long",415:"Unsupported Media Type",416:"Range Not Satisfiable",417:"Expectation Failed",418:"I'm a teapot",421:"Misdirected Request",422:"Unprocessable Entity",423:"Locked",424:"Failed Dependency",425:"Unordered Collection",426:"Upgrade Required",428:"Precondition Required",429:"Too Many Requests",431:"Request Header Fields Too Large",451:"Unavailable For Legal Reasons",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Timeout",505:"HTTP Version Not Supported",506:"Variant Also Negotiates",507:"Insufficient Storage",508:"Loop Detected",509:"Bandwidth Limit Exceeded",510:"Not Extended",511:"Network Authentication Required"}},{}],8:[function(t,e,n){(function(t){function e(t){return Array.isArray?Array.isArray(t):"[object Array]"===g(t)}function r(t){return"boolean"==typeof t}function i(t){return null===t}function o(t){return null==t}function s(t){return"number"==typeof t}function a(t){return"string"==typeof t}function u(t){return"symbol"==typeof t}function h(t){return void 0===t}function l(t){return"[object RegExp]"===g(t)}function c(t){return"object"==typeof t&&null!==t}function f(t){return"[object Date]"===g(t)}function p(t){return"[object Error]"===g(t)||t instanceof Error}function d(t){return"function"==typeof t}function y(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||"undefined"==typeof t}function g(t){return Object.prototype.toString.call(t)}n.isArray=e,n.isBoolean=r,n.isNull=i,n.isNullOrUndefined=o,n.isNumber=s,n.isString=a,n.isSymbol=u,n.isUndefined=h,n.isRegExp=l,n.isObject=c,n.isDate=f,n.isError=p,n.isFunction=d,n.isPrimitive=y,n.isBuffer=t.isBuffer}).call(this,{isBuffer:t("../../is-buffer/index.js")})},{"../../is-buffer/index.js":30}],9:[function(t,e,n){function r(){this._events&&Object.prototype.hasOwnProperty.call(this,"_events")||(this._events=_(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0}function i(t){return void 0===t._maxListeners?r.defaultMaxListeners:t._maxListeners}function o(t,e,n){if(e)t.call(n);else for(var r=t.length,i=g(t,r),o=0;o<r;++o)i[o].call(n)}function s(t,e,n,r){if(e)t.call(n,r);else for(var i=t.length,o=g(t,i),s=0;s<i;++s)o[s].call(n,r)}function a(t,e,n,r,i){if(e)t.call(n,r,i);else for(var o=t.length,s=g(t,o),a=0;a<o;++a)s[a].call(n,r,i)}function u(t,e,n,r,i,o){if(e)t.call(n,r,i,o);else for(var s=t.length,a=g(t,s),u=0;u<s;++u)a[u].call(n,r,i,o)}function h(t,e,n,r){if(e)t.apply(n,r);else for(var i=t.length,o=g(t,i),s=0;s<i;++s)o[s].apply(n,r)}function l(t,e,n,r){var o,s,a;if("function"!=typeof n)throw new TypeError('"listener" argument must be a function');if(s=t._events,s?(s.newListener&&(t.emit("newListener",e,n.listener?n.listener:n),s=t._events),a=s[e]):(s=t._events=_(null),t._eventsCount=0),a){if("function"==typeof a?a=s[e]=r?[n,a]:[a,n]:r?a.unshift(n):a.push(n),!a.warned&&(o=i(t),o&&o>0&&a.length>o)){a.warned=!0;var u=new Error("Possible EventEmitter memory leak detected. "+a.length+' "'+String(e)+'" listeners added. Use emitter.setMaxListeners() to increase limit.');u.name="MaxListenersExceededWarning",u.emitter=t,u.type=e,u.count=a.length,"object"==typeof console&&console.warn&&console.warn("%s: %s",u.name,u.message)}}else a=s[e]=n,++t._eventsCount;return t}function c(){if(!this.fired)switch(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length){case 0:return this.listener.call(this.target);case 1:return this.listener.call(this.target,arguments[0]);case 2:return this.listener.call(this.target,arguments[0],arguments[1]);case 3:return this.listener.call(this.target,arguments[0],arguments[1],arguments[2]);default:for(var t=new Array(arguments.length),e=0;e<t.length;++e)t[e]=arguments[e];this.listener.apply(this.target,t)}}function f(t,e,n){var r={fired:!1,wrapFn:void 0,target:t,type:e,listener:n},i=S.call(c,r);return i.listener=n,r.wrapFn=i,i}function p(t,e,n){var r=t._events;if(!r)return[];var i=r[e];return i?"function"==typeof i?n?[i.listener||i]:[i]:n?v(i):g(i,i.length):[]}function d(t){var e=this._events;if(e){var n=e[t];if("function"==typeof n)return 1;if(n)return n.length}return 0}function y(t,e){for(var n=e,r=n+1,i=t.length;r<i;n+=1,r+=1)t[n]=t[r];t.pop()}function g(t,e){for(var n=new Array(e),r=0;r<e;++r)n[r]=t[r];return n}function v(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}function m(t){var e=function(){};return e.prototype=t,new e}function b(t){var e=[];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.push(n);return n}function w(t){var e=this;return function(){return e.apply(t,arguments)}}var _=Object.create||m,E=Object.keys||b,S=Function.prototype.bind||w;e.exports=r,r.EventEmitter=r,r.prototype._events=void 0,r.prototype._maxListeners=void 0;var T,O=10;try{var x={};Object.defineProperty&&Object.defineProperty(x,"x",{value:0}),T=0===x.x}catch(R){T=!1}T?Object.defineProperty(r,"defaultMaxListeners",{enumerable:!0,get:function(){return O},set:function(t){if("number"!=typeof t||t<0||t!==t)throw new TypeError('"defaultMaxListeners" must be a positive number');O=t}}):r.defaultMaxListeners=O,r.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||isNaN(t))throw new TypeError('"n" argument must be a positive number');
return this._maxListeners=t,this},r.prototype.getMaxListeners=function(){return i(this)},r.prototype.emit=function(t){var e,n,r,i,l,c,f="error"===t;if(c=this._events)f=f&&null==c.error;else if(!f)return!1;if(f){if(arguments.length>1&&(e=arguments[1]),e instanceof Error)throw e;var p=new Error('Unhandled "error" event. ('+e+")");throw p.context=e,p}if(n=c[t],!n)return!1;var d="function"==typeof n;switch(r=arguments.length){case 1:o(n,d,this);break;case 2:s(n,d,this,arguments[1]);break;case 3:a(n,d,this,arguments[1],arguments[2]);break;case 4:u(n,d,this,arguments[1],arguments[2],arguments[3]);break;default:for(i=new Array(r-1),l=1;l<r;l++)i[l-1]=arguments[l];h(n,d,this,i)}return!0},r.prototype.addListener=function(t,e){return l(this,t,e,!1)},r.prototype.on=r.prototype.addListener,r.prototype.prependListener=function(t,e){return l(this,t,e,!0)},r.prototype.once=function(t,e){if("function"!=typeof e)throw new TypeError('"listener" argument must be a function');return this.on(t,f(this,t,e)),this},r.prototype.prependOnceListener=function(t,e){if("function"!=typeof e)throw new TypeError('"listener" argument must be a function');return this.prependListener(t,f(this,t,e)),this},r.prototype.removeListener=function(t,e){var n,r,i,o,s;if("function"!=typeof e)throw new TypeError('"listener" argument must be a function');if(r=this._events,!r)return this;if(n=r[t],!n)return this;if(n===e||n.listener===e)0===--this._eventsCount?this._events=_(null):(delete r[t],r.removeListener&&this.emit("removeListener",t,n.listener||e));else if("function"!=typeof n){for(i=-1,o=n.length-1;o>=0;o--)if(n[o]===e||n[o].listener===e){s=n[o].listener,i=o;break}if(i<0)return this;0===i?n.shift():y(n,i),1===n.length&&(r[t]=n[0]),r.removeListener&&this.emit("removeListener",t,s||e)}return this},r.prototype.removeAllListeners=function(t){var e,n,r;if(n=this._events,!n)return this;if(!n.removeListener)return 0===arguments.length?(this._events=_(null),this._eventsCount=0):n[t]&&(0===--this._eventsCount?this._events=_(null):delete n[t]),this;if(0===arguments.length){var i,o=E(n);for(r=0;r<o.length;++r)i=o[r],"removeListener"!==i&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=_(null),this._eventsCount=0,this}if(e=n[t],"function"==typeof e)this.removeListener(t,e);else if(e)for(r=e.length-1;r>=0;r--)this.removeListener(t,e[r]);return this},r.prototype.listeners=function(t){return p(this,t,!0)},r.prototype.rawListeners=function(t){return p(this,t,!1)},r.listenerCount=function(t,e){return"function"==typeof t.listenerCount?t.listenerCount(e):d.call(t,e)},r.prototype.listenerCount=d,r.prototype.eventNames=function(){return this._eventsCount>0?Reflect.ownKeys(this._events):[]}},{}],10:[function(t,e,n){n.read=function(t,e,n,r,i){var o,s,a=8*i-r-1,u=(1<<a)-1,h=u>>1,l=-7,c=n?i-1:0,f=n?-1:1,p=t[e+c];for(c+=f,o=p&(1<<-l)-1,p>>=-l,l+=a;l>0;o=256*o+t[e+c],c+=f,l-=8);for(s=o&(1<<-l)-1,o>>=-l,l+=r;l>0;s=256*s+t[e+c],c+=f,l-=8);if(0===o)o=1-h;else{if(o===u)return s?NaN:(p?-1:1)*(1/0);s+=Math.pow(2,r),o-=h}return(p?-1:1)*s*Math.pow(2,o-r)},n.write=function(t,e,n,r,i,o){var s,a,u,h=8*o-i-1,l=(1<<h)-1,c=l>>1,f=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=r?0:o-1,d=r?1:-1,y=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,s=l):(s=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-s))<1&&(s--,u*=2),e+=s+c>=1?f/u:f*Math.pow(2,1-c),e*u>=2&&(s++,u/=2),s+c>=l?(a=0,s=l):s+c>=1?(a=(e*u-1)*Math.pow(2,i),s+=c):(a=e*Math.pow(2,c-1)*Math.pow(2,i),s=0));i>=8;t[n+p]=255&a,p+=d,a/=256,i-=8);for(s=s<<i|a,h+=i;h>0;t[n+p]=255&s,p+=d,s/=256,h-=8);t[n+p-d]|=128*y}},{}],11:[function(t,e,n){(function(){n.ACCEPT_HEADER={xml:"application/xml",json:"application/json",tsv:"text/tab-separated-values",tab:"text/tab-separated-values",csv:"text/comma-separated-values",fasta:"text/x-fasta",gff3:"text/x-gff3",bed:"text/x-bed",objects:"application/json;type=objects",jsonobjects:"application/json;type=objects",jsontable:"application/json;type=table",jsonrows:"application/json;type=rows",jsoncount:"application/json;type=count",jsonp:"application/javascript",jsonpobjects:"application/javascript;type=objects",jsonptable:"application/javascript;type=table",jsonprows:"application/javascript;type=rows",jsonpcount:"application/javascript;type=count"}}).call(this)},{}],12:[function(t,e,n){(function(){var e,r,i,o,s,a,u,h,l,c,f,p,d,y,g,v,m,b,w;o=t("url"),r=t("JSONStream"),p=t("http"),e=t("./constants").ACCEPT_HEADER,u=t("./version").VERSION,w=b=t("./util"),c=w.error,l=w.defer,y=w.merge,d=w.invoke,a="node-http/imjs-"+u,i=/,\s*$/,s="application/x-www-form-urlencoded",n.supports=function(){return!0},m=function(t,e,n){return function(t){var i,o;return null==t.pipe?n(new Error("response is not a stream")):(t.on("error",n),null!=t.statusCode&&200!==t.statusCode?(i=r.parse("error"),i.pause(),t.pipe(i),n([t.statusCode,i])):(o=r.parse("results.*"),o.pause(),t.pipe(o),e(o)))}},f=function(t,e,n,r){var i,o;return i=t.type,o=t.url,"Could not parse response to "+i+" "+o+': "'+e+'" ('+r+": "+n+")"},h=function(t,e,n){return function(r){var i;return i="",r.on("data",function(t){return i+=t}),r.on("error",n),r.on("end",function(){var o,s,a,u,h,l,c;if(null!=(null!=r?r.headers:void 0)&&(o=r.headers["content-type"]),"application/json"!==o&&!/json/.test(t.dataType)&&!/json/.test(t.data.format))return(h=i.match(/\[ERROR\] (\d+)([\s\S]*)/))?n(new Error(h[2])):(u=200<=(c=r.statusCode)&&c<400?e:n)(i);if(""===i&&200===r.statusCode)return e();try{return l=JSON.parse(i),(a=l.error)?n(new Error(a)):e(l)}catch(p){return s=p,n(r.statusCode>=400?new Error(r.statusCode):new Error(f(t,i,s,r.statusCode)))}})}},n.iterReq=function(t,e,n){return function(r,i,o,s,a){var u,h,l,f,p;return null==i&&(i={}),null==o&&(o=function(){}),null==s&&(s=function(){}),null==a&&(a=function(){}),b.isFunction(i)&&(p=[{},i,o,s],i=p[0],o=p[1],s=p[2],a=p[3]),f=y({format:n},i,{query:r.toXML()}),u=function(t){return t.on("data",o),t.on("error",s),t.on("end",a),setTimeout(function(){if(null!=t.resume)return t.resume()},3),t},l=function(t){var e,n;return n=t[0],e=t[1],e.on("data",s),e.on("error",s),e.on("end",a),null!=e.resume&&e.resume(),c(n)},h=this.makeRequest(t,e,f,null,!0),h.then(u,l),h}},v=function(t,e,n){var r;return r=setTimeout(function(){return e("Request timed out.")},t),n.then(function(){return cancelTimeout(r)})},g=function(t){var n,r,i,u,h,l,c,f;if(!t.url)throw new Error("No url provided in "+JSON.stringify(t));if("string"==typeof t.data){if(i=t.data,"GET"===(l=t.type)||"DELETE"===l)throw new Error("Invalid request. "+t.type+" requests must not have bodies")}else i=b.querystring(t.data);if(r=o.parse(t.url,!0),r.withCredentials=!1,r.method=t.type||"GET",null!=t.port&&(r.port=t.port),r.headers={"User-Agent":a,Accept:e[t.dataType]},("GET"===(c=r.method)||"DELETE"===c)&&(null!=i?i.length:void 0)?(u=/\?/.test(r.path)?"&":"?",r.path+=u+i,i=null):(r.headers["Content-Type"]=(t.contentType||s)+"; charset=UTF-8",r.headers["Content-Length"]=i.length),null!=t.headers){f=t.headers;for(n in f)h=f[n],r.headers[n]=h}return null!=t.auth&&(r.auth=t.auth),[r,i]},n.doReq=function(t,e){var n,r,i,o,s,a,u,c,f,d,y;d=l(),o=d.promise,u=d.resolve,s=d.reject,o.then(null,t.error);try{y=g(t),f=y[0],i=y[1],r=(e?m:h)(t,u,s),a=p.request(f,r),a.on("error",function(e){return s(new Error("Error: "+f.method+" "+t.url+": "+e))}),null!=i&&a.write(i),a.end(),c=t.timeout,c>0&&v(c,s,o)}catch(b){n=b,s(n)}return o}}).call(this)},{"./constants":11,"./util":23,"./version":24,JSONStream:26,http:53,url:61}],13:[function(t,e,n){(function(){var e,r,i,o,s,a,u,h,l,c,f,p,d,y,g={}.hasOwnProperty,v=[].indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1},m=function(t,e){return function(){return t.apply(e,arguments)}};l=t("./util"),p=n,d=l.uniqBy,u=l.difference,a=l.defer,y=l.withCB,f=l.id,c=l.get,h=l.fold,s=l.concatMap,o=6e4,e=function(){function t(t){var e,n;for(e in t)g.call(t,e)&&(n=t[e],this[e]=n)}var e;return t.prototype.getStats=function(t){return null!=t?this.stats[t]:this.stats},e=s(c("matches")),t.prototype.getMatches=function(t){var n;return"MATCH"===t?this.matches[t]:null!=(n=e(this.matches[t]))?n:[]},t.prototype.getMatchIds=function(t){return null!=t?this.getMatches(t).map(c("id")):this.allMatchIds()},t.prototype.goodMatchIds=function(){return this.getMatchIds("MATCH")},t.prototype.allMatchIds=function(){var t;return(t=h(function(t){return function(e,n){return e.concat(t.getMatchIds(n))}}(this)))(this.goodMatchIds(),["DUPLICATE","WILDCARD","TYPE_CONVERTED","OTHER"])},t}(),i=function(){function t(t){var e,n;for(e in t)g.call(t,e)&&(n=t[e],this[e]=n)}var e,n,r,i;return i=d(f),e=s(f),n=function(t){var n,r;return e(function(){var e,i;e=t.identifiers,i=[];for(n in e)r=e[n],i.push(r);return i}())},r=function(t,e){return null==e||v.call(n(t),e)>=0},t.prototype.getStats=function(t){switch(t){case"objects":return this.getObjectStats();case"identifiers":return this.getIdentifierStats();default:return{objects:this.getObjectStats(),identifiers:this.getIdentifierStats()}}},t.prototype.getIdentifierStats=function(){var t,n,r,o,s,a;return a=function(t){var n,r;return i(e(function(){var e,i,o;for(o=[],e=0,i=t.length;e<i;e++)r=t[e],o.push(function(){var t;t=[];for(n in null!=r?r.identifiers:void 0)t.push(n);return t}());return o}()))},o=a(this.getMatches("MATCH")),n=a(this.getMatches()),s=o.length,t=n.length,r=u(n,o).length,{matches:s,all:t,issues:r}},t.prototype.getObjectStats=function(){var t,e,r,i;return i=this.goodMatchIds().length,t=this.allMatchIds().length,e=function(){var t;t=[];for(f in this)g.call(this,f)&&(r=this[f],v.call(n(r),"MATCH")<0&&t.push(f));return t}.call(this).length,{matches:i,all:t,issues:e}},t.prototype.getMatches=function(t){var e,n;n=[];for(f in this)g.call(this,f)&&(e=this[f],r(e,t)&&n.push(e));return n},t.prototype.getMatchIds=function(t){var e,n;n=[];for(f in this)g.call(this,f)&&(e=this[f],r(e,t)&&n.push(f));return n},t.prototype.goodMatchIds=function(){return this.getMatchIds("MATCH")},t.prototype.allMatchIds=function(){return this.getMatchIds()},t}(),r=function(){function t(t,e){this.uid=t,this.service=e,this.del=m(this.del,this),this.fetchResults=m(this.fetchResults,this),this.fetchErrorMessage=m(this.fetchErrorMessage,this),this.fetchStatus=m(this.fetchStatus,this)}return t.prototype.fetchStatus=function(t){return y(t,this.service.get("ids/"+this.uid+"/status").then(c("status")))},t.prototype.fetchErrorMessage=function(t){return y(t,this.service.get("ids/"+this.uid+"/status").then(c("message")))},t.prototype.fetchResults=function(t){var n,r;return n=this.service.get("ids/"+this.uid+"/result").then(c("results")),r=this.service.fetchVersion(),r.then(function(t){return n.then(function(n){return t>=16?new e(n):new i(n)})})},t.prototype.del=function(t){return y(t,this.service.makeRequest("DELETE","ids/"+this.uid))},t.prototype.decay=50,t.prototype.poll=function(t,e,n){var r,i,s,u,h,l,c;return c=a(),s=c.promise,h=c.resolve,u=c.reject,s.then(t,e),i=null!=n?n:function(){},l=this.fetchStatus(),l.then(null,u),r=this.decay,this.decay=Math.min(o,1.25*r),l.then(function(t){return function(e){switch(i(e),e){case"SUCCESS":return t.fetchResults().then(h,u);case"ERROR":return t.fetchErrorMessage().then(u,u);default:return setTimeout(function(){return t.poll(h,u,i)},r)}}}(this)),s},t}(),r.prototype.wait=r.prototype.poll,r.create=function(t){return function(e){return new r(e,t)}},p.IDResolutionJob=r,p.CategoryResults=e,p.IdResults=i}).call(this)},{"./util":23}],14:[function(t,e,n){(function(){var e,r,i,o,s,a,u,h,l,c,f,p,d,y,g,v=function(t,e){return function(){return t.apply(e,arguments)}},m={}.hasOwnProperty,b=[].indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1};y=t("./util"),l=n,p=y.merge,g=y.withCB,u=y.get,c=y.invoke,i=y.REQUIRES_VERSION,d=y.set,a=y.dejoin,s="list/tags",o="lists/shares",e="lists/invitations",f=function(t){return"__folder__"===t.substr(0,t.indexOf(":"))},h=function(t){return t.substr(t.indexOf(":")+1)},r=function(){function t(t,e){var n,r;this.service=e,this._updateTags=v(this._updateTags,this),this.hasTag=v(this.hasTag,this);for(n in t)m.call(t,n)&&(r=t[n],this[n]=r);this.dateCreated=null!=this.dateCreated?new Date(this.dateCreated):null,this.folders=this.tags.filter(f).map(h)}var n;return t.prototype.hasTag=function(t){return b.call(this.tags,t)>=0},t.prototype.query=function(t){return null==t&&(t=["*"]),this.service.query({select:t,from:this.type,where:[[this.type,"IN",this.name]]})},t.prototype.del=function(t){return this.service.makeRequest("DELETE","lists",{name:this.name},t)},n=function(t){var e;return e=t.tags},t.prototype._updateTags=function(t,e){if(null==t)return this.tags=e.slice(),this.folders=this.tags.filter(f).map(h)},t.prototype.fetchTags=function(t){return g(this._updateTags,t,this.service.makeRequest("GET","list/tags",{name:this.name}).then(n))},t.prototype.addTags=function(t,e){var r;return r={name:this.name,tags:t},g(this._updateTags,e,this.service.makeRequest("POST","list/tags",r).then(n))},t.prototype.removeTags=function(t,e){var r;return r={name:this.name,tags:t},g(this._updateTags,e,this.service.makeRequest("DELETE","list/tags",r).then(n))},t.prototype.contents=function(t){return g(t,this.query().then(a).then(c("records")))},t.prototype.rename=function(t,e){var n;return n=this.service.post("lists/rename",{oldname:this.name,newname:t}).then(u("listName")).then(function(t){return function(e){return t.name=e}}(this)).then(this.service.fetchList),g(e,n)},t.prototype.copy=function(t,e){var n,r,i,o,s,a,h;return null==t&&(t={}),null==e&&(e=function(){}),1===arguments.length&&y.isFunction(t)&&(s=[{},t],t=s[0],e=s[1]),"string"==typeof t&&(t={name:t}),r=n=null!=(a=t.name)?a:""+this.name+"_copy",o=this.tags.concat(null!=(h=t.tags)?h:[]),i=this.query(["id"]),g(e,this.service.fetchLists().then(c("map",u("name"))).then(function(t){return function(e){var s;for(s=1;b.call(e,r)>=0;)r=""+n+"-"+s++;return i.then(c("saveAsList",{name:r,tags:o,description:t.description}))}}(this)))},t.prototype.enrichment=function(t,e){return this.service.enrichment(p({list:this.name},t),e)},t.prototype.shareWithUser=function(t,e){return g(e,this.service.post(o,{list:this.name,"with":t}))},t.prototype.inviteUserToShare=function(t,n,r){return null==n&&(n=!0),null==r&&(r=function(){}),g(r,this.service.post(e,{list:this.name,to:t,notify:!!n}))},t}(),l.List=r}).call(this)},{"./util":23}],15:[function(t,e,n){(function(){var e,r,i,o,s,a,u,h,l,c,f=function(t,e){return function(){return t.apply(e,arguments)}},p=[].indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1};o=t("./table").Table,i=t("./path").PathInfo,c=t("./util"),u=c.flatten,a=c.find,s=c.error,l=c.omap,h=n,e=new o({name:"Object",tags:[],displayName:"Object",attributes:{},references:{},collections:{}}),r=function(){function t(t){var n,r;this.name=t.name,n=t.classes,this.findCommonType=f(this.findCommonType,this),this.findSharedAncestor=f(this.findSharedAncestor,this),this.getAncestorsOf=f(this.getAncestorsOf,this),this.getSubclassesOf=f(this.getSubclassesOf,this),this.getPathInfo=f(this.getPathInfo,this),r=l(function(t){return function(e,n){return[e,new o(n,t)]}}(this)),this.classes=r(n),this.classes["java.lang.Object"]=e}return t.prototype.getPathInfo=function(t,e){return i.parse(this,t,e)},t.prototype.getSubclassesOf=function(t){var e,n,r,i,o,s;if(n=t&&t.name?t:this.classes[t],null==n)throw new Error(""+t+" is not a table");r=[n.name],o=this.classes;for(i in o)e=o[i],s=n.name,p.call(e.parents(),s)>=0&&(r=r.concat(this.getSubclassesOf(e)));return r},t.prototype.getAncestorsOf=function(t){var e,n;if(e=t&&t.name?t:this.classes[t],null==e)throw new Error(""+t+" is not a table");return n=e.parents(),n.filter(function(t){return function(e){return t.classes[e]}}(this)).reduce(function(t){return function(e,n){return e.concat(t.getAncestorsOf(n))}}(this),n)},t.prototype.findSharedAncestor=function(t,e){var n,r,i;return null===e||null===t?null:t===e?t:(n=this.getAncestorsOf(t),p.call(n,e)>=0?e:(r=this.getAncestorsOf(e),p.call(r,t)>=0?t:i=a(n,function(t){return p.call(r,t)>=0})))},t.prototype.findCommonType=function(t){return null==t&&(t=[]),t.reduce(this.findSharedAncestor)},t}(),r.prototype.makePath=r.prototype.getPathInfo,r.prototype.findCommonTypeOfMultipleClasses=r.prototype.findCommonType,r.load=function(t){var e;try{return new r(t)}catch(n){throw e=n,new Error("Error loading model: "+e)}},r.INTEGRAL_TYPES=["int","Integer","long","Long"],r.FRACTIONAL_TYPES=["double","Double","float","Float"],r.NUMERIC_TYPES=r.INTEGRAL_TYPES.concat(r.FRACTIONAL_TYPES),r.BOOLEAN_TYPES=["boolean","Boolean"],h.Model=r}).call(this)},{"./path":16,"./table":21,"./util":23}],16:[function(t,e,n){(function(){var e,r,i,o,s,a,u,h,l,c,f,p,d,y,g=function(t,e){return function(){return t.apply(e,arguments)}},v=[].slice,m=[].indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1};l=n,d=t("./util"),y=d.withCB,s=d.concatMap,h=d.get,o=d.any,f=d.set,a=d.copy,p=d.success,u=d.error,e={},r={},c=function(t,e,n){var r,i,o;return""+(null!=t?t.name:void 0)+"|"+(null!=t&&null!=(o=t.service)?o.root:void 0)+"|"+e+":"+function(){var t;t=[];for(r in n)i=n[r],t.push(""+r+"="+i);return t}()},i=function(){function t(t){var e,n;this.root=t.root,this.model=t.model,this.descriptors=t.descriptors,this.subclasses=t.subclasses,this.displayName=t.displayName,this.ident=t.ident,this.allDescriptors=g(this.allDescriptors,this),this.getChildNodes=g(this.getChildNodes,this),this.getDisplayName=g(this.getDisplayName,this),this.isa=g(this.isa,this),this.append=g(this.append,this),this.getParent=g(this.getParent,this),this.getEndClass=g(this.getEndClass,this),this.containsCollection=g(this.containsCollection,this),this.isCollection=g(this.isCollection,this),this.isReverseReference=g(this.isReverseReference,this),this.isReference=g(this.isReference,this),this.isClass=g(this.isClass,this),this.isAttribute=g(this.isAttribute,this),this.isRoot=g(this.isRoot,this),n=this.descriptors,this.mid=2<=n.length?v.call(n,0,e=n.length-1):(e=0,[]),this.end=n[e++],null==this.ident&&(this.ident=c(this.model,this,this.subclasses))}return t.prototype.isRoot=function(){return 0===this.descriptors.length},t.prototype.isAttribute=function(){return null!=this.end&&!this.isReference()},t.prototype.isClass=function(){return this.isRoot()||this.isReference()},t.prototype.isReference=function(){var t;return null!=(null!=(t=this.end)?t.referencedType:void 0)},t.prototype.isReverseReference=function(){var t,e,n,r,i;return!!(this.isReference()&&this.mid.length>0)&&(i=this.end,r=i.reverseReference,n=i.referencedType,e=this.getParent(),t=e.getParent(),null!=n&&t.isa(n)&&e.end.name===r)},t.prototype.isCollection=function(){var t,e;return null!=(t=null!=(e=this.end)?e.isCollection:void 0)&&t},t.prototype.containsCollection=function(){return o(this.descriptors,function(t){return t.isCollection})},t.prototype.getEndClass=function(){var t;return this.model.classes[this.subclasses[this.toString()]||(null!=(t=this.end)?t.referencedType:void 0)]||this.root},t.prototype.getParent=function(){var e;if(this.isRoot())throw new Error("Root paths do not have parents");return e={root:this.root,model:this.model,descriptors:this.mid.slice(),subclasses:this.subclasses},new t(e)},t.prototype.append=function(e){var n,r;if(this.isAttribute())throw new Error(""+this+" is an attribute.");if(r="string"==typeof e?this.getType().fields[e]:e,null==r)throw new Error(""+e+" is not a field of "+this.getType());return n={root:this.root,model:this.model,descriptors:this.descriptors.concat([r]),subclasses:this.subclasses},new t(n)},t.prototype.isa=function(t){var e,n;return null!=t&&(this.isAttribute()?this.getType()===t:(e=t.name?t.name:""+t,n=this.getType(),e===n.name||m.call(this.model.getAncestorsOf(n),e)>=0))},t.prototype.getDisplayName=function(t){var n,r,i,o;return(r=this.displayName)?p(r):(null==this.namePromise&&(this.namePromise=(n=e[this.ident])?p(n):this.isRoot()&&this.root.displayName?p(this.root.displayName):null==this.model.service?u("No service"):(o="model"+s(function(t){return"/"+t.name})(this.allDescriptors()),i=f({format:"json"})(a(this.subclasses)),this.model.service.get(o,i).then(h("display")).then(function(t){return function(n){var r;return null!=e[r=t.ident]?e[r]:e[r]=n}}(this)))),y(t,this.namePromise))},t.prototype.getChildNodes=function(){var t,e,n,r,i;r=(null!=(n=this.getEndClass())?n.fields:void 0)||{},i=[];for(e in r)t=r[e],i.push(this.append(t));return i},t.prototype.allDescriptors=function(){return[this.root].concat(this.descriptors)},t.prototype.toString=function(){return this.allDescriptors().map(h("name")).join(".")},t.prototype.equals=function(t){return this===t||this.ident&&(null!=t?t.ident:void 0)===this.ident},t.prototype.getType=function(){var t,e;return(null!=(t=this.end)&&null!=(e=t.type)?e.replace(/java\.lang\./,""):void 0)||this.getEndClass()},t}(),i.prototype.toPathString=i.prototype.toString,i.parse=function(t,e,n){var o,s,a,u,h,l,f,p,d;return null==n&&(n={}),h=c(t,e,n),(o=r[h])?o:(p=(e+"").split("."),d=s=t.classes[p.shift()],l=d.name,a=function(){var r,i,o,a;for(a=[],r=0,i=p.length;r<i;r++){if(f=p[r],u=(null!=s?s.fields[f]:void 0)||(null!=(o=s=t.classes[n[l]])?o.fields[f]:void 0),!u)throw new Error("Could not find "+f+" in "+s+" when parsing "+e);l+="."+f,s=t.classes[u.type||u.referencedType],a.push(u)}return a}(),r[h]=new i({root:d,model:t,descriptors:a,subclasses:n,ident:h}))},i.flushCache=function(){return r={},e={}},l.PathInfo=i}).call(this)},{"./util":23}],17:[function(t,e,n){(function(){var n;n=t("es6-promise").Promise,e.exports=n}).call(this)},{"es6-promise":27}],18:[function(t,e,n){(function(){var e,r,i,o,s,a,u,h,l,c,f,p,d,y,g,v,m,b,w,_,E,S,T,O,x,R,k,L,C,A,j,I,N,M,q,P,U,B,D,F,V,H,W,X,G,J,z,K,Y,Q,$,Z=[].indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1},tt=function(t,e){return function(){return t.apply(e,arguments)}},et=[].slice,nt={}.hasOwnProperty;i=t("backbone-events-standalone"),R=n,R.xml=t("./xml"),W=t("./util"),a=W.REQUIRES_VERSION,X=W.withCB,A=W.merge,w=W.filter,q=W.partition,_=W.fold,y=W.concatMap,O=W.id,E=W.get,C=W.invoke,F=W.querystring,S=function(t){var e;if(e=null!=(null!=t?t.toLowerCase:void 0)?s.OP_DICT[t.toLowerCase()]:null,!e)throw new Error("Illegal constraint operator: "+t);return e},e=["path","op","code"],h=e.concat(["value","extraValue"]),u=["rowByRow","eachRow","recordByRecord","eachRecord","records","rows","table","tableRows","values"],o=function(t){return W.compose(t.fetchList,E("listName"))},r=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],v=function(t){return null==t&&(t=""),t.substr(t.indexOf("."))},d=function(t){return null!=t?"<value>"+W.escape(t)+"</value>":"<nullValue/>"},c=function(t,e){var n,r;return function(){var i;i=[];for(n in t)r=t[n],Z.call(e,n)>=0&&i.push(""+n+'="'+W.escape(r)+'" ');return i}().join("")},M=function(t){return"<constraint "+c(t,e)+"/>"},V=function(t){return"<constraint "+c(t,["path","type"])+"/>"},U=function(t){return"<constraint "+c(t,h)+"/>"},I=function(t){return"<constraint "+c(t,e)+">"+y(d)(t.values)+"</constraint>"},x=function(t){return"<constraint "+c(t,e)+'ids="'+t.ids.join(",")+'"/>'},f=function(t){var e;return null!=t.values?I(t):null!=t.ids?x(t):null==t.op?V(t):(e=t.op,Z.call(s.NULL_OPS,e)>=0?M(t):U(t))},T=function(t){return t.replace(/^[^\.]+\./,"")},g=function(t){var e,n,r,i,o,s,a,u,h,l,c;return s=t.path,h=t.type,o=t.op,l=t.value,c=t.values,r=t.extraValue,i=t.ids,e=t.code,n=t.editable,u=t.switched,a=t.switchable,i=null!=i?i.slice():void 0,c=null!=c?c.slice():void 0,N({path:s,type:h,op:o,value:l,values:c,extraValue:r,ids:i,code:e,editable:n,switched:u,switchable:a})},p=function(t){var e;return e=g(t),e.path=T(e.path),e},N=function(t){var e,n;for(e in t)n=t[e],null==n&&delete t[e];return t},m=function(t,e){return"Did not remove a single constraint. original = "+t+", reduced = "+e},L=function(t,e){var n,r,i,o,a,u,h;if(n={path:t},null===e)n.op="IS NULL";else if(W.isArray(e))n.op="ONE OF",n.values=e;else if("string"==(u=typeof e)||"number"===u||"boolean"===u)h="function"==typeof e.toUpperCase?e.toUpperCase():void 0,Z.call(s.NULL_OPS,h)>=0?n.op=e:(n.op="=",n.value=e);else if(i=function(){var t;t=[];for(r in e)a=e[r],t.push(r);return t}(),Z.call(i,"isa")>=0)W.isArray(e.isa)?(n.op=r,n.values=e.isa):n.type=e.isa;else{Z.call(i,"extraValue")>=0&&(n.extraValue=e.extraValue);for(r in e)o=e[r],"extraValue"!==r&&(n.op=r,W.isArray(o)?n.values=o:n.value=o)}return n},k=function(t){var e,n,r,i;return t=t.slice(),n={path:t.shift()},1===t.length?(e=t[0],i="function"==typeof e.toUpperCase?e.toUpperCase():void 0,Z.call(s.NULL_OPS,i)>=0?n.op=e:n.type=e):t.length>=2&&(n.op=t[0],r=t[1],W.isArray(r)?n.values=r:n.value=r,3===t.length&&(n.extraValue=t[2])),n},D=function(t){var e;return function(){var n,r,i;for(i=[],n=0,r=t.length;n<r;n++)e=t[n],i.push(""+e.path+" "+e.direction);return i}().join(" ")},B=function(t){var e,n,r,i,o,s,a;if(null==t)return[];for(n=t.split(/\s+/),r=function(){var t,e,r;for(r=[],i=t=0,e=n.length/2;0<=e?t<e:t>e;i=0<=e?++t:--t)r.push(2*i);return r}(),a=[],o=0,s=r.length;o<s;o++)e=r[o],a.push([n[e],n[e+1]]);return a},P=function(){var t,e;if(e=this.sortOrder,this.sortOrder=function(){var n,r,i;for(i=[],n=0,r=e.length;n<r;n++)t=e[n],this.isRelevant(t.path)&&i.push(t);return i}.call(this),e.length!==this.sortOrder.length)return this.trigger("change:sortorder change:orderby",this.sortOrder.slice())},s=function(){function t(t,e,n){var r,i,o,s,a,u,h,l,c,f,p,d,y,g,v,m;for(u=null!=n?n:{},r=u.model,o=u.summaryFields,this.addConstraint=tt(this.addConstraint,this),this.expandStar=tt(this.expandStar,this),this.adjustPath=tt(this.adjustPath,this),this.select=tt(this.select,this),null==t&&(t={}),this.constraints=[],this.views=[],this.joins={},this.displayNames=W.copy(null!=(h=null!=(c=t.displayNames)?c:t.aliases)?h:{}),f=["name","title","comment","description","type"],s=0,a=f.length;s<a;s++)i=f[s],null!=t[i]&&(this[i]=t[i]);this.service=null!=e?e:{},this.model=null!=(p=null!=r?r:t.model)?p:{},this.summaryFields=null!=(d=null!=o?o:t.summaryFields)?d:{},this.root=null!=(y=t.root)?y:t.from,this.maxRows=null!=(g=null!=(v=t.size)?v:t.limit)?g:t.maxRows,this.start=null!=(m=null!=(l=t.start)?l:t.offset)?m:0,this.select(t.views||t.view||t.select||[]),this.addConstraints(t.constraints||t.where||[]),this.addJoins(t.joins||t.join||[]),this.orderBy(t.sortOrder||t.orderBy||[]),null!=t.constraintLogic&&(this.constraintLogic=t.constraintLogic),this.on("change:views",P,this)}var e,n,i,s,u,h,l,d,b;return t.JOIN_STYLES=["INNER","OUTER"],t.BIO_FORMATS=["gff3","fasta","bed"],t.NULL_OPS=["IS NULL","IS NOT NULL"],t.ATTRIBUTE_VALUE_OPS=["=","!=",">",">=","<","<=","CONTAINS","LIKE","NOT LIKE"],t.MULTIVALUE_OPS=["ONE OF","NONE OF"],t.RANGE_OPS=["OVERLAPS","DOES NOT OVERLAP","OUTSIDE","WITHIN","CONTAINS","DOES NOT CONTAIN"],t.TERNARY_OPS=["LOOKUP"],t.LOOP_OPS=["=","!="],t.LIST_OPS=["IN","NOT IN"],t.OP_DICT={"=":"=","==":"==",eq:"=",eqq:"==","!=":"!=",ne:"!=",">":">",gt:">",">=":">=",ge:">=","<":"<",lt:"<","<=":"<=",le:"<=",contains:"CONTAINS",CONTAINS:"CONTAINS","does not contain":"DOES NOT CONTAIN","DOES NOT CONTAIN":"DOES NOT CONTAIN",like:"LIKE",LIKE:"LIKE","not like":"NOT LIKE","NOT LIKE":"NOT LIKE",lookup:"LOOKUP","IS NULL":"IS NULL","is null":"IS NULL","IS NOT NULL":"IS NOT NULL","is not null":"IS NOT NULL","ONE OF":"ONE OF","one of":"ONE OF","NONE OF":"NONE OF","none of":"NONE OF","in":"IN","not in":"NOT IN",IN:"IN","NOT IN":"NOT IN",WITHIN:"WITHIN",within:"WITHIN",OVERLAPS:"OVERLAPS",overlaps:"OVERLAPS","DOES NOT OVERLAP":"DOES NOT OVERLAP","does not overlap":"DOES NOT OVERLAP",OUTSIDE:"OUTSIDE",outside:"OUTSIDE",ISA:"ISA",isa:"ISA"},u=["name","view","sortOrder","constraintLogic","title","description","comment"],n=["path","type","op","code","value","ids"],l=function(t,e){var n,r,i,o;for(o=[],r=0,i=e.length;r<i;r++)n=e[r],t.hasAttribute(n)&&o.push([n,t.getAttribute(n)]);return o},i=function(t,e){var n,r,i,o,s;for(o=t.getElementsByTagName(e),s=[],r=0,i=o.length;r<i;r++)n=o[r],s.push(n);return s},b=function(t){return function(e){return e.getAttribute(t)}},t.fromXML=function(t){var e,r,o,s,a,h,c;if(r=R.xml.parse(t),h=i(r,"query")[0]||i(r,"template")[0],!h)throw new Error("no query in xml");return s=b("path"),c=b("style"),a=W.pairsToObj(l(h,u)),a.view=a.view.split(/\s+/),a.sortOrder=B(a.sortOrder),a.joins=function(){var t,e,n,r;for(n=i(h,"join"),r=[],t=0,e=n.length;t<e;t++)o=n[t],"OUTER"===c(o)&&r.push(s(o));return r}(),a.constraints=function(){var t,r,o,s;for(o=i(h,"constraint"),s=[],t=0,r=o.length;t<r;t++)e=o[t],s.push(function(t){var e,r,o,s,a;return e=W.pairsToObj(l(t,n)),null!=e.ids&&(e.ids=function(){var t,n,r,i;for(r=e.ids.split(","),i=[],t=0,n=r.length;t<n;t++)a=r[t],i.push(parseInt(a,10));return i}()),s=i(t,"value"),s.length&&(e.values=function(){var t,e,n;for(n=[],t=0,e=s.length;t<e;t++)o=s[t],n.push(function(){var t,e,n,i;for(n=o.childNodes,i=[],t=0,e=n.length;t<e;t++)r=n[t],i.push(r.data);return i}().join(""));return n}()),e}(e));return s}(),a},t.prototype.constraints=[],t.prototype.views=[],t.prototype.joins={},t.prototype.constraintLogic="",t.prototype.sortOrder="",t.prototype.name=null,t.prototype.title=null,t.prototype.comment=null,t.prototype.description=null,t.prototype.removeFromSelect=function(t){var e,n,r,i;return null==t&&(t=[]),t=W.stringList(t),e=W.compose(this.expandStar,this.adjustPath),t=W.flatten(function(){var n,i,o;for(o=[],n=0,i=t.length;n<i;n++)r=t[n],o.push(e(r));return o}()),this.sortOrder=function(){var e,r,i,o,s;for(i=this.sortOrder,s=[],e=0,r=i.length;e<r;e++)n=i[e],o=n.path,Z.call(t,o)>=0||s.push(n);return s}.call(this),this.views=function(){var e,n,r,o;for(r=this.views,o=[],e=0,n=r.length;e<n;e++)i=r[e],Z.call(t,i)>=0||o.push(i);return o}.call(this),this.trigger("remove:view",t),this.trigger("change:views",this.views),this.trigger("change",this.views)},t.prototype.removeConstraint=function(t,e){var n,r,i,o;if(null==e&&(e=!1),i=this.constraints,r="string"==typeof t?function(e){return e.code===t}:function(e){var n,r;return e.path===t.path&&e.op===t.op&&e.value===t.value&&e.extraValue===t.extraValue&&t.type===e.type&&(null!=(n=e.values)?n.join("%%"):void 0)===(null!=(r=t.values)?r.join("%%"):void 0)},o=function(){var t,e,o;for(o=[],t=0,e=i.length;t<e;t++)n=i[t],r(n)||o.push(n);return o}(),o.length!==i.length-1)throw new Error(m(i,o));if(this.constraints=o,!e)return this.trigger("change:constraints"),this.trigger("change"),this.trigger("removed:constraint",W.find(i,r))},t.prototype.addToSelect=function(t,e){var n,r,i,o,s,a,u,h;if(null==t&&(t=[]),null==e&&(e={}),t=W.stringList(t),r=W.compose(this.expandStar,this.adjustPath),o=W.flatten(function(){var e,n,i;for(i=[],e=0,n=t.length;e<n;e++)s=t[e],i.push(r(s));return i}()),n=function(){var t,e,n;for(n=[],t=0,e=o.length;t<e;t++)i=o[t],Z.call(this.views,i)>=0&&n.push(i);return n}.call(this),n.length)throw new Error(""+n+" already in the select list");if(n=function(){var t,e,n;for(n=[],t=0,e=o.length;t<e;t++)i=o[t],function(){var t,e,n;for(n=[],t=0,e=o.length;t<e;t++)a=o[t],a===i&&n.push(a);return n}().length>1&&n.push(i);return n}(),n.length)throw new Error(""+n+" specified multiple times as arguments to addToSelect");return(u=this.views).push.apply(u,o),e.silent?e.events=(null!=(h=e.events)?h:[]).concat(["change","add:view","change:views"]):(this.trigger("add:view change:views",o),this.trigger("change")),this},t.prototype.select=function(t,e){var n,r;r=this.views.slice();try{this.views=[],this.addToSelect(t,e)}catch(i){n=i,this.views=r,W.error(n)}return this},t.prototype.adjustPath=function(t){return t=t&&t.name?t.name:""+t,null!=this.root?t.match("^"+this.root)||(t=this.root+"."+t):this.root=t.split(".")[0],t},t.prototype.getPossiblePaths=function(t,e,n){var r,i,o,s,a;return null==t&&(t=3),null==e&&(e=!0),null==n&&(n=null),s="string"==typeof n?function(t){
return t[n]()}:n,r=function(t){return function(n,i){var o,s,a,u,h,l;return h=t.getPathInfo(n),!e&&h.isReverseReference()?[]:h.isAttribute()?[h]:(o=h.getType(),l=y(function(t){return r(""+n+"."+t.name,i-1)}),u=o&&i>0?l(function(){var t,e;t=o.fields,e=[];for(a in t)s=t[a],e.push(s);return e}()):[],[h].concat(u))}}(this),i=""+t+"-"+e,null==this._possiblePaths&&(this._possiblePaths={}),o=(null!=(a=this._possiblePaths)[i]?a[i]:a[i]=r(this.root,t)).slice(),null!=s?o.filter(s):o},t.prototype.getPathInfo=function(t){var e,n,r;return e=this.adjustPath(t),n=null!=(r=this.model)&&"function"==typeof r.getPathInfo?r.getPathInfo(e,this.getSubclasses()):void 0,n&&e in this.displayNames&&(n.displayName=this.displayNames[e]),n},t.prototype.makePath=t.prototype.getPathInfo,d=function(t){return[t.path,t.type]},h=W.compose(W.pairsToObj,W.map(d),w(E("type"))),t.prototype.getSubclasses=function(){return h(this.constraints)},t.prototype.getType=function(t){return this.getPathInfo(t).getType()},t.prototype.getViewNodes=function(){var t,e;return e=function(t){return function(e){return t.getPathInfo(e).getParent()}}(this),W.uniqBy(String,function(){var n,r,i,o;for(i=this.views,o=[],n=0,r=i.length;n<r;n++)t=i[n],o.push(e(t));return o}.call(this))},t.prototype.isInView=function(t){var e,n,r;if(e=this.getPathInfo(t),!e)throw new Error("Invalid path: "+t);return e.isAttribute()?(r=e.toString(),Z.call(this.views,r)>=0):(n=e.toString(),W.any(this.getViewNodes(),function(t){return t.toString()===n}))},t.prototype.isConstrained=function(t,e){var n,r;if(null==e&&(e=!1),n=this.getPathInfo(t),!n)throw new Error("Invalid path: "+t);return r=function(t){return null!=t.op&&t.path===n.toString()},!n.isAttribute()&&e&&(r=function(t){return function(e){return null!=e.op&&(e.path===n.toString()||n.equals(t.getPathInfo(e.path).getParent()))}}(this)),W.any(this.constraints,r)},t.prototype.canHaveMultipleValues=function(t){return this.getPathInfo(t).containsCollection()},t.prototype.getQueryNodes=function(){var t,e,n,r;return r=this.getViewNodes(),e=function(){var e,r,i,o;for(i=this.constraints,o=[],e=0,r=i.length;e<r;e++)t=i[e],null==t.type&&(n=this.getPathInfo(t.path),n.isAttribute()?o.push(n.getParent()):o.push(n));return o}.call(this),W.uniqBy(String,r.concat(e))},t.prototype.isInQuery=function(t){var e,n,r,i,o,s;if(n=this.getPathInfo(t)){for(r=n.toPathString(),s=this.views.concat(function(){var t,n,r,i;for(r=this.constraints,i=[],t=0,n=r.length;t<n;t++)e=r[t],null==e.type&&i.push(e.path);return i}.call(this)),i=0,o=s.length;i<o;i++)if(t=s[i],0===t.indexOf(r))return!0;return!1}return!0},t.prototype.isRelevant=function(t){var e,n,r;return n=this.getPathInfo(t),n.isAttribute()&&(n=n.getParent()),r=n.toString(),e=this.getViewNodes(),W.any(e,function(t){return t.toPathString()===r})},t.prototype.expandStar=function(t){var e,n,r,i,o,s,a,u;if(/\*$/.test(t))if(a=t.substr(0,t.lastIndexOf(".")),r=function(t){return a+t},n=this.getType(a),/\.\*$/.test(t)){if(n&&this.summaryFields[n.name])return i=W.compose(r,v),function(){var t,e,r,s;for(r=this.summaryFields[n.name],s=[],t=0,e=r.length;t<e;t++)o=r[t],this.hasView(o)||s.push(i(o));return s}.call(this)}else if(/\.\*\*$/.test(t))return u=this.expandStar(a+".*"),e=function(){var t;t=[];for(s in n.attributes)t.push(r("."+s));return t}(),W.uniqBy(O,u.concat(e));return t},t.prototype.isOuterJoin=function(t){return"OUTER"===this.joins[this.adjustPath(t)]},t.prototype.hasView=function(t){var e;return this.views&&(e=this.adjustPath(t),Z.call(this.views,e)>=0)},t.prototype.count=function(t){if(this.service.count)return this.service.count(this,t);throw new Error("This query has no service with count functionality attached.")},t.prototype.appendToList=function(t,e){var n,r,i,s,a;return(null!=t?t.name:void 0)?(n=t.name,a=function(e,n){if(null==e)return t.size=n.size}):(n=String(t),a=null),s=this.makeListQuery(),i={listName:n,query:s.toXML()},r=o(this.service),X(a,e,this.service.post("query/append/tolist",i).then(r))},t.prototype.selectPreservingImpliedConstraints=function(t){var e,n,r,i,o;for(null==t&&(t=[]),n=this.clone(),n.select(t),o=this.getViewNodes(),r=0,i=o.length;r<i;r++)e=o[r],this.isOuterJoined(e)||n.isInView(e||n.isConstrained(e))||null==e.getEndClass().fields.id||n.addConstraint([e.append("id"),"IS NOT NULL"]);return n},t.prototype.makeListQuery=function(){var t,e;return t=this.views.slice(),1===t.length&&(null!=(e=t[0])?e.match(/\.id$/):void 0)||(t=["id"]),this.selectPreservingImpliedConstraints(t)},t.prototype.saveAsList=function(t,e){var n,r;return r=this.makeListQuery(),n=W.copy(t),n.listName=n.listName||n.name,n.query=r.toXML(),t.tags&&(n.tags=t.tags.join(";")),X(e,this.service.post("query/tolist",n).then(o(this.service)))},t.prototype.summarise=function(t,e,n){return this.filterSummary(t,"",e,n)},t.prototype.summarize=function(){var t;return t=1<=arguments.length?et.call(arguments,0):[],this.summarise.apply(this,t)},s=function(t){var e,n,r,i,o,s,a;for(e=null!=(null!=(s=t.results[0])?s.max:void 0),a=t.results,i=0,o=a.length;i<o;i++)n=a[i],n.count=parseInt(n.count,10);return r={uniqueValues:t.uniqueValues,filteredCount:t.filteredCount},e&&(r=A(r,t.results[0])),t.stats=r,t},t.prototype.filterSummary=function(t,e,n,r){var i,o,a;return null==r&&(r=function(){}),W.isFunction(n)&&(a=[n,null],r=a[0],n=a[1]),t=this.adjustPath(t),o=this.clone(),Z.call(o.views,t)<0&&o.views.push(t),i={query:o.toXML(),summaryPath:t,format:"jsonrows"},n&&(i.size=n),e&&(i.filterTerm=e),X(r,this.service.post("query/results",i).then(s))},t.prototype.clone=function(e){var n,r,i,o;if(n=new t(this,this.service),null==n._callbacks&&(n._callbacks={}),e){o=this._callbacks;for(r in o)nt.call(o,r)&&(i=o[r],n._callbacks[r]=i);n.off("change:views",P,this)}return n},t.prototype.next=function(){var t;return t=this.clone(),this.maxRows&&(t.start=this.start+this.maxRows),t},t.prototype.previous=function(){var t;return t=this.clone(),this.maxRows?t.start=this.start-this.maxRows:t.start=0,t},t.prototype.getSortDirection=function(t){var e,n;if(e=this.adjustPath(t),!this.isInQuery(e)&&!this.isRelevant(e))throw new Error(""+t+" is not in the query");return n=W.find(this.sortOrder,function(t){var n;return n=t.path,e===n}),null!=n?n.direction:void 0},t.prototype.isOuterJoined=function(t){var e,n,r;t=this.adjustPath(t),r=this.joins;for(n in r)if(e=r[n],"OUTER"===e&&0===t.indexOf(n))return!0;return!1},t.prototype.getOuterJoin=function(t){var e,n;return t=this.adjustPath(t),e=function(){var t;t=[];for(n in this.joins)t.push(n);return t}.call(this).sort(function(t,e){return e.length-t.length}),W.find(e,function(e){return function(n){return"OUTER"===e.joins[n]&&0===t.indexOf(n)}}(this))},t.prototype._parse_sort_order=function(t){var e,n,r,i,o,s;if(null==t)throw new Error("No input");if("string"==typeof t)i={path:t,direction:"ASC"};else if(W.isArray(t))r=t[0],e=t[1],i={path:r,direction:e};else if(null==t.path){for(n in t)o=t[n],s=[n,o],r=s[0],e=s[1];i={path:r,direction:e}}else r=t.path,e=t.direction,i={path:r,direction:e};return i.path=this.adjustPath(i.path),null==i.direction&&(i.direction="ASC"),i.direction=i.direction.toUpperCase(),i},t.prototype.addOrSetSortOrder=function(t){var e,n;return t=this._parse_sort_order(t),e=this.getSortDirection(t.path),null==e?this.addSortOrder(t):e!==t.direction&&(n=W.find(this.sortOrder,function(e){var n;return n=e.path,n===t.path}),n.direction=t.direction,this.trigger("change:sortorder",this.sortOrder),this.trigger("change")),this},t.prototype.addSortOrder=function(t,e){var n;if(n=(null!=e?e:{}).silent,this.sortOrder.push(this._parse_sort_order(t)),!n)return this.trigger("add:sortorder",t),this.trigger("change:sortorder",this.sortOrder),this.trigger("change")},t.prototype.orderBy=function(t,e){var n,r,i,o,s,a,u,h;for(null==e&&(e={}),o=this.sortOrder.slice(),this.sortOrder=[],a=0,u=t.length;a<u;a++)i=t[a],this.addSortOrder(this._parse_sort_order(i),{silent:!0});return n=function(){var t,e,n,i,o;for(n=this.sortOrder,o=[],t=0,e=n.length;t<e;t++)i=n[t],s=i.path,r=i.direction,o.push({path:s,direction:r});return o}.call(this),this.trigger("set:sortorder",n),D(o)!==this.getSorting()&&(e.silent?e.events=(null!=(h=e.events)?h:[]).concat(["change","change:sortorder"]):(this.trigger("change:sortorder",n),this.trigger("change"))),this},t.prototype.addJoins=function(t){var e,n,r,i,o,s,a;if(W.isArray(t)){for(s=[],i=0,o=t.length;i<o;i++)e=t[i],s.push(this.addJoin(e));return s}a=[];for(n in t)r=t[n],a.push(this.addJoin({path:n,style:r}));return a},t.prototype.addJoin=function(t){return"string"==typeof t&&(t={path:t,style:"OUTER"}),this.setJoinStyle(t.path,t.style)},t.prototype.setJoinStyle=function(e,n){if(null==n&&(n="OUTER"),e=this.adjustPath(e),n=n.toUpperCase(),Z.call(t.JOIN_STYLES,n)<0)throw new Error("Invalid join style: "+n);return this.joins[e]!==n&&(this.joins[e]=n,this.trigger("change:joins",{path:e,style:n}),this.trigger("change")),this},t.prototype.addConstraints=function(t,e){var n,r,i,o,s,a,u;if(null==e&&(e="and"),this.__silent__=!0,i=this.constraintLogic,W.isArray(t))for(a=0,u=t.length;a<u;a++)n=t[a],this.addConstraint(n,e);else{s=function(t){return function(n,r){return t.addConstraint(L(n,r),e)}}(this);for(o in t)r=t[o],s(o,r)}return this.__silent__=!1,this.trigger("add:constraint"),this.trigger("change:constraints"),i!==this.constraintLogic&&this.trigger("change:logic",this.constraintLogic),this.trigger("change")},t.prototype.addConstraint=function(t,e){var n,i,o,s,a,u,h;if(null==e&&(e="and"),"and"!==e&&"or"!==e)throw new Error("Unknown logical conjunction: "+e);return t=W.isArray(t)?k(t):g(t),"OFF"===t.switched?this:(t.path=this.adjustPath(t.path),null==t.type&&(t.op=S(t.op)),this.constraints.push(t),o="or"===e||(null!=(h=this.constraintLogic)?h.length:void 0)>0,s=this.constraints.length,u=this.constraintLogic,o&&(a=2===s?""+r[0]+" "+e+" "+r[1]:(i=this.constraintLogic,i||(i=function(){var t,e,i;for(i=[],n=t=0,e=s-2;0<=e?t<=e:t>=e;n=0<=e?++t:--t)i.push(r[n]);return i}().join(" and ")),"("+i+") "+e+" "+r[s-1]),this.constraintLogic=a),this.__silent__||(this.trigger("add:constraint",t),this.trigger("change:constraints"),u!==this.constraintLogic&&this.trigger("change:logic",this.constraintLogic),this.trigger("change")),this)},t.prototype.getSorting=function(){return D(this.sortOrder)},t.prototype.getConstraintXML=function(){var t,e;return e=function(){var e,n,r,i;for(r=this.constraints,i=[],e=0,n=r.length;e<n;e++)t=r[e],(null==t.type||this.isInQuery(t.path))&&i.push(t);return i}.call(this),e.length?y(f)(y(O)(q(function(t){return null!=t.type})(e))):""},t.prototype.getJoinXML=function(){var t,e,n;return n=function(){var n,r;n=this.joins,r=[];for(t in n)e=n[t],this.isInQuery(t)&&"OUTER"===e&&r.push('<join path="'+t+'" style="OUTER"/>');return r}.call(this),n.join("")},t.prototype.toXML=function(){var t,e,n,r;return t={model:this.model.name,view:this.views.join(" "),sortOrder:this.getSorting(),constraintLogic:this.constraintLogic},null!=this.name&&(t.name=this.name),e=function(){var e;e=[];for(n in t)r=t[n],r&&e.push(n+'="'+r+'"');return e}().join(" "),"<query "+e+" >"+this.getJoinXML()+this.getConstraintXML()+"</query>"},t.prototype.toJSON=function(){var t,e,n,r,i;return N({name:this.name,title:this.title,comment:this.comment,description:this.description,constraintLogic:this.constraintLogic,from:this.root,select:function(){var t,e,n,r;for(n=this.views,r=[],t=0,e=n.length;t<e;t++)i=n[t],r.push(T(i));return r}.call(this),orderBy:function(){var t,r,i,o,s;for(i=this.sortOrder,s=[],t=0,r=i.length;t<r;t++)o=i[t],n=o.path,e=o.direction,s.push({path:T(n),direction:e});return s}.call(this),joins:function(){var t,e;t=this.joins,e=[];for(n in t)r=t[n],"OUTER"===r&&e.push(T(n));return e}.call(this),where:function(){var e,n,r,i;for(r=this.constraints,i=[],e=0,n=r.length;e<n;e++)t=r[e],i.push(p(t));return i}.call(this)})},t.prototype.fetchCode=function(t,e){var n;return n={query:this.toXML(),lang:t},X(e,this.service.post("query/code",n).then(this.service.VERIFIER).then(E("code")))},t.prototype.setName=function(t){this.name=t},t.prototype.save=function(t,e){return a(this.service,16,function(n){return function(){var r,i;return W.isFunction(t)&&(i=[null,t],t=i[0],e=i[1]),null!=t&&n.setName(t),r={type:"PUT",path:"user/queries",data:n.toXML(),contentType:"application/xml",dataType:"json"},X(e,n.service.authorise(r)).then(function(t){return n.service.doReq(t)}).then(function(t){return t.queries})}}(this))},t.prototype.store=function(t,e){return a(this.service,16,function(n){return function(){var r,i,o,s;return W.isFunction(t)&&(s=[null,t],t=s[0],e=s[1]),null!=t&&n.setName(t),o=function(t,e){if(null==t)return n.setName(e)},r=W.compose(E(n.name),E("queries")),i={type:"POST",path:"user/queries",data:n.toXML(),contentType:"application/xml",dataType:"json"},X(e,o,n.service.authorise(i)).then(function(t){return n.service.doReq(t)}).then(r)}}(this))},t.prototype.saveAsTemplate=function(t,e){return a(this.service,16,function(n){return function(){var r,i;if(W.isFunction(t)&&(i=[null,t],t=i[0],e=i[1]),null!=t&&n.setName(t),!n.name)throw new Error("Templates must have a name");return r={type:"POST",path:"templates",data:"<template "+c(n,["name","title","comment"])+">"+n.toXML()+"</template>",contentType:"application/xml",dataType:"json"},X(e,n.service.authorise(r).then(function(t){return n.service.doReq(t)}))}}(this))},t.prototype.getCodeURI=function(t){var e,n;return e={query:this.toXML(),lang:t,format:"text"},null!=(null!=(n=this.service)?n.token:void 0)&&(e.token=this.service.token),""+this.service.root+"query/code?"+F(e)},t.prototype.getExportURI=function(e,n){var r,i;return null==e&&(e="tab"),null==n&&(n={}),Z.call(t.BIO_FORMATS,e)>=0?this["get"+e.toUpperCase()+"URI"](n):(r=A(n,{query:this.toXML(),format:e}),null!=(null!=(i=this.service)?i.token:void 0)&&(r.token=this.service.token),""+this.service.root+"query/results?"+F(r))},t.prototype.needsAuthentication=function(){return W.any(this.constraints,function(t){var e;return"NOT IN"===(e=t.op)||"IN"===e})},t.prototype.fetchQID=function(t){return X(t,this.service.post("queries",{query:this.toXML()}).then(E("id")))},e=function(t){return t.append("primaryIdentifier").toString()},t.prototype.__bio_req=function(t,n){var r,i;return i=this.makeListQuery(),r=function(e){return W.any(t,function(t){return e.isa(t)})},i.views=W.take(n)(function(){var t,i,o,s;for(o=this.getViewNodes(),s=[],t=0,i=o.length;t<i;t++)n=o[t],r(n)&&s.push(e(n));return s}.call(this)),{query:i.toXML(),format:"text"}},t.prototype._fasta_req=function(){return this.__bio_req(["SequenceFeature","Protein"],1)},t.prototype._gff3_req=function(){return this.__bio_req(["SequenceFeature"])},t.prototype._bed_req=t.prototype._gff3_req,t}(),H=_(function(t,e){return t.concat(e)}),s.prototype.toString=s.prototype.toXML,s.ATTRIBUTE_OPS=H([s.ATTRIBUTE_VALUE_OPS,s.MULTIVALUE_OPS,s.NULL_OPS]),s.REFERENCE_OPS=H([s.TERNARY_OPS,s.LOOP_OPS,s.LIST_OPS]),l=function(t,e){return function(n,r){var i,o,s,a,u;return null==n&&(n={}),null==r&&(r=function(){}),W.isFunction(n)&&(u=[{},n],n=u[0],r=u[1]),i=function(t){return function(e){var n;return n=t.getPathInfo(e),n.isAttribute()?n:n.append("id")}}(this),null!=(null!=n?n.view:void 0)&&(n.view=function(){var t,e,r,i;for(r=n.view,i=[],t=0,e=r.length;t<e;t++)a=r[t],i.push(this.getPathInfo(a).toString());return i}.call(this)),o=null!=n["export"]?this.selectPreservingImpliedConstraints(n["export"].map(i)):this,s=A(o[t](),n),e.call(o,s,r)}},$=s.BIO_FORMATS,G=function(t){var e,n,r;return n="_"+t+"_req",e="get"+t.toUpperCase(),r=e+"URI",s.prototype[e]=l(n,function(e,n){return X(n,this.service.post("query/results/"+t,e))}),s.prototype[r]=l(n,function(e,n){return null!=this.service.token&&(e.token=this.service.token),""+this.service.root+"query/results/"+t+"?"+F(e)})};for(z=0,Y=$.length;z<Y;z++)b=$[z],G(b);for(J=function(t){return function(){var e,n,r,i;if(n=arguments[0],e=2<=arguments.length?et.call(arguments,1):[],this.service[t])return null==n?n={}:W.isFunction(n)&&(n={},e=function(){var t,e,n;for(n=[],t=0,e=arguments.length;t<e;t++)r=arguments[t],n.push(r);return n}.apply(this,arguments)),n=N(A({start:this.start,size:this.maxRows},n)),(i=this.service)[t].apply(i,[this,n].concat(et.call(e)));throw new Error("Service does not provide '"+t+"'.")}},K=0,Q=u.length;K<Q;K++)j=u[K],s.prototype[j]=J(j);i.mixin(s.prototype),s.prototype.emit=s.prototype.trigger,s.prototype.bind=s.prototype.on,R.Query=s}).call(this)},{"./util":23,"./xml":25,"backbone-events-standalone":3}],19:[function(t,e,n){(function(){var e,r,i,o,s,a,u,h,l,c,f,p,d,y,g,v,m,b,w,_,E,S,T,O,x,R,k,L,C,A,j,I,N,M,q,P,U,B,D,F,V,H,W,X,G,J,z,K,Y,Q,$,Z,tt,et,nt,rt,it,ot,st,at,ut,ht,lt,ct,ft,pt,dt=function(t,e){return function(){return t.apply(e,arguments)}},yt={}.hasOwnProperty,gt=[].slice;for(S=t("./promise"),m=t("./model").Model,x=t("./query").Query,y=t("./lists").List,B=t("./user").User,l=t("./id-resolution-job").IDResolutionJob,ot=t("./version"),it=t("./util"),Y=t("./http"),rt=it.querystring,st=it.withCB,$=it.map,Z=it.merge,z=it.get,et=it.set,Q=it.invoke,nt=it.success,J=it.error,L=it.REQUIRES_VERSION,G=it.dejoin,D={},r={},R={},g={},I={},H={},s="http://",F="version",q="templates",k="version/release",i="classkeys",f="lists",v="model",j="summaryfields",T="query/results",O="search",W="widgets",a="list/enrichment",X="listswithobject",p={union:"lists/union",intersection:"lists/intersect",difference:"lists/diff"},C="lists/subtract",V="user/whoami",M=T+"/tablerows",E="user/preferences",_="path/values",U="user/tokens",c="ids",w={},ft=[F,k,i,W,v,j,O,_],ut=0,lt=ft.length;ut<lt;ut++)tt=ft[ut],w[tt]=!0;for(e={},pt=[V,E,p,C,X,a,q,U],ht=0,ct=pt.length;ht<ct;ht++)tt=pt[ht],e[tt]=!0;b=function(t,n){return!w[t]&&(!!e[t]||(null==n||!n.needsAuthentication||n.needsAuthentication()))},u=/^https?:\/\//i,h=/service\/?$/i,A="/service/",o=function(t){var e,n;return(e=null!=(n=console.error)?n:console.log)(t)},at=function(t,e,n,r,i){var o,s,a,u,h;return a=this.root,u=this.useCache,s=null!=this[t]?this[t]:this[t]=u&&(h=e[a])?nt(h):(o={type:"GET",dataType:"json",data:{format:"json"}},this.doReq(Z(o,{url:this.root+n})).then(function(t){return e[a]=t[r]})),st(i,s)},K=function(t){return function(e){return new S(function(n,r){var i;return(i=it.find(e,function(e){return e.name===t}))?n(i):r('List "'+t+'" not found among: '+e.map(z("name")))})}},d=function(t,e){return null==e&&(e="listName"),it.compose(t.fetchList,z(e))},P=function(t){var e,n,r,i,o,s;for(null==t&&(t=[]),i=it.isArray(t)?t:[t],s=[],n=0,r=i.length;n<r;n++)e=i[n],s.push(null!=(o=e.name)?o:e);return s},N=function(){function t(t){var e;if(this.root=t.root,this.token=t.token,this.errorHandler=t.errorHandler,this.DEBUG=t.DEBUG,this.help=t.help,e=t.noCache,this.headers=t.headers,this.connectAs=dt(this.connectAs,this),this.createList=dt(this.createList,this),this.resolveIds=dt(this.resolveIds,this),this.templateQuery=dt(this.templateQuery,this),this.savedQuery=dt(this.savedQuery,this),this.query=dt(this.query,this),this.fetchRelease=dt(this.fetchRelease,this),this.fetchClassKeys=dt(this.fetchClassKeys,this),this.fetchVersion=dt(this.fetchVersion,this),this.fetchSummaryFields=dt(this.fetchSummaryFields,this),this.fetchModel=dt(this.fetchModel,this),this.fetchWidgetMap=dt(this.fetchWidgetMap,this),this.fetchWidgets=dt(this.fetchWidgets,this),this.complement=dt(this.complement,this),this.fetchListsContaining=dt(this.fetchListsContaining,this),this.fetchList=dt(this.fetchList,this),this.findLists=dt(this.findLists,this),this.fetchLists=dt(this.fetchLists,this),this.fetchTemplates=dt(this.fetchTemplates,this),this.tableRows=dt(this.tableRows,this),this.values=dt(this.values,this),this.rows=dt(this.rows,this),this.records=dt(this.records,this),this.table=dt(this.table,this),this.pathValues=dt(this.pathValues,this),this.fetchUser=dt(this.fetchUser,this),this.whoami=dt(this.whoami,this),this.findById=dt(this.findById,this),this.count=dt(this.count,this),this.enrichment=dt(this.enrichment,this),null==this.root)throw new Error("No service root provided. This is required");u.test(this.root)||(this.root=s+this.root),h.test(this.root)||(this.root=this.root+A),this.root=this.root.replace(/ice$/,"ice/"),null==this.headers&&(this.headers=null),null==this.errorHandler&&(this.errorHandler=o),null==this.help&&(this.help="no.help.available@dev.null"),this.useCache=!e,this.getFormat=function(t){return function(t){return null==t&&(t="json"),t}}(this)}var e,n,w,S,N,U;return t.prototype.doReq=function(){return arguments[0]=this.attachCustomHeaders(arguments[0]),Y.doReq.apply(this,arguments)},t.prototype.post=function(t,e){return this.makeRequest("POST",t,e)},t.prototype.get=function(t,e){return this.makeRequest("GET",t,e)},t.prototype.makeRequest=function(t,e,n,r,i){var o,s,a,u,h,l,c;return null==t&&(t="GET"),null==e&&(e=""),null==n&&(n={}),null==r&&(r=function(){}),null==i&&(i=!1),it.isArray(r)&&(h=r,r=h[0],s=h[1]),it.isArray(n)&&(n=it.pairsToObj(n)),null==s&&(s=this.errorHandler),n=it.copy(n),o=this.getFormat(n.format),Y.supports(t)||(l=[t,Y.getMethod(t)],n.method=l[0],t=l[1]),a={data:n,dataType:o,success:r,error:s,path:e,type:t},null!=n.auth&&(a.auth=n.auth,delete a.data.auth),null!=n.headers&&(a.headers=it.copy(n.headers),delete a.data.headers),(u=null!=(c=n.timeout)?c:this.timeout)&&(a.timeout=u,delete n.timeout),this.authorise(a).then(function(t){return function(e){return t.doReq(e,i)}}(this))},t.prototype.authorise=function(t){return this.fetchVersion().then(function(e){return function(n){var r,i,o;return r=it.copy(t),null==r.headers&&(r.headers={}),r.url=e.root+r.path,i=[],n<14&&("string"==typeof r.data?i.push(["format",r.dataType]):r.data.format=r.dataType),null!=e.token&&b(t.path,null!=(o=r.data)?o.query:void 0)&&(n>=14?r.headers.Authorization="Token "+e.token:"string"==typeof r.data?i.push(["token",e.token]):r.data.token=e.token),i.length&&(r.url+="?"+rt(i)),r}}(this))},t.prototype.attachCustomHeaders=function(t){var e;return null!=this.headers?(e=it.copy(t),e.headers=it.merge(e.headers,this.headers),e):t},t.prototype.enrichment=function(t,e){return L(this,8,function(n){return function(){var r;return r=Z({maxp:.05,correction:"Holm-Bonferroni"},t),st(e,n.get(a,r).then(z("results")))}}(this))},t.prototype.search=function(t,e){return null==t&&(t={}),null==e&&(e=function(){}),L(this,9,function(n){return function(){var r,i,o,s;if(it.isFunction(t)&&(s=[t,{}],e=s[0],t=s[1]),"string"==typeof t)i={q:t};else{i={q:t.q,start:t.start,size:t.size};for(r in t)yt.call(t,r)&&(o=t[r],"q"!==r&&"start"!==r&&"size"!==r&&(i["facet_"+r]=o))}return st(e,n.post(O,i))}}(this))},t.prototype.makePath=function(t,e,n){return null==e&&(e={}),null==n&&(n=function(){}),st(n,this.fetchModel().then(function(n){return n.makePath(t,e)}))},t.prototype.count=function(t,e){var n,r;return null==e&&(e=function(){}),n=t?null!=t.toPathString?(tt=t.isClass()?t.append("id"):t,this.pathValues(tt,"count")):null!=t.toXML?(r={query:t,format:"jsoncount"},this.post(T,r).then(z("count"))):"string"==typeof t?this.fetchModel().then(function(e){return function(n){var r;try{return e.count(n.makePath(t))}catch(i){return r=i,e.query({select:[t]}).then(e.count)}}}(this)):this.query(t).then(this.count):J("Not enough arguments"),st(e,n)},t.prototype.findById=function(t,e,n,r){var i,o;return null==n&&(n=["**"]),null==r&&(r=function(){}),it.isFunction(n)&&(o=[["**"],n],n=o[0],r=o[1]),i=this.query({from:t,select:n,where:{id:e}}).then(G).then(Q("records")).then(z(0)),st(r,i)},t.prototype.lookup=function(t,e,n,r){var i,o;return it.isFunction(n)&&(o=[null,n],n=o[0],r=o[1]),i=this.query({from:t,select:["**"],where:[[t,"LOOKUP",e,n]]}).then(G).then(Q("records")),st(r,i)},t.prototype.find=function(t,e,n,r){var i;return it.isFunction(n)&&(i=[null,n],n=i[0],r=i[1]),st(r,this.lookup(t,e,n).then(function(t){return null==t||0===t.length?J("Nothing found"):t.length>1?J("Multiple items found: "+t.slice(0,3)+"..."):nt(t[0])}))},t.prototype.whoami=function(t){return L(this,9,function(e){return function(){return st(t,e.get(V).then(z("user")).then(function(t){return new B(e,t)}))}}(this))},t.prototype.fetchUser=function(){var t;return t=1<=arguments.length?gt.call(arguments,0):[],this.whoami.apply(this,t)},N=function(t,e){return{format:t,path:String(e),typeConstraints:JSON.stringify(e.subclasses)}},t.prototype.pathValues=function(t,e,n){return null==e&&(e={}),L(this,6,function(r){return function(){var i,o,s,a,u;return"string"==typeof e&&(a=e,e={}),it.isFunction(e)&&(u=[n,e],e=u[0],n=u[1]),"count"!==a&&(a="results"),o="count"===a?"jsoncount":"json",s=function(){var n;try{return this.fetchModel().then(Q("makePath",t,null!=(n=t.subclasses)?n:e)).then(function(t){return N(o,t)}).then(function(t){return function(e){return t.post(_,e)}}(this)).then(z(a))}catch(r){return i=r,J(i)}}.call(r),st(n,s)}}(this))},t.prototype.doPagedRequest=function(t,e,n,r,i){var o,s;return null==n&&(n={}),null==i&&(i=function(){}),null!=t.toXML?(it.isFunction(n)&&(s=[n,{}],i=s[0],n=s[1]),o=Z(n,{query:t,format:r}),st(i,this.post(e,o).then(z("results")))):this.query(t).then(function(t){return function(o){return t.doPagedRequest(o,e,n,r,i)}}(this))},t.prototype.table=function(t,e,n){return this.doPagedRequest(t,T,e,"jsontable",n)},t.prototype.records=function(t,e,n){return this.doPagedRequest(t,T,e,"jsonobjects",n)},t.prototype.rows=function(t,e,n){return this.doPagedRequest(t,T,e,"json",n)},t.prototype.values=function(t,e,n){var r,i;return it.isFunction(e)&&(i=[e,n],n=i[0],e=i[1]),r=null==t?J("No query term supplied"):null!=t.descriptors||"string"==typeof t?this.pathValues(t,e).then($(z("value"))):null!=t.toXML?1!==t.views.length?J("Expected one column, got "+t.views.length):this.rows(t,e).then($(z(0))):this.query(t).then(function(t){return function(n){return t.values(n,e)}}(this)),st(n,r)},t.prototype.tableRows=function(t,e,n){return this.doPagedRequest(t,M,e,"json",n)},t.prototype.fetchTemplates=function(t){return st(t,this.get(q).then(z("templates")))},t.prototype.fetchLists=function(t){return this.findLists("",t)},t.prototype.findLists=function(t,e){return null==t&&(t=""),null==e&&(e=function(){}),this.fetchVersion().then(function(n){return function(r){var i;return st(e,t&&r<13?J("Finding lists by name on the server requires version 13. This is only "+r):(i=function(t){var e,r,i,o;for(o=[],r=0,i=t.length;r<i;r++)e=t[r],o.push(new y(e,n));return o},n.get(f,{name:t}).then(z("lists")).then(i)))}}(this))},t.prototype.fetchList=function(t,e){return this.fetchVersion().then(function(n){return function(r){return st(e,r<13?n.findLists().then(K(t)):n.findLists(t).then(z(0)))}}(this))},t.prototype.fetchListsContaining=function(t,e){var n;return n=function(t){return function(e){var n,r,i,o;for(o=[],r=0,i=e.length;r<i;r++)n=e[r],o.push(new y(n,t));return o}}(this),st(e,this.get(X,t).then(z("lists")).then(n))},t.prototype.combineLists=function(t,e,n){var r,i,o,s,a,u;return u=Z({lists:[],tags:[]},e),o=u.name,i=u.lists,a=u.tags,r=u.description,s={name:o,description:r},null==s.description&&(s.description=""+t+" of "+i.join(", ")),s.tags=a.join(";"),s.lists=i.join(";"),st(n,this.get(p[t],s).then(d(this)))},t.prototype.merge=function(){return this.combineLists.apply(this,["union"].concat(gt.call(arguments)))},t.prototype.intersect=function(){return this.combineLists.apply(this,["intersection"].concat(gt.call(arguments)))},t.prototype.diff=function(){return this.combineLists.apply(this,["difference"].concat(gt.call(arguments)))},t.prototype.complement=function(t,e){var n,r,i,o,s,a,u,h,l;return null==t&&(t={}),null==e&&(e=function(){}),o=t.from,i=t.exclude,a=t.name,r=t.description,l=t.tags,n=function(){return"Relative complement of "+s.join(" and ")+" in "+u.join(" and ")},u=P(o),s=P(i),null==a&&(a=n()),null==r&&(r=n()),null==l&&(l=[]),h={name:a,description:r,tags:l,lists:s,references:u},st(e,this.post(C,h).then(d(this)))},t.prototype.fetchWidgets=function(t){return L(this,8,function(e){return function(){return at.call(e,"widgets",H,W,"widgets",t)}}(this))},U=it.omap(function(t){return[t.name,t]}),t.prototype.fetchWidgetMap=function(t){return L(this,8,function(e){return function(){return st(t,null!=e.__wmap__?e.__wmap__:e.__wmap__=e.fetchWidgets().then(U))}}(this))},t.prototype.fetchModel=function(t){var e;return e=at.call(this,"model",g,v,"model").then(m.load).then(et({service:this})),st(t,e)},t.prototype.fetchSummaryFields=function(t){return at.call(this,"summaryFields",I,j,"classes",t)},t.prototype.fetchVersion=function(t){return at.call(this,"version",D,F,"version",t)},t.prototype.fetchClassKeys=function(t){return at.call(this,"classkeys",r,i,"classes",t)},t.prototype.fetchRelease=function(t){return at.call(this,"release",R,k,"version",t)},t.prototype.query=function(t,e){var n;return n=function(e){return function(n){var r,i;return r=n[0],i=n[1],new x(t,e,{model:r,summaryFields:i})}}(this),st(e,it.parallel(this.fetchModel(),this.fetchSummaryFields()).then(n))},S=function(t,e){return function(n){return n?t.query(n):J("No query found called "+e)}},n=function(t){return t?"string"==typeof t?nt():J("Name must be a string"):J("Name not provided")},t.prototype.savedQuery=function(t,e){return L(this,16,function(r){return function(){return n(t).then(function(){return st(e,r.get("user/queries",{filter:t}).then(function(e){return e.queries[t]}).then(S(r,t)))})}}(this))},t.prototype.templateQuery=function(t,e){return n(t).then(function(n){return function(){return st(e,n.fetchTemplates().then(z(t)).then(et("type","TEMPLATE")).then(S(n,t)))}}(this))},t.prototype.manageUserPreferences=function(t,e,n){return L(this,11,function(r){return function(){return st(n,r.makeRequest(t,E,e).then(z("preferences")))}}(this))},t.prototype.resolveIds=function(t,e){return L(this,10,function(n){return function(){var r;return r={type:"POST",url:n.root+c,contentType:"application/json",data:JSON.stringify(t),dataType:"json"},st(e,n.doReq(r).then(z("uid")).then(l.create(n)))}}(this))},t.prototype.resolutionJob=function(t){return l.create(this)(t)},t.prototype.createList=function(t,e,n){var r,i;return null==t&&(t={}),null==e&&(e=""),null==n&&(n=function(){}),r=function(e){return function(n){return Z(n,{token:e.token,tags:t.tags||[]})}}(this),i={data:it.isArray(e)?e.map(function(t){return'"'+t+'"'}).join("\n"):e,dataType:"json",url:""+this.root+"lists?"+rt(r(t)),type:"POST",contentType:"text/plain"},st(n,this.doReq(i).then(d(this)))},w=function(t){return t.user.temporaryToken},t.prototype.connectAs=function(e){return t.connect(Z(this,{token:e,noCache:!this.useCache}))},t.prototype.register=function(t,e,n){return L(this,9,function(r){return function(){return st(n,r.post("users",{name:t,password:e}).then(w).then(r.connectAs))}}(this))},e=300,t.prototype.getDeregistrationToken=function(t,n){return null==t&&(t=e),L(this,16,function(e){return function(){var r;return r=null!=e.token?e.post("user/deregistration",{validity:t}).then(z("token")):J("Not registered"),st(n,r)}}(this))},t.prototype.deregister=function(t,e){return L(this,16,function(n){return function(){return st(e,n.makeRequest("DELETE","user",{deregistrationToken:t,format:"xml"}))}}(this))},t.prototype.login=function(t,e,n){return L(this,9,function(r){return function(){var i;return i=""+t+":"+e,st(n,r.logout().then(function(t){return t.get("user/token",{auth:i})})).then(z("token")).then(r.connectAs)}}(this))},t.prototype.logout=function(t){return st(t,nt(this.connectAs()))},t}(),N.prototype.rowByRow=function(){var t,e,n;return n=arguments[0],t=2<=arguments.length?gt.call(arguments,1):[],e=Y.iterReq("POST",T,"json"),null!=n.toXML?e.apply(this,arguments):this.query(n).then(function(e){return function(n){return e.rowByRow.apply(e,[n].concat(gt.call(t)))}}(this))},N.prototype.eachRow=N.prototype.rowByRow,N.prototype.recordByRecord=function(){var t,e,n;return n=arguments[0],t=2<=arguments.length?gt.call(arguments,1):[],e=Y.iterReq("POST",T,"jsonobjects"),null!=n.toXML?e.apply(this,arguments):this.query(n).then(function(e){return function(n){return e.recordByRecord.apply(e,[n].concat(gt.call(t)))}}(this))},N.prototype.eachRecord=N.prototype.recordByRecord,N.prototype.union=N.prototype.merge,
N.prototype.difference=N.prototype.diff,N.prototype.symmetricDifference=N.prototype.diff,N.prototype.relativeComplement=N.prototype.complement,N.prototype.subtract=N.prototype.complement,N.flushCaches=function(){return g={},D={},R={},r={},I={},H={}},N.connect=function(t){if(null==(null!=t?t.root:void 0))throw new Error("Invalid options provided: "+JSON.stringify(t));return new N(t)},n.Service=N,n.Model=m,n.Query=x,n.utils=it,n.VERSION=ot.VERSION,n.imjs=ot}).call(this)},{"./http":12,"./id-resolution-job":13,"./lists":14,"./model":15,"./promise":17,"./query":18,"./user":22,"./util":23,"./version":24}],20:[function(t,e,n){(function(t){(function(){var e;n.DOMParser=null!=t.DOMParser?t.DOMParser:e=function(){function t(){throw new Error("DOMParser is not available")}return t}()}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],21:[function(t,e,n){(function(){var e,r,i,o=function(t,e){return function(){return t.apply(e,arguments)}};r=function(t,e){var n,r,i;i=[];for(n in t)r=t[n],i.push(e[n]=r);return i},e=t("./promise"),i=["attributes","references","collections"],n.Table=function(){function t(t,e){var n,s,a,u,h,l,c;for(this.model=e,this.getDisplayName=o(this.getDisplayName,this),this.name=t.name,this.tags=t.tags,this.displayName=t.displayName,this.attributes=t.attributes,this.references=t.references,this.collections=t.collections,this.fields={},this.__parents__=null!=(l=t["extends"])?l:[],u=0,h=i.length;u<h;u++){if(s=i[u],null==this[s])throw new Error("Bad model data: missing "+s);r(this[s],this.fields)}c=this.collections;for(a in c)n=c[a],n.isCollection=!0}return t.prototype.toString=function(){var t,e;return"[Table name="+this.name+", fields=["+function(){var n,r;n=this.fields,r=[];for(t in n)e=n[t],r.push(t);return r}.call(this)+"]]"},t.prototype.parents=function(){var t;return(null!=(t=this.__parents__)?t:[]).slice()},t.prototype.getDisplayName=function(){return new e(function(t){return function(e,n){return null!=t.model?e(t.model.makePath(t.name).getDisplayName()):n(new Error("model not set - cannot make path"))}}(this))},t}()}).call(this)},{"./promise":17}],22:[function(t,e,n){(function(){var e,r,i,o,s,a,u,h=function(t,e){return function(){return t.apply(e,arguments)}};u=t("./util"),a=u.withCB,o=u.get,s=u.isFunction,e=u.any,i=u.error,r=function(t,e,n,r){return t.service.manageUserPreferences(n,e,r).then(function(e){return t.preferences=e})},n.User=function(){function t(t,e){this.service=t,this.username=e.username,this.preferences=e.preferences,this.refresh=h(this.refresh,this),this.clearPreferences=h(this.clearPreferences,this),this.clearPreference=h(this.clearPreference,this),this.setPreferences=h(this.setPreferences,this),this.setPreference=h(this.setPreference,this),this.hasPreferences=null!=this.preferences,null==this.preferences&&(this.preferences={})}return t.prototype.setPreference=function(t,e,n){var r,o;if(s(e)&&(o=[null,e],e=o[0],n=o[1]),"string"==typeof t)r={},r[t]=e;else{if(null!=e)return a(n,i("Incorrect arguments to setPreference"));r=t}return this.setPreferences(r,n)},t.prototype.setPreferences=function(t,e){return r(this,t,"POST",e)},t.prototype.clearPreference=function(t,e){return r(this,{key:t},"DELETE",e)},t.prototype.clearPreferences=function(t){return r(this,{},"DELETE",t)},t.prototype.refresh=function(t){return r(this,{},"GET",t)},t.prototype.createToken=function(t,n,r){var i,u;return null==t&&(t="day"),null==r&&e([t,n],s)&&(s(t)?(i=[null,null,t],t=i[0],n=i[1],r=i[2]):s(n)&&(u=[null,n],n=u[0],r=u[1])),a(r,this.service.post("user/tokens",{type:t,message:n}).then(o("token")))},t.prototype.fetchCurrentTokens=function(t){return a(t,this.service.get("user/tokens").then(o("tokens")))},t.prototype.revokeAllTokens=function(t){return a(t,this.service.makeRequest("DELETE","user/tokens"))},t.prototype.revokeToken=function(t,e){return a(e,this.service.makeRequest("DELETE","user/tokens/"+t))},t}()}).call(this)},{"./util":23}],23:[function(t,e,n){(function(){var e,r,i,o,s,a,u,h,l,c,f,p,d,y,g,v,m,b,w,_,E=[].slice,S=[].indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1},T={}.hasOwnProperty;e=t("./promise"),m=n,m.defer=function(){var t;return t={},t.promise=new e(function(e,n){return t.resolve=e,t.reject=n}),t},s=function(t){return encodeURIComponent(String(t))},v=function(t){var e;return function(){var n,r,i;for(i=[],n=0,r=t.length;n<r;n++)e=t[n],i.push(e.map(s).join("="));return i}().join("&")},m.querystring=function(t){var e,n,r,i,o,s;if(!t)return"";if(d(t))r=t.slice();else{r=[];for(e in t)s=t[e],d(s)?(i=function(){var t,n,r;for(r=[],t=0,n=s.length;t<n;t++)o=s[t],r.push([e,o]);return r}(),r=r.concat(i)):r.push([e,s])}return v(function(){var t,e,i;for(i=[],t=0,e=r.length;t<e;t++)n=r[t],null!=n[1]&&i.push(n);return i}())},m.curry=o=function(){var t,e;return e=arguments[0],t=2<=arguments.length?E.call(arguments,1):[],function(){var n;return n=1<=arguments.length?E.call(arguments,0):[],e.apply(null,t.concat(n))}},m.error=u=function(t){return new e(function(e,n){return n(new Error(t))})},m.success=b=function(t){return new e(function(e,n){return e(t)})},m.parallel=function(){var t;return t=1<=arguments.length?E.call(arguments,0):[],1===t.length&&!t[0].then&&t[0].length?e.all(t[0]):e.all(t)},m.withCB=function(){var t,e,n,r,i,s,a,u;for(e=2<=arguments.length?E.call(arguments,0,s=arguments.length-1):(s=0,[]),i=arguments[s++],a=0,u=e.length;a<u;a++)t=e[a],null!=t&&(r=o(t,null),n=t,i.then(r,n));return i},m.fold=l=function(t){return function(e,n){var r,i,o;if(1===arguments.length&&(n=(null!=e?e.slice():void 0)||e,e=(null!=n?n.shift():void 0)||{}),null==n)throw new Error("xs is null");if(null!=n.reduce)return n.reduce(t,e);i=e;for(r in n)o=n[r],i=null!=i?t(i,r,o):{k:o};return i}},m.take=function(t){return function(e){return null!=t?e.slice(0,+(t-1)+1||9e9):e.slice()}},m.filter=function(t){return function(e){var n,r,i,o;for(o=[],r=0,i=e.length;r<i;r++)n=e[r],t(n)&&o.push(n);return o}},m.uniqBy=function(t,e){var n,r,i,s,a,u;if(1===arguments.length)return o(m.uniqBy,t);if(r=[],i=[],null==e)return i;for(a=0,u=e.length;a<u;a++)s=e[a],n=t(s),S.call(r,n)<0&&(r.push(n),i.push(s));return i},m.find=function(t,e){var n,r,i;if(1===arguments.length)return e=t,function(t){return m.find(t,e)};for(r=0,i=t.length;r<i;r++)if(n=t[r],e(n))return n;return null},d=null!=(_=Array.isArray)?_:function(t){return null!=(null!=t?t.splice:void 0)&&null!=(null!=t?t.push:void 0)&&null!=(null!=t?t.pop:void 0)&&null!=(null!=t?t.slice:void 0)},m.isArray=d,m.isFunction="function"!=typeof/./?function(t){return"function"==typeof t}:function(t){return null!=t&&null!=t.call&&null!=t.apply&&"[object Function]"===t.toString()},a={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&apos;"},m.escape=function(t){var e,n,r,i,o,s;if(null==t)return"";for(i=String(t).replace(/[&<>"']/g,function(t){return a[t]}),r=[],n=o=0,s=i.length;0<=s?o<=s:o>=s;n=0<=s?++o:--o)e=i.charCodeAt(n),e>256?r.push("&#"+e+";"):r.push(i.charAt(n));return r.join("")},m.omap=function(t){var e;return e=l(function(e,n,r){var i,o,s;return s=t(n,r),i=s[0],o=s[1],d(o)&&(o=o.slice()),e[i]=o,e}),function(t){return e({},t)}},m.copy=m.omap(function(t,e){return[t,e]}),m.partition=function(t){return function(e){var n;return(n=l(function(e,n){var r,i;return i=e[0],r=e[1],t(n)?[i.concat([n]),r]:[i,r.concat([n])]}))([[],[]],e)}},m.merge=function(t,e){return extend(extend({},t),e)},m.extend=function(t,e){var n,r,i;i=[];for(n in e)r=e[n],i.push(t[n]=r);return i},m.id=c=function(t){return t},m.concatMap=function(t){return function(e){var n,r,i,o,s;for(r=void 0,o=0,s=e.length;o<s;o++)i=e[o],n=t(i),r=void 0===r?n:"number"==typeof r?r+n:null!=r.concat?r.concat(n):y(r,n);return r}},m.map=function(t){return f("map",t)},i=l(function(t,e){return function(){var n;return n=1<=arguments.length?E.call(arguments,0):[],t(e.apply(null,n))}}),m.compose=function(){var t;return t=1<=arguments.length?E.call(arguments,0):[],i(t)},m.flatMap=m.concatMap,m.difference=function(t,e){var n,r,i,o;for(o=[],r=0,i=t.length;r<i;r++)n=t[r],S.call(e,n)<0&&o.push(n);return o},m.stringList=function(t){return"string"==typeof t?[t]:t},m.flatten=h=function(){var t,e,n,r,i,o,s,a,u;for(n=1<=arguments.length?E.call(arguments,0):[],t=[],i=0,s=n.length;i<s;i++)if(e=n[i],d(e))for(u=h.apply(null,e),o=0,a=u.length;o<a;o++)r=u[o],t.push(r);else t.push(e);return t},m.sum=m.concatMap(c),m.merge=y=function(){var t,e,n,r,i,o,s;for(r=1<=arguments.length?E.call(arguments,0):[],e={},o=0,s=r.length;o<s;o++){n=r[o];for(t in n)T.call(n,t)&&(i=n[t],e[t]=i)}return e},m.any=function(t,e){var n,r,i;for(null==e&&(e=c),r=0,i=t.length;r<i;r++)if(n=t[r],e(n))return!0;return!1},m.invoke=f=function(){var t,e;return e=arguments[0],t=2<=arguments.length?E.call(arguments,1):[],p(e,t)},m.invokeWith=p=function(t,e,n){return null==e&&(e=[]),null==n&&(n=null),function(r){if(null==r)throw new Error('Cannot call method "'+t+'" of null');if(r[t])return r[t].apply(n||r,e);throw new Error('Cannot call undefined method "'+t+" of "+r)}},m.get=function(t){return function(e){return e[t]}},m.set=function(t,e){return function(n){var r,i;if(2===arguments.length)n[t]=e;else for(r in t)T.call(t,r)&&(i=t[r],n[r]=i);return n}},r=function(t,e){return"This service requires a service at version "+t+" or above. This one is at "+e},m.REQUIRES_VERSION=function(t,e,n){return t.fetchVersion().then(function(t){return t>=e?n():u(r(e,t))})},m.dejoin=function(t){var e,n,r,i,o;for(o=t.views,r=0,i=o.length;r<i;r++)n=o[r],e=n.split("."),e.length>2&&t.addJoin(e.slice(1,-1).join("."));return t},w=l(function(t,e){return t.then(e)}),m.sequence=function(){var t;return t=1<=arguments.length?E.call(arguments,0):[],w(b(),t)},g=l(function(t,e){var n,r;if(n=e[0],r=e[1],null!=t[n])throw new Error("Duplicate key: "+n);return t[n]=r,t}),m.pairsToObj=function(t){return g({},t)}}).call(this)},{"./promise":17}],24:[function(t,e,n){(function(){n.VERSION="3.16.0"}).call(this)},{}],25:[function(t,e,n){(function(){var e,r;e=t("xmldom").DOMParser,r=function(t){return t=t.replace(/^\s*/g,""),t=t.replace(/\s$/g,""),0===t.length?t:">"!==t[t.length-1]?t+">":t},n.parse=function(t){var n,i;if("string"!=typeof t)throw new Error("Expected a string - got "+t);if(t=r(t),!t)throw new Error("Expected content - got empty string");if(n=function(){try{return i=new e,i.parseFromString(t,"text/xml")}catch(n){}}(),!n||!n.documentElement||n.getElementsByTagName("parsererror").length)throw new Error("Invalid XML: "+t);return n}}).call(this)},{xmldom:20}],26:[function(t,e,n){(function(r,i){function o(t,e){return"string"==typeof t?e==t:t&&"function"==typeof t.exec?t.exec(e):"boolean"==typeof t?t:"function"==typeof t&&t(e)}var s=t("jsonparse"),a=t("through");n.parse=function(t,e){var n=new s,r=a(function(t){"string"==typeof t&&(t=new i(t)),n.write(t)},function(t){t&&r.write(t),r.queue(null)});"string"==typeof t&&(t=t.split(".").map(function(t){return"*"===t||(""===t?{recurse:!0}:t)}));var u=0;return t&&t.length||(t=null),n.onValue=function(n){if(this.root||(r.root=n),t){for(var i=0,s=0;i<t.length;){var a,h=t[i];if(s++,h&&!h.recurse){if(a=s===this.stack.length?this:this.stack[s],!a)return;if(!o(h,a.key))return;i++}else{i++;var l=t[i];if(!l)return;for(;;){if(a=s===this.stack.length?this:this.stack[s],!a)return;if(o(l,a.key)){i++;break}s++}}}if(s===this.stack.length){u++;var c=this.stack.slice(1).map(function(t){return t.key}).concat([this.key]),f=this.value[this.key];null!=f&&null!=(f=e?e(f,c):f)&&r.queue(f),delete this.value[this.key]}}},n._onToken=n.onToken,n.onToken=function(e,i){n._onToken(e,i),0===this.stack.length&&r.root&&(t||r.queue(r.root),r.emit("root",r.root,u),u=0,r.root=null)},n.onError=function(t){r.emit("error",t)},r},n.stringify=function(t,e,n,r){r=r||0,t===!1?(t="",e="\n",n=""):null==t&&(t="[\n",e="\n,\n",n="\n]\n");var i,o=!0,s=!1;return i=a(function(n){s=!0;var a=JSON.stringify(n,null,r);o?(o=!1,i.queue(t+a)):i.queue(e+a)},function(e){s||i.queue(t),i.queue(n),i.queue(null)})},n.stringifyObject=function(t,e,n,r){r=r||0,t===!1?(t="",e="\n",n=""):null==t&&(t="{\n",e="\n,\n",n="\n}\n");var i=!0,o=!1;return stream=a(function(n){o=!0;var s=JSON.stringify(n[0])+":"+JSON.stringify(n[1],null,r);i?(i=!1,this.queue(t+s)):this.queue(e+s)},function(e){o||this.queue(t),this.queue(n),this.queue(null)}),stream},e.parent||"browser"===r.title||r.stdin.pipe(n.parse(r.argv[2])).pipe(n.stringify("[",",\n","]\n",2)).pipe(r.stdout)}).call(this,t("_process"),t("buffer").Buffer)},{_process:32,buffer:6,jsonparse:28,through:58}],27:[function(t,e,n){(function(n,r,i){(function(){"use strict";function o(t){return"function"==typeof t||"object"==typeof t&&null!==t}function s(t){return"function"==typeof t}function a(t){return"object"==typeof t&&null!==t}function u(t){G=t}function h(t){Y=t}function l(){var t=n.nextTick,e=n.versions.node.match(/^(?:(\d+)\.)?(?:(\d+)\.)?(\*|\d+)$/);return Array.isArray(e)&&"0"===e[1]&&"10"===e[2]&&(t=i),function(){t(y)}}function c(){return function(){X(y)}}function f(){var t=0,e=new Z(y),n=document.createTextNode("");return e.observe(n,{characterData:!0}),function(){n.data=t=++t%2}}function p(){var t=new MessageChannel;return t.port1.onmessage=y,function(){t.port2.postMessage(0)}}function d(){return function(){setTimeout(y,1)}}function y(){for(var t=0;t<K;t+=2){var e=nt[t],n=nt[t+1];e(n),nt[t]=void 0,nt[t+1]=void 0}K=0}function g(){try{var e=t,n=e("vertx");return X=n.runOnLoop||n.runOnContext,c()}catch(r){return d()}}function v(){}function m(){return new TypeError("You cannot resolve a promise with itself")}function b(){return new TypeError("A promises callback cannot return that same promise.")}function w(t){try{return t.then}catch(e){return st.error=e,st}}function _(t,e,n,r){try{t.call(e,n,r)}catch(i){return i}}function E(t,e,n){Y(function(t){var r=!1,i=_(n,e,function(n){r||(r=!0,e!==n?O(t,n):R(t,n))},function(e){r||(r=!0,k(t,e))},"Settle: "+(t._label||" unknown promise"));!r&&i&&(r=!0,k(t,i))},t)}function S(t,e){e._state===it?R(t,e._result):e._state===ot?k(t,e._result):L(e,void 0,function(e){O(t,e)},function(e){k(t,e)})}function T(t,e){if(e.constructor===t.constructor)S(t,e);else{var n=w(e);n===st?k(t,st.error):void 0===n?R(t,e):s(n)?E(t,e,n):R(t,e)}}function O(t,e){t===e?k(t,m()):o(e)?T(t,e):R(t,e)}function x(t){t._onerror&&t._onerror(t._result),C(t)}function R(t,e){t._state===rt&&(t._result=e,t._state=it,0!==t._subscribers.length&&Y(C,t))}function k(t,e){t._state===rt&&(t._state=ot,t._result=e,Y(x,t))}function L(t,e,n,r){var i=t._subscribers,o=i.length;t._onerror=null,i[o]=e,i[o+it]=n,i[o+ot]=r,0===o&&t._state&&Y(C,t)}function C(t){var e=t._subscribers,n=t._state;if(0!==e.length){for(var r,i,o=t._result,s=0;s<e.length;s+=3)r=e[s],i=e[s+n],r?I(n,r,i,o):i(o);t._subscribers.length=0}}function A(){this.error=null}function j(t,e){try{return t(e)}catch(n){return at.error=n,at}}function I(t,e,n,r){var i,o,a,u,h=s(n);if(h){if(i=j(n,r),i===at?(u=!0,o=i.error,i=null):a=!0,e===i)return void k(e,b())}else i=r,a=!0;e._state!==rt||(h&&a?O(e,i):u?k(e,o):t===it?R(e,i):t===ot&&k(e,i))}function N(t,e){try{e(function(e){O(t,e)},function(e){k(t,e)})}catch(n){k(t,n)}}function M(t,e){var n=this;n._instanceConstructor=t,n.promise=new t(v),n._validateInput(e)?(n._input=e,n.length=e.length,n._remaining=e.length,n._init(),0===n.length?R(n.promise,n._result):(n.length=n.length||0,n._enumerate(),0===n._remaining&&R(n.promise,n._result))):k(n.promise,n._validationError())}function q(t){return new ut(this,t).promise}function P(t){function e(t){O(i,t)}function n(t){k(i,t)}var r=this,i=new r(v);if(!z(t))return k(i,new TypeError("You must pass an array to race.")),i;for(var o=t.length,s=0;i._state===rt&&s<o;s++)L(r.resolve(t[s]),void 0,e,n);return i}function U(t){var e=this;if(t&&"object"==typeof t&&t.constructor===e)return t;var n=new e(v);return O(n,t),n}function B(t){var e=this,n=new e(v);return k(n,t),n}function D(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function F(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function V(t){this._id=pt++,this._state=void 0,this._result=void 0,this._subscribers=[],v!==t&&(s(t)||D(),this instanceof V||F(),N(this,t))}function H(){var t;if("undefined"!=typeof r)t=r;else if("undefined"!=typeof self)t=self;else try{t=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}var n=t.Promise;n&&"[object Promise]"===Object.prototype.toString.call(n.resolve())&&!n.cast||(t.Promise=dt)}var W;W=Array.isArray?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)};var X,G,J,z=W,K=0,Y=({}.toString,function(t,e){nt[K]=t,nt[K+1]=e,K+=2,2===K&&(G?G(y):J())}),Q="undefined"!=typeof window?window:void 0,$=Q||{},Z=$.MutationObserver||$.WebKitMutationObserver,tt="undefined"!=typeof n&&"[object process]"==={}.toString.call(n),et="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,nt=new Array(1e3);J=tt?l():Z?f():et?p():void 0===Q&&"function"==typeof t?g():d();var rt=void 0,it=1,ot=2,st=new A,at=new A;M.prototype._validateInput=function(t){return z(t)},M.prototype._validationError=function(){return new Error("Array Methods must be provided an Array")},M.prototype._init=function(){this._result=new Array(this.length)};var ut=M;M.prototype._enumerate=function(){for(var t=this,e=t.length,n=t.promise,r=t._input,i=0;n._state===rt&&i<e;i++)t._eachEntry(r[i],i)},M.prototype._eachEntry=function(t,e){var n=this,r=n._instanceConstructor;a(t)?t.constructor===r&&t._state!==rt?(t._onerror=null,n._settledAt(t._state,e,t._result)):n._willSettleAt(r.resolve(t),e):(n._remaining--,n._result[e]=t)},M.prototype._settledAt=function(t,e,n){var r=this,i=r.promise;i._state===rt&&(r._remaining--,t===ot?k(i,n):r._result[e]=n),0===r._remaining&&R(i,r._result)},M.prototype._willSettleAt=function(t,e){var n=this;L(t,void 0,function(t){n._settledAt(it,e,t)},function(t){n._settledAt(ot,e,t)})};var ht=q,lt=P,ct=U,ft=B,pt=0,dt=V;V.all=ht,V.race=lt,V.resolve=ct,V.reject=ft,V._setScheduler=u,V._setAsap=h,V._asap=Y,V.prototype={constructor:V,then:function(t,e){var n=this,r=n._state;if(r===it&&!t||r===ot&&!e)return this;var i=new this.constructor(v),o=n._result;if(r){var s=arguments[r-1];Y(function(){I(r,i,s,o)})}else L(n,i,t,e);return i},"catch":function(t){return this.then(null,t)}};var yt=H,gt={Promise:dt,polyfill:yt};"function"==typeof define&&define.amd?define(function(){return gt}):"undefined"!=typeof e&&e.exports?e.exports=gt:"undefined"!=typeof this&&(this.ES6Promise=gt),yt()}).call(this)}).call(this,t("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},t("timers").setImmediate)},{_process:32,timers:59}],28:[function(t,e,n){(function(t){function n(t){for(var e=Object.keys(i),n=0,r=e.length;n<r;n++){var o=e[n];if(i[o]===t)return o}return t&&"0x"+t.toString(16)}function r(){this.tState=g,this.value=void 0,this.string=void 0,this.unicode=void 0,this.negative=void 0,this.magnatude=void 0,this.position=void 0,this.exponent=void 0,this.negativeExponent=void 0,this.key=void 0,this.mode=void 0,this.stack=[],this.state=F,this.bytes_remaining=0,this.bytes_in_sequence=0,this.temp_buffs={2:new t(2),3:new t(3),4:new t(4)}}var i={},o=i.LEFT_BRACE=1,s=i.RIGHT_BRACE=2,a=i.LEFT_BRACKET=3,u=i.RIGHT_BRACKET=4,h=i.COLON=5,l=i.COMMA=6,c=i.TRUE=7,f=i.FALSE=8,p=i.NULL=9,d=i.STRING=10,y=i.NUMBER=11,g=i.START=17,v=i.TRUE1=33,m=i.TRUE2=34,b=i.TRUE3=35,w=i.FALSE1=49,_=i.FALSE2=50,E=i.FALSE3=51,S=i.FALSE4=52,T=i.NULL1=65,O=i.NULL3=66,x=i.NULL2=67,R=i.NUMBER1=81,k=i.NUMBER2=82,L=i.NUMBER3=83,C=i.NUMBER4=84,A=i.NUMBER5=85,j=i.NUMBER6=86,I=i.NUMBER7=87,N=i.NUMBER8=88,M=i.STRING1=97,q=i.STRING2=98,P=i.STRING3=99,U=i.STRING4=100,B=i.STRING5=101,D=i.STRING6=102,F=i.VALUE=113,V=i.KEY=114,H=i.OBJECT=129,W=i.ARRAY=130,X=r.prototype;X.charError=function(t,e){this.onError(new Error("Unexpected "+JSON.stringify(String.fromCharCode(t[e]))+" at position "+e+" in state "+n(this.tState)))},X.onError=function(t){throw t},X.write=function(e){"string"==typeof e&&(e=new t(e));for(var n,r=0,i=e.length;r<i;r++)if(this.tState===g)n=e[r],123===n?this.onToken(o,"{"):125===n?this.onToken(s,"}"):91===n?this.onToken(a,"["):93===n?this.onToken(u,"]"):58===n?this.onToken(h,":"):44===n?this.onToken(l,","):116===n?this.tState=v:102===n?this.tState=w:110===n?this.tState=T:34===n?(this.string="",this.tState=M):45===n?(this.negative=!0,this.tState=R):48===n?(this.magnatude=0,this.tState=k):n>48&&n<64?(this.magnatude=n-48,this.tState=L):32===n||9===n||10===n||13===n||this.charError(e,r);else if(this.tState===M)if(n=e[r],this.bytes_remaining>0){for(var F=0;F<this.bytes_remaining;F++)this.temp_buffs[this.bytes_in_sequence][this.bytes_in_sequence-this.bytes_remaining+F]=e[F];this.string+=this.temp_buffs[this.bytes_in_sequence].toString(),this.bytes_in_sequence=this.bytes_remaining=0,r=r+F-1}else if(0===this.bytes_remaining&&n>=128)if(n>=194&&n<=223&&(this.bytes_in_sequence=2),n>=224&&n<=239&&(this.bytes_in_sequence=3),n>=240&&n<=244&&(this.bytes_in_sequence=4),this.bytes_in_sequence+r>e.length){for(var V=0;V<=e.length-1-r;V++)this.temp_buffs[this.bytes_in_sequence][V]=e[r+V];this.bytes_remaining=r+this.bytes_in_sequence-e.length,r=e.length-1}else this.string+=e.slice(r,r+this.bytes_in_sequence).toString(),r=r+this.bytes_in_sequence-1;else 34===n?(this.tState=g,this.onToken(d,this.string),this.string=void 0):92===n?this.tState=q:n>=32?this.string+=String.fromCharCode(n):this.charError(e,r);else this.tState===q?(n=e[r],34===n?(this.string+='"',this.tState=M):92===n?(this.string+="\\",this.tState=M):47===n?(this.string+="/",this.tState=M):98===n?(this.string+="\b",this.tState=M):102===n?(this.string+="\f",this.tState=M):110===n?(this.string+="\n",this.tState=M):114===n?(this.string+="\r",this.tState=M):116===n?(this.string+="\t",this.tState=M):117===n?(this.unicode="",this.tState=P):this.charError(e,r)):this.tState===P||this.tState===U||this.tState===B||this.tState===D?(n=e[r],n>=48&&n<64||n>64&&n<=70||n>96&&n<=102?(this.unicode+=String.fromCharCode(n),this.tState++===D&&(this.string+=String.fromCharCode(parseInt(this.unicode,16)),this.unicode=void 0,this.tState=M)):this.charError(e,r)):this.tState===R?(n=e[r],48===n?(this.magnatude=0,this.tState=k):n>48&&n<64?(this.magnatude=n-48,this.tState=L):this.charError(e,r)):this.tState===k?(n=e[r],46===n?(this.position=.1,this.tState=C):101===n||69===n?(this.exponent=0,this.tState=j):(this.tState=g,this.onToken(y,0),this.magnatude=void 0,this.negative=void 0,r--)):this.tState===L?(n=e[r],46===n?(this.position=.1,this.tState=C):101===n||69===n?(this.exponent=0,this.tState=j):n>=48&&n<64?this.magnatude=10*this.magnatude+n-48:(this.tState=g,this.negative&&(this.magnatude=-this.magnatude,this.negative=void 0),this.onToken(y,this.magnatude),this.magnatude=void 0,r--)):this.tState===C?(n=e[r],n>=48&&n<64?(this.magnatude+=this.position*(n-48),this.position/=10,this.tState=A):this.charError(e,r)):this.tState===A?(n=e[r],n>=48&&n<64?(this.magnatude+=this.position*(n-48),this.position/=10):101===n||69===n?(this.exponent=0,this.tState=j):(this.tState=g,this.negative&&(this.magnatude=-this.magnatude,this.negative=void 0),this.onToken(y,this.negative?-this.magnatude:this.magnatude),this.magnatude=void 0,this.position=void 0,r--)):this.tState===j?(n=e[r],43===n||45===n?(45===n&&(this.negativeExponent=!0),this.tState=I):n>=48&&n<64?(this.exponent=10*this.exponent+(n-48),this.tState=N):this.charError(e,r)):this.tState===I?(n=e[r],n>=48&&n<64?(this.exponent=10*this.exponent+(n-48),this.tState=N):this.charError(e,r)):this.tState===N?(n=e[r],n>=48&&n<64?this.exponent=10*this.exponent+(n-48):(this.negativeExponent&&(this.exponent=-this.exponent,this.negativeExponent=void 0),this.magnatude*=Math.pow(10,this.exponent),this.exponent=void 0,this.negative&&(this.magnatude=-this.magnatude,this.negative=void 0),this.tState=g,this.onToken(y,this.magnatude),this.magnatude=void 0,r--)):this.tState===v?114===e[r]?this.tState=m:this.charError(e,r):this.tState===m?117===e[r]?this.tState=b:this.charError(e,r):this.tState===b?101===e[r]?(this.tState=g,this.onToken(c,!0)):this.charError(e,r):this.tState===w?97===e[r]?this.tState=_:this.charError(e,r):this.tState===_?108===e[r]?this.tState=E:this.charError(e,r):this.tState===E?115===e[r]?this.tState=S:this.charError(e,r):this.tState===S?101===e[r]?(this.tState=g,this.onToken(f,!1)):this.charError(e,r):this.tState===T?117===e[r]?this.tState=O:this.charError(e,r):this.tState===O?108===e[r]?this.tState=x:this.charError(e,r):this.tState===x&&(108===e[r]?(this.tState=g,this.onToken(p,null)):this.charError(e,r))},X.onToken=function(t,e){},X.parseError=function(t,e){this.onError(new Error("Unexpected "+n(t)+(e?"("+JSON.stringify(e)+")":"")+" in state "+n(this.state)))},X.onError=function(t){throw t},X.push=function(){this.stack.push({value:this.value,key:this.key,mode:this.mode})},X.pop=function(){var t=this.value,e=this.stack.pop();this.value=e.value,this.key=e.key,this.mode=e.mode,this.emit(t),this.mode||(this.state=F)},X.emit=function(t){this.mode&&(this.state=l),this.onValue(t)},X.onValue=function(t){},X.onToken=function(t,e){this.state===F?t===d||t===y||t===c||t===f||t===p?(this.value&&(this.value[this.key]=e),this.emit(e)):t===o?(this.push(),this.value?this.value=this.value[this.key]={}:this.value={},this.key=void 0,this.state=V,this.mode=H):t===a?(this.push(),this.value?this.value=this.value[this.key]=[]:this.value=[],this.key=0,this.mode=W,this.state=F):t===s?this.mode===H?this.pop():this.parseError(t,e):t===u&&this.mode===W?this.pop():this.parseError(t,e):this.state===V?t===d?(this.key=e,this.state=h):t===s?this.pop():this.parseError(t,e):this.state===h?t===h?this.state=F:this.parseError(t,e):this.state===l?t===l?this.mode===W?(this.key++,this.state=F):this.mode===H&&(this.state=V):t===u&&this.mode===W||t===s&&this.mode===H?this.pop():this.parseError(t,e):this.parseError(t,e)},e.exports=r}).call(this,t("buffer").Buffer)},{buffer:6}],29:[function(t,e,n){"function"==typeof Object.create?e.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(t,e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}},{}],30:[function(t,e,n){function r(t){return!!t.constructor&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)}function i(t){return"function"==typeof t.readFloatLE&&"function"==typeof t.slice&&r(t.slice(0,0))}e.exports=function(t){return null!=t&&(r(t)||i(t)||!!t._isBuffer)}},{}],31:[function(t,e,n){(function(t){"use strict";function n(e,n,r,i){if("function"!=typeof e)throw new TypeError('"callback" argument must be a function');var o,s,a=arguments.length;switch(a){case 0:case 1:return t.nextTick(e);case 2:return t.nextTick(function(){e.call(null,n)});case 3:return t.nextTick(function(){e.call(null,n,r)});case 4:return t.nextTick(function(){e.call(null,n,r,i)});default:for(o=new Array(a-1),s=0;s<o.length;)o[s++]=arguments[s];return t.nextTick(function(){e.apply(null,o)})}}!t.version||0===t.version.indexOf("v0.")||0===t.version.indexOf("v1.")&&0!==t.version.indexOf("v1.8.")?e.exports={nextTick:n}:e.exports=t}).call(this,t("_process"))},{_process:32}],32:[function(t,e,n){function r(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function o(t){if(c===setTimeout)return setTimeout(t,0);if((c===r||!c)&&setTimeout)return c=setTimeout,setTimeout(t,0);try{return c(t,0)}catch(e){try{return c.call(null,t,0)}catch(e){return c.call(this,t,0)}}}function s(t){if(f===clearTimeout)return clearTimeout(t);if((f===i||!f)&&clearTimeout)return f=clearTimeout,clearTimeout(t);try{return f(t)}catch(e){try{return f.call(null,t)}catch(e){return f.call(this,t)}}}function a(){g&&d&&(g=!1,d.length?y=d.concat(y):v=-1,y.length&&u())}function u(){if(!g){var t=o(a);g=!0;for(var e=y.length;e;){for(d=y,y=[];++v<e;)d&&d[v].run();v=-1,e=y.length}d=null,g=!1,s(t)}}function h(t,e){this.fun=t,this.array=e}function l(){}var c,f,p=e.exports={};!function(){try{c="function"==typeof setTimeout?setTimeout:r}catch(t){c=r}try{f="function"==typeof clearTimeout?clearTimeout:i}catch(t){f=i}}();var d,y=[],g=!1,v=-1;p.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];y.push(new h(t,e)),1!==y.length||g||o(u)},h.prototype.run=function(){this.fun.apply(null,this.array)},p.title="browser",p.browser=!0,p.env={},p.argv=[],p.version="",p.versions={},p.on=l,p.addListener=l,p.once=l,p.off=l,p.removeListener=l,p.removeAllListeners=l,p.emit=l,p.prependListener=l,p.prependOnceListener=l,p.listeners=function(t){return[]},p.binding=function(t){throw new Error("process.binding is not supported")},p.cwd=function(){return"/"},p.chdir=function(t){throw new Error("process.chdir is not supported")},p.umask=function(){return 0}},{}],33:[function(t,e,n){(function(t){!function(r){function i(t){throw new RangeError(I[t])}function o(t,e){for(var n=t.length,r=[];n--;)r[n]=e(t[n]);return r}function s(t,e){var n=t.split("@"),r="";n.length>1&&(r=n[0]+"@",t=n[1]),t=t.replace(j,".");var i=t.split("."),s=o(i,e).join(".");return r+s}function a(t){for(var e,n,r=[],i=0,o=t.length;i<o;)e=t.charCodeAt(i++),e>=55296&&e<=56319&&i<o?(n=t.charCodeAt(i++),56320==(64512&n)?r.push(((1023&e)<<10)+(1023&n)+65536):(r.push(e),i--)):r.push(e);return r}function u(t){return o(t,function(t){var e="";return t>65535&&(t-=65536,e+=q(t>>>10&1023|55296),t=56320|1023&t),e+=q(t)}).join("")}function h(t){return t-48<10?t-22:t-65<26?t-65:t-97<26?t-97:E}function l(t,e){return t+22+75*(t<26)-((0!=e)<<5)}function c(t,e,n){var r=0;for(t=n?M(t/x):t>>1,t+=M(t/e);t>N*T>>1;r+=E)t=M(t/N);return M(r+(N+1)*t/(t+O))}function f(t){var e,n,r,o,s,a,l,f,p,d,y=[],g=t.length,v=0,m=k,b=R;for(n=t.lastIndexOf(L),n<0&&(n=0),r=0;r<n;++r)t.charCodeAt(r)>=128&&i("not-basic"),y.push(t.charCodeAt(r));for(o=n>0?n+1:0;o<g;){for(s=v,a=1,l=E;o>=g&&i("invalid-input"),f=h(t.charCodeAt(o++)),(f>=E||f>M((_-v)/a))&&i("overflow"),v+=f*a,p=l<=b?S:l>=b+T?T:l-b,!(f<p);l+=E)d=E-p,a>M(_/d)&&i("overflow"),a*=d;e=y.length+1,b=c(v-s,e,0==s),M(v/e)>_-m&&i("overflow"),m+=M(v/e),v%=e,y.splice(v++,0,m)}return u(y)}function p(t){var e,n,r,o,s,u,h,f,p,d,y,g,v,m,b,w=[];for(t=a(t),g=t.length,e=k,n=0,s=R,u=0;u<g;++u)y=t[u],y<128&&w.push(q(y));for(r=o=w.length,o&&w.push(L);r<g;){for(h=_,u=0;u<g;++u)y=t[u],y>=e&&y<h&&(h=y);for(v=r+1,h-e>M((_-n)/v)&&i("overflow"),n+=(h-e)*v,e=h,u=0;u<g;++u)if(y=t[u],y<e&&++n>_&&i("overflow"),y==e){for(f=n,p=E;d=p<=s?S:p>=s+T?T:p-s,!(f<d);p+=E)b=f-d,m=E-d,w.push(q(l(d+b%m,0))),f=M(b/m);w.push(q(l(f,0))),s=c(n,v,r==o),n=0,++r}++n,++e}return w.join("")}function d(t){return s(t,function(t){return C.test(t)?f(t.slice(4).toLowerCase()):t})}function y(t){return s(t,function(t){return A.test(t)?"xn--"+p(t):t})}var g="object"==typeof n&&n&&!n.nodeType&&n,v="object"==typeof e&&e&&!e.nodeType&&e,m="object"==typeof t&&t;m.global!==m&&m.window!==m&&m.self!==m||(r=m);var b,w,_=2147483647,E=36,S=1,T=26,O=38,x=700,R=72,k=128,L="-",C=/^xn--/,A=/[^\x20-\x7E]/,j=/[\x2E\u3002\uFF0E\uFF61]/g,I={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},N=E-S,M=Math.floor,q=String.fromCharCode;if(b={version:"1.4.1",ucs2:{decode:a,encode:u},decode:f,encode:p,toASCII:y,toUnicode:d},"function"==typeof define&&"object"==typeof define.amd&&define.amd)define("punycode",function(){return b});else if(g&&v)if(e.exports==g)v.exports=b;else for(w in b)b.hasOwnProperty(w)&&(g[w]=b[w]);else r.punycode=b}(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});
},{}],34:[function(t,e,n){"use strict";function r(t,e){return Object.prototype.hasOwnProperty.call(t,e)}e.exports=function(t,e,n,o){e=e||"&",n=n||"=";var s={};if("string"!=typeof t||0===t.length)return s;var a=/\+/g;t=t.split(e);var u=1e3;o&&"number"==typeof o.maxKeys&&(u=o.maxKeys);var h=t.length;u>0&&h>u&&(h=u);for(var l=0;l<h;++l){var c,f,p,d,y=t[l].replace(a,"%20"),g=y.indexOf(n);g>=0?(c=y.substr(0,g),f=y.substr(g+1)):(c=y,f=""),p=decodeURIComponent(c),d=decodeURIComponent(f),r(s,p)?i(s[p])?s[p].push(d):s[p]=[s[p],d]:s[p]=d}return s};var i=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)}},{}],35:[function(t,e,n){"use strict";function r(t,e){if(t.map)return t.map(e);for(var n=[],r=0;r<t.length;r++)n.push(e(t[r],r));return n}var i=function(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}};e.exports=function(t,e,n,a){return e=e||"&",n=n||"=",null===t&&(t=void 0),"object"==typeof t?r(s(t),function(s){var a=encodeURIComponent(i(s))+n;return o(t[s])?r(t[s],function(t){return a+encodeURIComponent(i(t))}).join(e):a+encodeURIComponent(i(t[s]))}).join(e):a?encodeURIComponent(i(a))+n+encodeURIComponent(i(t)):""};var o=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},s=Object.keys||function(t){var e=[];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.push(n);return e}},{}],36:[function(t,e,n){"use strict";n.decode=n.parse=t("./decode"),n.encode=n.stringify=t("./encode")},{"./decode":34,"./encode":35}],37:[function(t,e,n){e.exports=t("./lib/_stream_duplex.js")},{"./lib/_stream_duplex.js":38}],38:[function(t,e,n){"use strict";function r(t){return this instanceof r?(h.call(this,t),l.call(this,t),t&&t.readable===!1&&(this.readable=!1),t&&t.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,t&&t.allowHalfOpen===!1&&(this.allowHalfOpen=!1),void this.once("end",i)):new r(t)}function i(){this.allowHalfOpen||this._writableState.ended||s.nextTick(o,this)}function o(t){t.end()}var s=t("process-nextick-args"),a=Object.keys||function(t){var e=[];for(var n in t)e.push(n);return e};e.exports=r;var u=t("core-util-is");u.inherits=t("inherits");var h=t("./_stream_readable"),l=t("./_stream_writable");u.inherits(r,h);for(var c=a(l.prototype),f=0;f<c.length;f++){var p=c[f];r.prototype[p]||(r.prototype[p]=l.prototype[p])}Object.defineProperty(r.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(r.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(t){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=t,this._writableState.destroyed=t)}}),r.prototype._destroy=function(t,e){this.push(null),this.end(),s.nextTick(e,t)}},{"./_stream_readable":40,"./_stream_writable":42,"core-util-is":8,inherits:29,"process-nextick-args":31}],39:[function(t,e,n){"use strict";function r(t){return this instanceof r?void i.call(this,t):new r(t)}e.exports=r;var i=t("./_stream_transform"),o=t("core-util-is");o.inherits=t("inherits"),o.inherits(r,i),r.prototype._transform=function(t,e,n){n(null,t)}},{"./_stream_transform":41,"core-util-is":8,inherits:29}],40:[function(t,e,n){(function(n,r){"use strict";function i(t){return P.from(t)}function o(t){return P.isBuffer(t)||t instanceof U}function s(t,e,n){return"function"==typeof t.prependListener?t.prependListener(e,n):void(t._events&&t._events[e]?N(t._events[e])?t._events[e].unshift(n):t._events[e]=[n,t._events[e]]:t.on(e,n))}function a(e,n){I=I||t("./_stream_duplex"),e=e||{};var r=n instanceof I;this.objectMode=!!e.objectMode,r&&(this.objectMode=this.objectMode||!!e.readableObjectMode);var i=e.highWaterMark,o=e.readableHighWaterMark,s=this.objectMode?16:16384;i||0===i?this.highWaterMark=i:r&&(o||0===o)?this.highWaterMark=o:this.highWaterMark=s,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new H,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(V||(V=t("string_decoder/").StringDecoder),this.decoder=new V(e.encoding),this.encoding=e.encoding)}function u(e){return I=I||t("./_stream_duplex"),this instanceof u?(this._readableState=new a(e,this),this.readable=!0,e&&("function"==typeof e.read&&(this._read=e.read),"function"==typeof e.destroy&&(this._destroy=e.destroy)),void q.call(this)):new u(e)}function h(t,e,n,r,o){var s=t._readableState;if(null===e)s.reading=!1,y(t,s);else{var a;o||(a=c(s,e)),a?t.emit("error",a):s.objectMode||e&&e.length>0?("string"==typeof e||s.objectMode||Object.getPrototypeOf(e)===P.prototype||(e=i(e)),r?s.endEmitted?t.emit("error",new Error("stream.unshift() after end event")):l(t,s,e,!0):s.ended?t.emit("error",new Error("stream.push() after EOF")):(s.reading=!1,s.decoder&&!n?(e=s.decoder.write(e),s.objectMode||0!==e.length?l(t,s,e,!1):m(t,s)):l(t,s,e,!1))):r||(s.reading=!1)}return f(s)}function l(t,e,n,r){e.flowing&&0===e.length&&!e.sync?(t.emit("data",n),t.read(0)):(e.length+=e.objectMode?1:n.length,r?e.buffer.unshift(n):e.buffer.push(n),e.needReadable&&g(t)),m(t,e)}function c(t,e){var n;return o(e)||"string"==typeof e||void 0===e||t.objectMode||(n=new TypeError("Invalid non-string/buffer chunk")),n}function f(t){return!t.ended&&(t.needReadable||t.length<t.highWaterMark||0===t.length)}function p(t){return t>=G?t=G:(t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++),t}function d(t,e){return t<=0||0===e.length&&e.ended?0:e.objectMode?1:t!==t?e.flowing&&e.length?e.buffer.head.data.length:e.length:(t>e.highWaterMark&&(e.highWaterMark=p(t)),t<=e.length?t:e.ended?e.length:(e.needReadable=!0,0))}function y(t,e){if(!e.ended){if(e.decoder){var n=e.decoder.end();n&&n.length&&(e.buffer.push(n),e.length+=e.objectMode?1:n.length)}e.ended=!0,g(t)}}function g(t){var e=t._readableState;e.needReadable=!1,e.emittedReadable||(F("emitReadable",e.flowing),e.emittedReadable=!0,e.sync?j.nextTick(v,t):v(t))}function v(t){F("emit readable"),t.emit("readable"),T(t)}function m(t,e){e.readingMore||(e.readingMore=!0,j.nextTick(b,t,e))}function b(t,e){for(var n=e.length;!e.reading&&!e.flowing&&!e.ended&&e.length<e.highWaterMark&&(F("maybeReadMore read 0"),t.read(0),n!==e.length);)n=e.length;e.readingMore=!1}function w(t){return function(){var e=t._readableState;F("pipeOnDrain",e.awaitDrain),e.awaitDrain&&e.awaitDrain--,0===e.awaitDrain&&M(t,"data")&&(e.flowing=!0,T(t))}}function _(t){F("readable nexttick read 0"),t.read(0)}function E(t,e){e.resumeScheduled||(e.resumeScheduled=!0,j.nextTick(S,t,e))}function S(t,e){e.reading||(F("resume read 0"),t.read(0)),e.resumeScheduled=!1,e.awaitDrain=0,t.emit("resume"),T(t),e.flowing&&!e.reading&&t.read(0)}function T(t){var e=t._readableState;for(F("flow",e.flowing);e.flowing&&null!==t.read(););}function O(t,e){if(0===e.length)return null;var n;return e.objectMode?n=e.buffer.shift():!t||t>=e.length?(n=e.decoder?e.buffer.join(""):1===e.buffer.length?e.buffer.head.data:e.buffer.concat(e.length),e.buffer.clear()):n=x(t,e.buffer,e.decoder),n}function x(t,e,n){var r;return t<e.head.data.length?(r=e.head.data.slice(0,t),e.head.data=e.head.data.slice(t)):r=t===e.head.data.length?e.shift():n?R(t,e):k(t,e),r}function R(t,e){var n=e.head,r=1,i=n.data;for(t-=i.length;n=n.next;){var o=n.data,s=t>o.length?o.length:t;if(i+=s===o.length?o:o.slice(0,t),t-=s,0===t){s===o.length?(++r,n.next?e.head=n.next:e.head=e.tail=null):(e.head=n,n.data=o.slice(s));break}++r}return e.length-=r,i}function k(t,e){var n=P.allocUnsafe(t),r=e.head,i=1;for(r.data.copy(n),t-=r.data.length;r=r.next;){var o=r.data,s=t>o.length?o.length:t;if(o.copy(n,n.length-t,0,s),t-=s,0===t){s===o.length?(++i,r.next?e.head=r.next:e.head=e.tail=null):(e.head=r,r.data=o.slice(s));break}++i}return e.length-=i,n}function L(t){var e=t._readableState;if(e.length>0)throw new Error('"endReadable()" called on non-empty stream');e.endEmitted||(e.ended=!0,j.nextTick(C,e,t))}function C(t,e){t.endEmitted||0!==t.length||(t.endEmitted=!0,e.readable=!1,e.emit("end"))}function A(t,e){for(var n=0,r=t.length;n<r;n++)if(t[n]===e)return n;return-1}var j=t("process-nextick-args");e.exports=u;var I,N=t("isarray");u.ReadableState=a;var M=(t("events").EventEmitter,function(t,e){return t.listeners(e).length}),q=t("./internal/streams/stream"),P=t("safe-buffer").Buffer,U=r.Uint8Array||function(){},B=t("core-util-is");B.inherits=t("inherits");var D=t("util"),F=void 0;F=D&&D.debuglog?D.debuglog("stream"):function(){};var V,H=t("./internal/streams/BufferList"),W=t("./internal/streams/destroy");B.inherits(u,q);var X=["error","close","destroy","pause","resume"];Object.defineProperty(u.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(t){this._readableState&&(this._readableState.destroyed=t)}}),u.prototype.destroy=W.destroy,u.prototype._undestroy=W.undestroy,u.prototype._destroy=function(t,e){this.push(null),e(t)},u.prototype.push=function(t,e){var n,r=this._readableState;return r.objectMode?n=!0:"string"==typeof t&&(e=e||r.defaultEncoding,e!==r.encoding&&(t=P.from(t,e),e=""),n=!0),h(this,t,e,!1,n)},u.prototype.unshift=function(t){return h(this,t,null,!0,!1)},u.prototype.isPaused=function(){return this._readableState.flowing===!1},u.prototype.setEncoding=function(e){return V||(V=t("string_decoder/").StringDecoder),this._readableState.decoder=new V(e),this._readableState.encoding=e,this};var G=8388608;u.prototype.read=function(t){F("read",t),t=parseInt(t,10);var e=this._readableState,n=t;if(0!==t&&(e.emittedReadable=!1),0===t&&e.needReadable&&(e.length>=e.highWaterMark||e.ended))return F("read: emitReadable",e.length,e.ended),0===e.length&&e.ended?L(this):g(this),null;if(t=d(t,e),0===t&&e.ended)return 0===e.length&&L(this),null;var r=e.needReadable;F("need readable",r),(0===e.length||e.length-t<e.highWaterMark)&&(r=!0,F("length less than watermark",r)),e.ended||e.reading?(r=!1,F("reading or ended",r)):r&&(F("do read"),e.reading=!0,e.sync=!0,0===e.length&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1,e.reading||(t=d(n,e)));var i;return i=t>0?O(t,e):null,null===i?(e.needReadable=!0,t=0):e.length-=t,0===e.length&&(e.ended||(e.needReadable=!0),n!==t&&e.ended&&L(this)),null!==i&&this.emit("data",i),i},u.prototype._read=function(t){this.emit("error",new Error("_read() is not implemented"))},u.prototype.pipe=function(t,e){function r(t,e){F("onunpipe"),t===f&&e&&e.hasUnpiped===!1&&(e.hasUnpiped=!0,o())}function i(){F("onend"),t.end()}function o(){F("cleanup"),t.removeListener("close",h),t.removeListener("finish",l),t.removeListener("drain",g),t.removeListener("error",u),t.removeListener("unpipe",r),f.removeListener("end",i),f.removeListener("end",c),f.removeListener("data",a),v=!0,!p.awaitDrain||t._writableState&&!t._writableState.needDrain||g()}function a(e){F("ondata"),m=!1;var n=t.write(e);!1!==n||m||((1===p.pipesCount&&p.pipes===t||p.pipesCount>1&&A(p.pipes,t)!==-1)&&!v&&(F("false write response, pause",f._readableState.awaitDrain),f._readableState.awaitDrain++,m=!0),f.pause())}function u(e){F("onerror",e),c(),t.removeListener("error",u),0===M(t,"error")&&t.emit("error",e)}function h(){t.removeListener("finish",l),c()}function l(){F("onfinish"),t.removeListener("close",h),c()}function c(){F("unpipe"),f.unpipe(t)}var f=this,p=this._readableState;switch(p.pipesCount){case 0:p.pipes=t;break;case 1:p.pipes=[p.pipes,t];break;default:p.pipes.push(t)}p.pipesCount+=1,F("pipe count=%d opts=%j",p.pipesCount,e);var d=(!e||e.end!==!1)&&t!==n.stdout&&t!==n.stderr,y=d?i:c;p.endEmitted?j.nextTick(y):f.once("end",y),t.on("unpipe",r);var g=w(f);t.on("drain",g);var v=!1,m=!1;return f.on("data",a),s(t,"error",u),t.once("close",h),t.once("finish",l),t.emit("pipe",f),p.flowing||(F("pipe resume"),f.resume()),t},u.prototype.unpipe=function(t){var e=this._readableState,n={hasUnpiped:!1};if(0===e.pipesCount)return this;if(1===e.pipesCount)return t&&t!==e.pipes?this:(t||(t=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,t&&t.emit("unpipe",this,n),this);if(!t){var r=e.pipes,i=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var o=0;o<i;o++)r[o].emit("unpipe",this,n);return this}var s=A(e.pipes,t);return s===-1?this:(e.pipes.splice(s,1),e.pipesCount-=1,1===e.pipesCount&&(e.pipes=e.pipes[0]),t.emit("unpipe",this,n),this)},u.prototype.on=function(t,e){var n=q.prototype.on.call(this,t,e);if("data"===t)this._readableState.flowing!==!1&&this.resume();else if("readable"===t){var r=this._readableState;r.endEmitted||r.readableListening||(r.readableListening=r.needReadable=!0,r.emittedReadable=!1,r.reading?r.length&&g(this):j.nextTick(_,this))}return n},u.prototype.addListener=u.prototype.on,u.prototype.resume=function(){var t=this._readableState;return t.flowing||(F("resume"),t.flowing=!0,E(this,t)),this},u.prototype.pause=function(){return F("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(F("pause"),this._readableState.flowing=!1,this.emit("pause")),this},u.prototype.wrap=function(t){var e=this,n=this._readableState,r=!1;t.on("end",function(){if(F("wrapped end"),n.decoder&&!n.ended){var t=n.decoder.end();t&&t.length&&e.push(t)}e.push(null)}),t.on("data",function(i){if(F("wrapped data"),n.decoder&&(i=n.decoder.write(i)),(!n.objectMode||null!==i&&void 0!==i)&&(n.objectMode||i&&i.length)){var o=e.push(i);o||(r=!0,t.pause())}});for(var i in t)void 0===this[i]&&"function"==typeof t[i]&&(this[i]=function(e){return function(){return t[e].apply(t,arguments)}}(i));for(var o=0;o<X.length;o++)t.on(X[o],this.emit.bind(this,X[o]));return this._read=function(e){F("wrapped _read",e),r&&(r=!1,t.resume())},this},Object.defineProperty(u.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),u._fromList=O}).call(this,t("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./_stream_duplex":38,"./internal/streams/BufferList":43,"./internal/streams/destroy":44,"./internal/streams/stream":45,_process:32,"core-util-is":8,events:9,inherits:29,isarray:46,"process-nextick-args":31,"safe-buffer":51,"string_decoder/":57,util:5}],41:[function(t,e,n){"use strict";function r(t,e){var n=this._transformState;n.transforming=!1;var r=n.writecb;if(!r)return this.emit("error",new Error("write callback called multiple times"));n.writechunk=null,n.writecb=null,null!=e&&this.push(e),r(t);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function i(t){return this instanceof i?(a.call(this,t),this._transformState={afterTransform:r.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,t&&("function"==typeof t.transform&&(this._transform=t.transform),"function"==typeof t.flush&&(this._flush=t.flush)),void this.on("prefinish",o)):new i(t)}function o(){var t=this;"function"==typeof this._flush?this._flush(function(e,n){s(t,e,n)}):s(this,null,null)}function s(t,e,n){if(e)return t.emit("error",e);if(null!=n&&t.push(n),t._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(t._transformState.transforming)throw new Error("Calling transform done when still transforming");return t.push(null)}e.exports=i;var a=t("./_stream_duplex"),u=t("core-util-is");u.inherits=t("inherits"),u.inherits(i,a),i.prototype.push=function(t,e){return this._transformState.needTransform=!1,a.prototype.push.call(this,t,e)},i.prototype._transform=function(t,e,n){throw new Error("_transform() is not implemented")},i.prototype._write=function(t,e,n){var r=this._transformState;if(r.writecb=n,r.writechunk=t,r.writeencoding=e,!r.transforming){var i=this._readableState;(r.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},i.prototype._read=function(t){var e=this._transformState;null!==e.writechunk&&e.writecb&&!e.transforming?(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform)):e.needTransform=!0},i.prototype._destroy=function(t,e){var n=this;a.prototype._destroy.call(this,t,function(t){e(t),n.emit("close")})}},{"./_stream_duplex":38,"core-util-is":8,inherits:29}],42:[function(t,e,n){(function(n,r,i){"use strict";function o(t){var e=this;this.next=null,this.entry=null,this.finish=function(){R(e,t)}}function s(t){return N.from(t)}function a(t){return N.isBuffer(t)||t instanceof M}function u(){}function h(e,n){L=L||t("./_stream_duplex"),e=e||{};var r=n instanceof L;this.objectMode=!!e.objectMode,r&&(this.objectMode=this.objectMode||!!e.writableObjectMode);var i=e.highWaterMark,s=e.writableHighWaterMark,a=this.objectMode?16:16384;i||0===i?this.highWaterMark=i:r&&(s||0===s)?this.highWaterMark=s:this.highWaterMark=a,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var u=e.decodeStrings===!1;this.decodeStrings=!u,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(t){m(n,t)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new o(this)}function l(e){return L=L||t("./_stream_duplex"),P.call(l,this)||this instanceof L?(this._writableState=new h(e,this),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e["final"]&&(this._final=e["final"])),void I.call(this)):new l(e)}function c(t,e){var n=new Error("write after end");t.emit("error",n),k.nextTick(e,n)}function f(t,e,n,r){var i=!0,o=!1;return null===n?o=new TypeError("May not write null values to stream"):"string"==typeof n||void 0===n||e.objectMode||(o=new TypeError("Invalid non-string/buffer chunk")),o&&(t.emit("error",o),k.nextTick(r,o),i=!1),i}function p(t,e,n){return t.objectMode||t.decodeStrings===!1||"string"!=typeof e||(e=N.from(e,n)),e}function d(t,e,n,r,i,o){if(!n){var s=p(e,r,i);r!==s&&(n=!0,i="buffer",r=s)}var a=e.objectMode?1:r.length;e.length+=a;var u=e.length<e.highWaterMark;if(u||(e.needDrain=!0),e.writing||e.corked){var h=e.lastBufferedRequest;e.lastBufferedRequest={chunk:r,encoding:i,isBuf:n,callback:o,next:null},h?h.next=e.lastBufferedRequest:e.bufferedRequest=e.lastBufferedRequest,e.bufferedRequestCount+=1}else y(t,e,!1,a,r,i,o);return u}function y(t,e,n,r,i,o,s){e.writelen=r,e.writecb=s,e.writing=!0,e.sync=!0,n?t._writev(i,e.onwrite):t._write(i,o,e.onwrite),e.sync=!1}function g(t,e,n,r,i){--e.pendingcb,n?(k.nextTick(i,r),k.nextTick(O,t,e),t._writableState.errorEmitted=!0,t.emit("error",r)):(i(r),t._writableState.errorEmitted=!0,t.emit("error",r),O(t,e))}function v(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0}function m(t,e){var n=t._writableState,r=n.sync,i=n.writecb;if(v(n),e)g(t,n,r,e,i);else{var o=E(n);o||n.corked||n.bufferProcessing||!n.bufferedRequest||_(t,n),r?C(b,t,n,o,i):b(t,n,o,i)}}function b(t,e,n,r){n||w(t,e),e.pendingcb--,r(),O(t,e)}function w(t,e){0===e.length&&e.needDrain&&(e.needDrain=!1,t.emit("drain"))}function _(t,e){e.bufferProcessing=!0;var n=e.bufferedRequest;if(t._writev&&n&&n.next){var r=e.bufferedRequestCount,i=new Array(r),s=e.corkedRequestsFree;s.entry=n;for(var a=0,u=!0;n;)i[a]=n,n.isBuf||(u=!1),n=n.next,a+=1;i.allBuffers=u,y(t,e,!0,e.length,i,"",s.finish),e.pendingcb++,e.lastBufferedRequest=null,s.next?(e.corkedRequestsFree=s.next,s.next=null):e.corkedRequestsFree=new o(e),e.bufferedRequestCount=0}else{for(;n;){var h=n.chunk,l=n.encoding,c=n.callback,f=e.objectMode?1:h.length;if(y(t,e,!1,f,h,l,c),n=n.next,e.bufferedRequestCount--,e.writing)break}null===n&&(e.lastBufferedRequest=null)}e.bufferedRequest=n,e.bufferProcessing=!1}function E(t){return t.ending&&0===t.length&&null===t.bufferedRequest&&!t.finished&&!t.writing}function S(t,e){t._final(function(n){e.pendingcb--,n&&t.emit("error",n),e.prefinished=!0,t.emit("prefinish"),O(t,e)})}function T(t,e){e.prefinished||e.finalCalled||("function"==typeof t._final?(e.pendingcb++,e.finalCalled=!0,k.nextTick(S,t,e)):(e.prefinished=!0,t.emit("prefinish")))}function O(t,e){var n=E(e);return n&&(T(t,e),0===e.pendingcb&&(e.finished=!0,t.emit("finish"))),n}function x(t,e,n){e.ending=!0,O(t,e),n&&(e.finished?k.nextTick(n):t.once("finish",n)),e.ended=!0,t.writable=!1}function R(t,e,n){var r=t.entry;for(t.entry=null;r;){var i=r.callback;e.pendingcb--,i(n),r=r.next}e.corkedRequestsFree?e.corkedRequestsFree.next=t:e.corkedRequestsFree=t}var k=t("process-nextick-args");e.exports=l;var L,C=!n.browser&&["v0.10","v0.9."].indexOf(n.version.slice(0,5))>-1?i:k.nextTick;l.WritableState=h;var A=t("core-util-is");A.inherits=t("inherits");var j={deprecate:t("util-deprecate")},I=t("./internal/streams/stream"),N=t("safe-buffer").Buffer,M=r.Uint8Array||function(){},q=t("./internal/streams/destroy");A.inherits(l,I),h.prototype.getBuffer=function(){for(var t=this.bufferedRequest,e=[];t;)e.push(t),t=t.next;return e},function(){try{Object.defineProperty(h.prototype,"buffer",{get:j.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(t){}}();var P;"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(P=Function.prototype[Symbol.hasInstance],Object.defineProperty(l,Symbol.hasInstance,{value:function(t){return!!P.call(this,t)||this===l&&(t&&t._writableState instanceof h)}})):P=function(t){return t instanceof this},l.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},l.prototype.write=function(t,e,n){var r=this._writableState,i=!1,o=!r.objectMode&&a(t);return o&&!N.isBuffer(t)&&(t=s(t)),"function"==typeof e&&(n=e,e=null),o?e="buffer":e||(e=r.defaultEncoding),"function"!=typeof n&&(n=u),r.ended?c(this,n):(o||f(this,r,t,n))&&(r.pendingcb++,i=d(this,r,o,t,e,n)),i},l.prototype.cork=function(){var t=this._writableState;t.corked++},l.prototype.uncork=function(){var t=this._writableState;t.corked&&(t.corked--,t.writing||t.corked||t.finished||t.bufferProcessing||!t.bufferedRequest||_(this,t))},l.prototype.setDefaultEncoding=function(t){if("string"==typeof t&&(t=t.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((t+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+t);return this._writableState.defaultEncoding=t,this},Object.defineProperty(l.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),l.prototype._write=function(t,e,n){n(new Error("_write() is not implemented"))},l.prototype._writev=null,l.prototype.end=function(t,e,n){var r=this._writableState;"function"==typeof t?(n=t,t=null,e=null):"function"==typeof e&&(n=e,e=null),null!==t&&void 0!==t&&this.write(t,e),r.corked&&(r.corked=1,this.uncork()),r.ending||r.finished||x(this,r,n)},Object.defineProperty(l.prototype,"destroyed",{get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(t){this._writableState&&(this._writableState.destroyed=t)}}),l.prototype.destroy=q.destroy,l.prototype._undestroy=q.undestroy,l.prototype._destroy=function(t,e){this.end(),e(t)}}).call(this,t("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},t("timers").setImmediate)},{"./_stream_duplex":38,"./internal/streams/destroy":44,"./internal/streams/stream":45,_process:32,"core-util-is":8,inherits:29,"process-nextick-args":31,"safe-buffer":51,timers:59,"util-deprecate":63}],43:[function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e,n){t.copy(e,n)}var o=t("safe-buffer").Buffer,s=t("util");e.exports=function(){function t(){r(this,t),this.head=null,this.tail=null,this.length=0}return t.prototype.push=function(t){var e={data:t,next:null};this.length>0?this.tail.next=e:this.head=e,this.tail=e,++this.length},t.prototype.unshift=function(t){var e={data:t,next:this.head};0===this.length&&(this.tail=e),this.head=e,++this.length},t.prototype.shift=function(){if(0!==this.length){var t=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,t}},t.prototype.clear=function(){this.head=this.tail=null,this.length=0},t.prototype.join=function(t){if(0===this.length)return"";for(var e=this.head,n=""+e.data;e=e.next;)n+=t+e.data;return n},t.prototype.concat=function(t){if(0===this.length)return o.alloc(0);if(1===this.length)return this.head.data;for(var e=o.allocUnsafe(t>>>0),n=this.head,r=0;n;)i(n.data,e,r),r+=n.data.length,n=n.next;return e},t}(),s&&s.inspect&&s.inspect.custom&&(e.exports.prototype[s.inspect.custom]=function(){var t=s.inspect({length:this.length});return this.constructor.name+" "+t})},{"safe-buffer":51,util:5}],44:[function(t,e,n){"use strict";function r(t,e){var n=this,r=this._readableState&&this._readableState.destroyed,i=this._writableState&&this._writableState.destroyed;return r||i?(e?e(t):!t||this._writableState&&this._writableState.errorEmitted||s.nextTick(o,this,t),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,function(t){!e&&t?(s.nextTick(o,n,t),n._writableState&&(n._writableState.errorEmitted=!0)):e&&e(t)}),this)}function i(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function o(t,e){t.emit("error",e)}var s=t("process-nextick-args");e.exports={destroy:r,undestroy:i}},{"process-nextick-args":31}],45:[function(t,e,n){e.exports=t("events").EventEmitter},{events:9}],46:[function(t,e,n){var r={}.toString;e.exports=Array.isArray||function(t){return"[object Array]"==r.call(t)}},{}],47:[function(t,e,n){e.exports=t("./readable").PassThrough},{"./readable":48}],48:[function(t,e,n){n=e.exports=t("./lib/_stream_readable.js"),n.Stream=n,n.Readable=n,n.Writable=t("./lib/_stream_writable.js"),n.Duplex=t("./lib/_stream_duplex.js"),n.Transform=t("./lib/_stream_transform.js"),n.PassThrough=t("./lib/_stream_passthrough.js")},{"./lib/_stream_duplex.js":38,"./lib/_stream_passthrough.js":39,"./lib/_stream_readable.js":40,"./lib/_stream_transform.js":41,"./lib/_stream_writable.js":42}],49:[function(t,e,n){e.exports=t("./readable").Transform},{"./readable":48}],50:[function(t,e,n){e.exports=t("./lib/_stream_writable.js")},{"./lib/_stream_writable.js":42}],51:[function(t,e,n){function r(t,e){for(var n in t)e[n]=t[n]}function i(t,e,n){return s(t,e,n)}var o=t("buffer"),s=o.Buffer;s.from&&s.alloc&&s.allocUnsafe&&s.allocUnsafeSlow?e.exports=o:(r(o,n),n.Buffer=i),r(s,i),i.from=function(t,e,n){if("number"==typeof t)throw new TypeError("Argument must not be a number");return s(t,e,n)},i.alloc=function(t,e,n){if("number"!=typeof t)throw new TypeError("Argument must be a number");var r=s(t);return void 0!==e?"string"==typeof n?r.fill(e,n):r.fill(e):r.fill(0),r},i.allocUnsafe=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return s(t)},i.allocUnsafeSlow=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return o.SlowBuffer(t)}},{buffer:6}],52:[function(t,e,n){function r(){i.call(this)}e.exports=r;var i=t("events").EventEmitter,o=t("inherits");o(r,i),r.Readable=t("readable-stream/readable.js"),r.Writable=t("readable-stream/writable.js"),r.Duplex=t("readable-stream/duplex.js"),r.Transform=t("readable-stream/transform.js"),r.PassThrough=t("readable-stream/passthrough.js"),r.Stream=r,r.prototype.pipe=function(t,e){function n(e){t.writable&&!1===t.write(e)&&h.pause&&h.pause()}function r(){h.readable&&h.resume&&h.resume()}function o(){l||(l=!0,t.end())}function s(){l||(l=!0,"function"==typeof t.destroy&&t.destroy())}function a(t){if(u(),0===i.listenerCount(this,"error"))throw t}function u(){h.removeListener("data",n),t.removeListener("drain",r),h.removeListener("end",o),h.removeListener("close",s),h.removeListener("error",a),t.removeListener("error",a),h.removeListener("end",u),h.removeListener("close",u),t.removeListener("close",u)}var h=this;h.on("data",n),t.on("drain",r),t._isStdio||e&&e.end===!1||(h.on("end",o),h.on("close",s));var l=!1;return h.on("error",a),t.on("error",a),h.on("end",u),h.on("close",u),t.on("close",u),t.emit("pipe",h),t}},{events:9,inherits:29,"readable-stream/duplex.js":37,"readable-stream/passthrough.js":47,"readable-stream/readable.js":48,"readable-stream/transform.js":49,"readable-stream/writable.js":50}],53:[function(t,e,n){(function(e){var r=t("./lib/request"),i=t("./lib/response"),o=t("xtend"),s=t("builtin-status-codes"),a=t("url"),u=n;u.request=function(t,n){t="string"==typeof t?a.parse(t):o(t);var i=e.location.protocol.search(/^https?:$/)===-1?"http:":"",s=t.protocol||i,u=t.hostname||t.host,h=t.port,l=t.path||"/";u&&u.indexOf(":")!==-1&&(u="["+u+"]"),t.url=(u?s+"//"+u:"")+(h?":"+h:"")+l,t.method=(t.method||"GET").toUpperCase(),t.headers=t.headers||{};var c=new r(t);return n&&c.on("response",n),c},u.get=function(t,e){var n=u.request(t,e);return n.end(),n},u.ClientRequest=r,u.IncomingMessage=i.IncomingMessage,u.Agent=function(){},u.Agent.defaultMaxSockets=4,u.globalAgent=new u.Agent,u.STATUS_CODES=s,u.METHODS=["CHECKOUT","CONNECT","COPY","DELETE","GET","HEAD","LOCK","M-SEARCH","MERGE","MKACTIVITY","MKCOL","MOVE","NOTIFY","OPTIONS","PATCH","POST","PROPFIND","PROPPATCH","PURGE","PUT","REPORT","SEARCH","SUBSCRIBE","TRACE","UNLOCK","UNSUBSCRIBE"]}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./lib/request":55,"./lib/response":56,"builtin-status-codes":7,url:61,xtend:64}],54:[function(t,e,n){(function(t){function e(){if(void 0!==s)return s;if(t.XMLHttpRequest){s=new t.XMLHttpRequest;try{s.open("GET",t.XDomainRequest?"/":"https://example.com")}catch(e){s=null}}else s=null;return s}function r(t){var n=e();if(!n)return!1;try{return n.responseType=t,n.responseType===t}catch(r){}return!1}function i(t){return"function"==typeof t}n.fetch=i(t.fetch)&&i(t.ReadableStream),n.writableStream=i(t.WritableStream),n.abortController=i(t.AbortController),n.blobConstructor=!1;try{new Blob([new ArrayBuffer(1)]),n.blobConstructor=!0}catch(o){}var s,a="undefined"!=typeof t.ArrayBuffer,u=a&&i(t.ArrayBuffer.prototype.slice);n.arraybuffer=n.fetch||a&&r("arraybuffer"),n.msstream=!n.fetch&&u&&r("ms-stream"),n.mozchunkedarraybuffer=!n.fetch&&a&&r("moz-chunked-arraybuffer"),n.overrideMimeType=n.fetch||!!e()&&i(e().overrideMimeType),n.vbArray=i(t.VBArray),s=null}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],55:[function(t,e,n){(function(n,r,i){function o(t,e){return a.fetch&&e?"fetch":a.mozchunkedarraybuffer?"moz-chunked-arraybuffer":a.msstream?"ms-stream":a.arraybuffer&&t?"arraybuffer":a.vbArray&&t?"text:vbarray":"text"}function s(t){try{var e=t.status;return null!==e&&0!==e}catch(n){return!1}}var a=t("./capability"),u=t("inherits"),h=t("./response"),l=t("readable-stream"),c=t("to-arraybuffer"),f=h.IncomingMessage,p=h.readyStates,d=e.exports=function(t){
var e=this;l.Writable.call(e),e._opts=t,e._body=[],e._headers={},t.auth&&e.setHeader("Authorization","Basic "+new i(t.auth).toString("base64")),Object.keys(t.headers).forEach(function(n){e.setHeader(n,t.headers[n])});var n,r=!0;if("disable-fetch"===t.mode||"requestTimeout"in t&&!a.abortController)r=!1,n=!0;else if("prefer-streaming"===t.mode)n=!1;else if("allow-wrong-content-type"===t.mode)n=!a.overrideMimeType;else{if(t.mode&&"default"!==t.mode&&"prefer-fast"!==t.mode)throw new Error("Invalid value for opts.mode");n=!0}e._mode=o(n,r),e._fetchTimer=null,e.on("finish",function(){e._onFinish()})};u(d,l.Writable),d.prototype.setHeader=function(t,e){var n=this,r=t.toLowerCase();y.indexOf(r)===-1&&(n._headers[r]={name:t,value:e})},d.prototype.getHeader=function(t){var e=this._headers[t.toLowerCase()];return e?e.value:null},d.prototype.removeHeader=function(t){var e=this;delete e._headers[t.toLowerCase()]},d.prototype._onFinish=function(){var t=this;if(!t._destroyed){var e=t._opts,o=t._headers,s=null;"GET"!==e.method&&"HEAD"!==e.method&&(s=a.arraybuffer?c(i.concat(t._body)):a.blobConstructor?new r.Blob(t._body.map(function(t){return c(t)}),{type:(o["content-type"]||{}).value||""}):i.concat(t._body).toString());var u=[];if(Object.keys(o).forEach(function(t){var e=o[t].name,n=o[t].value;Array.isArray(n)?n.forEach(function(t){u.push([e,t])}):u.push([e,n])}),"fetch"===t._mode){var h=null;if(a.abortController){var l=new AbortController;h=l.signal,t._fetchAbortController=l,"requestTimeout"in e&&0!==e.requestTimeout&&(t._fetchTimer=r.setTimeout(function(){t.emit("requestTimeout"),t._fetchAbortController&&t._fetchAbortController.abort()},e.requestTimeout))}r.fetch(t._opts.url,{method:t._opts.method,headers:u,body:s||void 0,mode:"cors",credentials:e.withCredentials?"include":"same-origin",signal:h}).then(function(e){t._fetchResponse=e,t._connect()},function(e){r.clearTimeout(t._fetchTimer),t._destroyed||t.emit("error",e)})}else{var f=t._xhr=new r.XMLHttpRequest;try{f.open(t._opts.method,t._opts.url,!0)}catch(d){return void n.nextTick(function(){t.emit("error",d)})}"responseType"in f&&(f.responseType=t._mode.split(":")[0]),"withCredentials"in f&&(f.withCredentials=!!e.withCredentials),"text"===t._mode&&"overrideMimeType"in f&&f.overrideMimeType("text/plain; charset=x-user-defined"),"requestTimeout"in e&&(f.timeout=e.requestTimeout,f.ontimeout=function(){t.emit("requestTimeout")}),u.forEach(function(t){f.setRequestHeader(t[0],t[1])}),t._response=null,f.onreadystatechange=function(){switch(f.readyState){case p.LOADING:case p.DONE:t._onXHRProgress()}},"moz-chunked-arraybuffer"===t._mode&&(f.onprogress=function(){t._onXHRProgress()}),f.onerror=function(){t._destroyed||t.emit("error",new Error("XHR error"))};try{f.send(s)}catch(d){return void n.nextTick(function(){t.emit("error",d)})}}}},d.prototype._onXHRProgress=function(){var t=this;s(t._xhr)&&!t._destroyed&&(t._response||t._connect(),t._response._onXHRProgress())},d.prototype._connect=function(){var t=this;t._destroyed||(t._response=new f(t._xhr,t._fetchResponse,t._mode,t._fetchTimer),t._response.on("error",function(e){t.emit("error",e)}),t.emit("response",t._response))},d.prototype._write=function(t,e,n){var r=this;r._body.push(t),n()},d.prototype.abort=d.prototype.destroy=function(){var t=this;t._destroyed=!0,r.clearTimeout(t._fetchTimer),t._response&&(t._response._destroyed=!0),t._xhr?t._xhr.abort():t._fetchAbortController&&t._fetchAbortController.abort()},d.prototype.end=function(t,e,n){var r=this;"function"==typeof t&&(n=t,t=void 0),l.Writable.prototype.end.call(r,t,e,n)},d.prototype.flushHeaders=function(){},d.prototype.setTimeout=function(){},d.prototype.setNoDelay=function(){},d.prototype.setSocketKeepAlive=function(){};var y=["accept-charset","accept-encoding","access-control-request-headers","access-control-request-method","connection","content-length","cookie","cookie2","date","dnt","expect","host","keep-alive","origin","referer","te","trailer","transfer-encoding","upgrade","via"]}).call(this,t("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},t("buffer").Buffer)},{"./capability":54,"./response":56,_process:32,buffer:6,inherits:29,"readable-stream":48,"to-arraybuffer":60}],56:[function(t,e,n){(function(e,r,i){var o=t("./capability"),s=t("inherits"),a=t("readable-stream"),u=n.readyStates={UNSENT:0,OPENED:1,HEADERS_RECEIVED:2,LOADING:3,DONE:4},h=n.IncomingMessage=function(t,n,s,u){function h(){p.read().then(function(t){if(!l._destroyed){if(t.done)return r.clearTimeout(u),void l.push(null);l.push(new i(t.value)),h()}})["catch"](function(t){r.clearTimeout(u),l._destroyed||l.emit("error",t)})}var l=this;if(a.Readable.call(l),l._mode=s,l.headers={},l.rawHeaders=[],l.trailers={},l.rawTrailers=[],l.on("end",function(){e.nextTick(function(){l.emit("close")})}),"fetch"===s){if(l._fetchResponse=n,l.url=n.url,l.statusCode=n.status,l.statusMessage=n.statusText,n.headers.forEach(function(t,e){l.headers[e.toLowerCase()]=t,l.rawHeaders.push(e,t)}),o.writableStream){var c=new WritableStream({write:function(t){return new Promise(function(e,n){l._destroyed?n():l.push(new i(t))?e():l._resumeFetch=e})},close:function(){r.clearTimeout(u),l._destroyed||l.push(null)},abort:function(t){l._destroyed||l.emit("error",t)}});try{return void n.body.pipeTo(c)["catch"](function(t){r.clearTimeout(u),l._destroyed||l.emit("error",t)})}catch(f){}}var p=n.body.getReader();h()}else{l._xhr=t,l._pos=0,l.url=t.responseURL,l.statusCode=t.status,l.statusMessage=t.statusText;var d=t.getAllResponseHeaders().split(/\r?\n/);if(d.forEach(function(t){var e=t.match(/^([^:]+):\s*(.*)/);if(e){var n=e[1].toLowerCase();"set-cookie"===n?(void 0===l.headers[n]&&(l.headers[n]=[]),l.headers[n].push(e[2])):void 0!==l.headers[n]?l.headers[n]+=", "+e[2]:l.headers[n]=e[2],l.rawHeaders.push(e[1],e[2])}}),l._charset="x-user-defined",!o.overrideMimeType){var y=l.rawHeaders["mime-type"];if(y){var g=y.match(/;\s*charset=([^;])(;|$)/);g&&(l._charset=g[1].toLowerCase())}l._charset||(l._charset="utf-8")}}};s(h,a.Readable),h.prototype._read=function(){var t=this,e=t._resumeFetch;e&&(t._resumeFetch=null,e())},h.prototype._onXHRProgress=function(){var t=this,e=t._xhr,n=null;switch(t._mode){case"text:vbarray":if(e.readyState!==u.DONE)break;try{n=new r.VBArray(e.responseBody).toArray()}catch(o){}if(null!==n){t.push(new i(n));break}case"text":try{n=e.responseText}catch(o){t._mode="text:vbarray";break}if(n.length>t._pos){var s=n.substr(t._pos);if("x-user-defined"===t._charset){for(var a=new i(s.length),h=0;h<s.length;h++)a[h]=255&s.charCodeAt(h);t.push(a)}else t.push(s,t._charset);t._pos=n.length}break;case"arraybuffer":if(e.readyState!==u.DONE||!e.response)break;n=e.response,t.push(new i(new Uint8Array(n)));break;case"moz-chunked-arraybuffer":if(n=e.response,e.readyState!==u.LOADING||!n)break;t.push(new i(new Uint8Array(n)));break;case"ms-stream":if(n=e.response,e.readyState!==u.LOADING)break;var l=new r.MSStreamReader;l.onprogress=function(){l.result.byteLength>t._pos&&(t.push(new i(new Uint8Array(l.result.slice(t._pos)))),t._pos=l.result.byteLength)},l.onload=function(){t.push(null)},l.readAsArrayBuffer(n)}t._xhr.readyState===u.DONE&&"ms-stream"!==t._mode&&t.push(null)}}).call(this,t("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},t("buffer").Buffer)},{"./capability":54,_process:32,buffer:6,inherits:29,"readable-stream":48}],57:[function(t,e,n){"use strict";function r(t){if(!t)return"utf8";for(var e;;)switch(t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:if(e)return;t=(""+t).toLowerCase(),e=!0}}function i(t){var e=r(t);if("string"!=typeof e&&(m.isEncoding===b||!b(t)))throw new Error("Unknown encoding: "+t);return e||t}function o(t){this.encoding=i(t);var e;switch(this.encoding){case"utf16le":this.text=f,this.end=p,e=4;break;case"utf8":this.fillLast=h,e=4;break;case"base64":this.text=d,this.end=y,e=3;break;default:return this.write=g,void(this.end=v)}this.lastNeed=0,this.lastTotal=0,this.lastChar=m.allocUnsafe(e)}function s(t){return t<=127?0:t>>5===6?2:t>>4===14?3:t>>3===30?4:t>>6===2?-1:-2}function a(t,e,n){var r=e.length-1;if(r<n)return 0;var i=s(e[r]);return i>=0?(i>0&&(t.lastNeed=i-1),i):--r<n||i===-2?0:(i=s(e[r]),i>=0?(i>0&&(t.lastNeed=i-2),i):--r<n||i===-2?0:(i=s(e[r]),i>=0?(i>0&&(2===i?i=0:t.lastNeed=i-3),i):0))}function u(t,e,n){if(128!==(192&e[0]))return t.lastNeed=0,"�";if(t.lastNeed>1&&e.length>1){if(128!==(192&e[1]))return t.lastNeed=1,"�";if(t.lastNeed>2&&e.length>2&&128!==(192&e[2]))return t.lastNeed=2,"�"}}function h(t){var e=this.lastTotal-this.lastNeed,n=u(this,t,e);return void 0!==n?n:this.lastNeed<=t.length?(t.copy(this.lastChar,e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(t.copy(this.lastChar,e,0,t.length),void(this.lastNeed-=t.length))}function l(t,e){var n=a(this,t,e);if(!this.lastNeed)return t.toString("utf8",e);this.lastTotal=n;var r=t.length-(n-this.lastNeed);return t.copy(this.lastChar,0,r),t.toString("utf8",e,r)}function c(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+"�":e}function f(t,e){if((t.length-e)%2===0){var n=t.toString("utf16le",e);if(n){var r=n.charCodeAt(n.length-1);if(r>=55296&&r<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1],n.slice(0,-1)}return n}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=t[t.length-1],t.toString("utf16le",e,t.length-1)}function p(t){var e=t&&t.length?this.write(t):"";if(this.lastNeed){var n=this.lastTotal-this.lastNeed;return e+this.lastChar.toString("utf16le",0,n)}return e}function d(t,e){var n=(t.length-e)%3;return 0===n?t.toString("base64",e):(this.lastNeed=3-n,this.lastTotal=3,1===n?this.lastChar[0]=t[t.length-1]:(this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1]),t.toString("base64",e,t.length-n))}function y(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function g(t){return t.toString(this.encoding)}function v(t){return t&&t.length?this.write(t):""}var m=t("safe-buffer").Buffer,b=m.isEncoding||function(t){switch(t=""+t,t&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};n.StringDecoder=o,o.prototype.write=function(t){if(0===t.length)return"";var e,n;if(this.lastNeed){if(e=this.fillLast(t),void 0===e)return"";n=this.lastNeed,this.lastNeed=0}else n=0;return n<t.length?e?e+this.text(t,n):this.text(t,n):e||""},o.prototype.end=c,o.prototype.text=l,o.prototype.fillLast=function(t){return this.lastNeed<=t.length?(t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,t.length),void(this.lastNeed-=t.length))}},{"safe-buffer":51}],58:[function(t,e,n){(function(r){function i(t,e,n){function i(){for(;h.length&&!c.paused;){var t=h.shift();if(null===t)return c.emit("end");c.emit("data",t)}}function s(){c.writable=!1,e.call(c),!c.readable&&c.autoDestroy&&c.destroy()}t=t||function(t){this.queue(t)},e=e||function(){this.queue(null)};var a=!1,u=!1,h=[],l=!1,c=new o;return c.readable=c.writable=!0,c.paused=!1,c.autoDestroy=!(n&&n.autoDestroy===!1),c.write=function(e){return t.call(this,e),!c.paused},c.queue=c.push=function(t){return l?c:(null===t&&(l=!0),h.push(t),i(),c)},c.on("end",function(){c.readable=!1,!c.writable&&c.autoDestroy&&r.nextTick(function(){c.destroy()})}),c.end=function(t){if(!a)return a=!0,arguments.length&&c.write(t),s(),c},c.destroy=function(){if(!u)return u=!0,a=!0,h.length=0,c.writable=c.readable=!1,c.emit("close"),c},c.pause=function(){if(!c.paused)return c.paused=!0,c},c.resume=function(){return c.paused&&(c.paused=!1,c.emit("resume")),i(),c.paused||c.emit("drain"),c},c}var o=t("stream");n=e.exports=i,i.through=i}).call(this,t("_process"))},{_process:32,stream:52}],59:[function(t,e,n){(function(e,r){function i(t,e){this._id=t,this._clearFn=e}var o=t("process/browser.js").nextTick,s=Function.prototype.apply,a=Array.prototype.slice,u={},h=0;n.setTimeout=function(){return new i(s.call(setTimeout,window,arguments),clearTimeout)},n.setInterval=function(){return new i(s.call(setInterval,window,arguments),clearInterval)},n.clearTimeout=n.clearInterval=function(t){t.close()},i.prototype.unref=i.prototype.ref=function(){},i.prototype.close=function(){this._clearFn.call(window,this._id)},n.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},n.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},n._unrefActive=n.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;e>=0&&(t._idleTimeoutId=setTimeout(function(){t._onTimeout&&t._onTimeout()},e))},n.setImmediate="function"==typeof e?e:function(t){var e=h++,r=!(arguments.length<2)&&a.call(arguments,1);return u[e]=!0,o(function(){u[e]&&(r?t.apply(null,r):t.call(null),n.clearImmediate(e))}),e},n.clearImmediate="function"==typeof r?r:function(t){delete u[t]}}).call(this,t("timers").setImmediate,t("timers").clearImmediate)},{"process/browser.js":32,timers:59}],60:[function(t,e,n){var r=t("buffer").Buffer;e.exports=function(t){if(t instanceof Uint8Array){if(0===t.byteOffset&&t.byteLength===t.buffer.byteLength)return t.buffer;if("function"==typeof t.buffer.slice)return t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength)}if(r.isBuffer(t)){for(var e=new Uint8Array(t.length),n=t.length,i=0;i<n;i++)e[i]=t[i];return e.buffer}throw new Error("Argument must be a Buffer")}},{buffer:6}],61:[function(t,e,n){"use strict";function r(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function i(t,e,n){if(t&&h.isObject(t)&&t instanceof r)return t;var i=new r;return i.parse(t,e,n),i}function o(t){return h.isString(t)&&(t=i(t)),t instanceof r?t.format():r.prototype.format.call(t)}function s(t,e){return i(t,!1,!0).resolve(e)}function a(t,e){return t?i(t,!1,!0).resolveObject(e):e}var u=t("punycode"),h=t("./util");n.parse=i,n.resolve=s,n.resolveObject=a,n.format=o,n.Url=r;var l=/^([a-z0-9.+-]+:)/i,c=/:[0-9]*$/,f=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,p=["<",">",'"',"`"," ","\r","\n","\t"],d=["{","}","|","\\","^","`"].concat(p),y=["'"].concat(d),g=["%","/","?",";","#"].concat(y),v=["/","?","#"],m=255,b=/^[+a-z0-9A-Z_-]{0,63}$/,w=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,_={javascript:!0,"javascript:":!0},E={javascript:!0,"javascript:":!0},S={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},T=t("querystring");r.prototype.parse=function(t,e,n){if(!h.isString(t))throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var r=t.indexOf("?"),i=r!==-1&&r<t.indexOf("#")?"?":"#",o=t.split(i),s=/\\/g;o[0]=o[0].replace(s,"/"),t=o.join(i);var a=t;if(a=a.trim(),!n&&1===t.split("#").length){var c=f.exec(a);if(c)return this.path=a,this.href=a,this.pathname=c[1],c[2]?(this.search=c[2],e?this.query=T.parse(this.search.substr(1)):this.query=this.search.substr(1)):e&&(this.search="",this.query={}),this}var p=l.exec(a);if(p){p=p[0];var d=p.toLowerCase();this.protocol=d,a=a.substr(p.length)}if(n||p||a.match(/^\/\/[^@\/]+@[^@\/]+/)){var O="//"===a.substr(0,2);!O||p&&E[p]||(a=a.substr(2),this.slashes=!0)}if(!E[p]&&(O||p&&!S[p])){for(var x=-1,R=0;R<v.length;R++){var k=a.indexOf(v[R]);k!==-1&&(x===-1||k<x)&&(x=k)}var L,C;C=x===-1?a.lastIndexOf("@"):a.lastIndexOf("@",x),C!==-1&&(L=a.slice(0,C),a=a.slice(C+1),this.auth=decodeURIComponent(L)),x=-1;for(var R=0;R<g.length;R++){var k=a.indexOf(g[R]);k!==-1&&(x===-1||k<x)&&(x=k)}x===-1&&(x=a.length),this.host=a.slice(0,x),a=a.slice(x),this.parseHost(),this.hostname=this.hostname||"";var A="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!A)for(var j=this.hostname.split(/\./),R=0,I=j.length;R<I;R++){var N=j[R];if(N&&!N.match(b)){for(var M="",q=0,P=N.length;q<P;q++)M+=N.charCodeAt(q)>127?"x":N[q];if(!M.match(b)){var U=j.slice(0,R),B=j.slice(R+1),D=N.match(w);D&&(U.push(D[1]),B.unshift(D[2])),B.length&&(a="/"+B.join(".")+a),this.hostname=U.join(".");break}}}this.hostname.length>m?this.hostname="":this.hostname=this.hostname.toLowerCase(),A||(this.hostname=u.toASCII(this.hostname));var F=this.port?":"+this.port:"",V=this.hostname||"";this.host=V+F,this.href+=this.host,A&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==a[0]&&(a="/"+a))}if(!_[d])for(var R=0,I=y.length;R<I;R++){var H=y[R];if(a.indexOf(H)!==-1){var W=encodeURIComponent(H);W===H&&(W=escape(H)),a=a.split(H).join(W)}}var X=a.indexOf("#");X!==-1&&(this.hash=a.substr(X),a=a.slice(0,X));var G=a.indexOf("?");if(G!==-1?(this.search=a.substr(G),this.query=a.substr(G+1),e&&(this.query=T.parse(this.query)),a=a.slice(0,G)):e&&(this.search="",this.query={}),a&&(this.pathname=a),S[d]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var F=this.pathname||"",J=this.search||"";this.path=F+J}return this.href=this.format(),this},r.prototype.format=function(){var t=this.auth||"";t&&(t=encodeURIComponent(t),t=t.replace(/%3A/i,":"),t+="@");var e=this.protocol||"",n=this.pathname||"",r=this.hash||"",i=!1,o="";this.host?i=t+this.host:this.hostname&&(i=t+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(i+=":"+this.port)),this.query&&h.isObject(this.query)&&Object.keys(this.query).length&&(o=T.stringify(this.query));var s=this.search||o&&"?"+o||"";return e&&":"!==e.substr(-1)&&(e+=":"),this.slashes||(!e||S[e])&&i!==!1?(i="//"+(i||""),n&&"/"!==n.charAt(0)&&(n="/"+n)):i||(i=""),r&&"#"!==r.charAt(0)&&(r="#"+r),s&&"?"!==s.charAt(0)&&(s="?"+s),n=n.replace(/[?#]/g,function(t){return encodeURIComponent(t)}),s=s.replace("#","%23"),e+i+n+s+r},r.prototype.resolve=function(t){return this.resolveObject(i(t,!1,!0)).format()},r.prototype.resolveObject=function(t){if(h.isString(t)){var e=new r;e.parse(t,!1,!0),t=e}for(var n=new r,i=Object.keys(this),o=0;o<i.length;o++){var s=i[o];n[s]=this[s]}if(n.hash=t.hash,""===t.href)return n.href=n.format(),n;if(t.slashes&&!t.protocol){for(var a=Object.keys(t),u=0;u<a.length;u++){var l=a[u];"protocol"!==l&&(n[l]=t[l])}return S[n.protocol]&&n.hostname&&!n.pathname&&(n.path=n.pathname="/"),n.href=n.format(),n}if(t.protocol&&t.protocol!==n.protocol){if(!S[t.protocol]){for(var c=Object.keys(t),f=0;f<c.length;f++){var p=c[f];n[p]=t[p]}return n.href=n.format(),n}if(n.protocol=t.protocol,t.host||E[t.protocol])n.pathname=t.pathname;else{for(var d=(t.pathname||"").split("/");d.length&&!(t.host=d.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),""!==d[0]&&d.unshift(""),d.length<2&&d.unshift(""),n.pathname=d.join("/")}if(n.search=t.search,n.query=t.query,n.host=t.host||"",n.auth=t.auth,n.hostname=t.hostname||t.host,n.port=t.port,n.pathname||n.search){var y=n.pathname||"",g=n.search||"";n.path=y+g}return n.slashes=n.slashes||t.slashes,n.href=n.format(),n}var v=n.pathname&&"/"===n.pathname.charAt(0),m=t.host||t.pathname&&"/"===t.pathname.charAt(0),b=m||v||n.host&&t.pathname,w=b,_=n.pathname&&n.pathname.split("/")||[],d=t.pathname&&t.pathname.split("/")||[],T=n.protocol&&!S[n.protocol];if(T&&(n.hostname="",n.port=null,n.host&&(""===_[0]?_[0]=n.host:_.unshift(n.host)),n.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(""===d[0]?d[0]=t.host:d.unshift(t.host)),t.host=null),b=b&&(""===d[0]||""===_[0])),m)n.host=t.host||""===t.host?t.host:n.host,n.hostname=t.hostname||""===t.hostname?t.hostname:n.hostname,n.search=t.search,n.query=t.query,_=d;else if(d.length)_||(_=[]),_.pop(),_=_.concat(d),n.search=t.search,n.query=t.query;else if(!h.isNullOrUndefined(t.search)){if(T){n.hostname=n.host=_.shift();var O=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@");O&&(n.auth=O.shift(),n.host=n.hostname=O.shift())}return n.search=t.search,n.query=t.query,h.isNull(n.pathname)&&h.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.href=n.format(),n}if(!_.length)return n.pathname=null,n.search?n.path="/"+n.search:n.path=null,n.href=n.format(),n;for(var x=_.slice(-1)[0],R=(n.host||t.host||_.length>1)&&("."===x||".."===x)||""===x,k=0,L=_.length;L>=0;L--)x=_[L],"."===x?_.splice(L,1):".."===x?(_.splice(L,1),k++):k&&(_.splice(L,1),k--);if(!b&&!w)for(;k--;k)_.unshift("..");!b||""===_[0]||_[0]&&"/"===_[0].charAt(0)||_.unshift(""),R&&"/"!==_.join("/").substr(-1)&&_.push("");var C=""===_[0]||_[0]&&"/"===_[0].charAt(0);if(T){n.hostname=n.host=C?"":_.length?_.shift():"";var O=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@");O&&(n.auth=O.shift(),n.host=n.hostname=O.shift())}return b=b||n.host&&_.length,b&&!C&&_.unshift(""),_.length?n.pathname=_.join("/"):(n.pathname=null,n.path=null),h.isNull(n.pathname)&&h.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.auth=t.auth||n.auth,n.slashes=n.slashes||t.slashes,n.href=n.format(),n},r.prototype.parseHost=function(){var t=this.host,e=c.exec(t);e&&(e=e[0],":"!==e&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)}},{"./util":62,punycode:33,querystring:36}],62:[function(t,e,n){"use strict";e.exports={isString:function(t){return"string"==typeof t},isObject:function(t){return"object"==typeof t&&null!==t},isNull:function(t){return null===t},isNullOrUndefined:function(t){return null==t}}},{}],63:[function(t,e,n){(function(t){function n(t,e){function n(){if(!i){if(r("throwDeprecation"))throw new Error(e);r("traceDeprecation")?console.trace(e):console.warn(e),i=!0}return t.apply(this,arguments)}if(r("noDeprecation"))return t;var i=!1;return n}function r(e){try{if(!t.localStorage)return!1}catch(n){return!1}var r=t.localStorage[e];return null!=r&&"true"===String(r).toLowerCase()}e.exports=n}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],64:[function(t,e,n){function r(){for(var t={},e=0;e<arguments.length;e++){var n=arguments[e];for(var r in n)i.call(n,r)&&(t[r]=n[r])}return t}e.exports=r;var i=Object.prototype.hasOwnProperty},{}]},{},[1]);